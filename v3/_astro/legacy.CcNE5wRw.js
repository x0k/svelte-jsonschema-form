import{k as P,o as I,R as W,U as k,V as q,q as m,W as C,x as p,X as D,Y as R}from"./definitions.DyoCK2HG.js";import"./_commonjsHelpers.B5dSTXEY.js";import{p as U,l as v,d as y,b as h,a as V,g as s,u,Z as B}from"./render.DqqfR5yS.js";import{d as H,f as X}from"./file.CGtKcauJ.js";import{a as Y}from"./file-include.Fj7lV7tu.js";function Z(w,r){U(r,!0);let a=P(r,"value",15);const i=I(),F=u(()=>p(i,"fieldTemplate",r.config)),l="fileWidget",_=u(()=>p(i,l,r.config)),A=W(i,()=>C(i,r.config,a())),o=H({initialOutput:void 0,getInput:()=>a(),setInput:e=>a(e),isEqual:(e,t)=>e===void 0&&t===void 0||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((n,f)=>n===t[f]),async toOutput(e,t){const n=new DataTransfer;return t&&await Y(i,e,n,t),n.files},async toInput(e,t){if(t!==void 0){if(!await k(e,i,r.config,t))throw new q;return Promise.all(Array.from(t).map(n=>X(e,n)))}}}),d=u(()=>D(i,r.config.id));var g=v(),O=y(g);m(O,()=>s(F),(e,t)=>{t(e,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return r.uiOption},widgetType:l,get value(){return a()},get config(){return r.config},get errors(){return s(d)},children:(n,f)=>{var c=v(),T=y(c);m(T,()=>s(_),(x,E)=>{E(x,{type:"widget",get processing(){return o.inputProcessing},get loading(){return o.outputProcessing},get uiOption(){return r.uiOption},get handlers(){return A},get errors(){return s(d)},get config(){return r.config},multiple:!0,get value(){return o.current},set value(L){o.current=L}})}),h(n,c)},$$slots:{default:!0}})}),h(w,g),V()}R.filesField=Z;B();export{Z as F};
