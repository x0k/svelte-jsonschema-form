import{b as G,c as ae}from"./assert.JdD8BXa_.js";import{aa as F,ah as ie,ai as oe,aj as se,ak as N,al as ce,am as ue,an as le,ao as U,L as de,ap as fe,aq as me,ar as pe,as as ge,ab as be,ac as W,ad as Y,N as ye,at as ve,p as S,k as C,W as _e,l as B,X as he,a2 as Ae,a3 as Fe,t as H,Z as Se,$ as Oe,s as Ee,r as we,a0 as xe}from"./definitions.iJbBEcx_.js";import{e as Re}from"./each.BEO3Vq6I.js";import{p as O,m as k,e as T,b as h,a as E,g,u as _,w as ke,f as j,aG as Te,c as Ve,s as Ce,r as Me,t as Pe,h as Le}from"./render.BbHDAxyr.js";import{s as je}from"./snippet.CdzS3xvw.js";import{c as De,h as Ie,d as D,b as Ne}from"./file.wfO_7GZ5.js";import{j as Ue,w as We,g as I,x as Be,i as K,e as He,m as Ge,f as Ye}from"./en.C26sZr63.js";function V(e,t,n={type:"root",path:[]}){if(!F(e))return t(e,n);const r={...e};for(const i of ie){const c=e[i];if(c===void 0||!Array.isArray(c))continue;const o={type:"array",parent:e,key:i,index:0,path:n.path.concat(i,0)};r[i]=c.map((d,l)=>(o.index=l,o.path[o.path.length-1]=l,V(d,t,o)))}const a=new Map;for(const i of oe){const c=e[i];if(c===void 0)continue;const o={type:"record",parent:e,key:i,property:"",path:n.path.concat(i,"")},d=Object.keys(c),l=d.length;for(let f=0;f<l;f++){const m=d[f],p=c[m];if(Array.isArray(p)){a.set(m,p);continue}o.property=m,o.path[o.path.length-1]=m,a.set(m,V(p,t,o))}r[i]=Object.fromEntries(a),a.clear()}const s={type:"sub",parent:e,key:"items",path:n.path.concat("")};for(const i of se){const c=e[i];c===void 0||Array.isArray(c)||(s.key=i,s.path[s.path.length-1]=i,r[i]=V(c,t,s))}return t(r,n)}function Ke(e,t){return V(e,n=>{if(!F(n))return n;const r=n[N];return r!==void 0&&r.startsWith("#")&&(n[N]=`${t}${r}`),n})}function X(e){return e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function St(e){if(e==="#")return[];const t=X(e);let n=!1;return t.map(r=>{if(n){const a=Number(r);if(Number.isInteger(a)&&a>=0)return n=!1,a}return n=ce.has(r),r})}function Xe(e,t){const n=[];if(e==="")return n;const r=X(e);let a=t;for(const s of r)if(Array.isArray(a)&&/^\d+$/.test(s)){const i=Number(s);n.push(i),a=a[i]}else n.push(s),a=a?.[s];return n}function Ot(e,t,n,r,a,s){function i(o,d,l,f){const m=o.map(y=>typeof y=="boolean"?y?{}:{not:{}}:y),p=fe(e,t,n,f,m,-1,me(d)),b=c(m[p],l,f);if(b!==void 0)return b;let u;for(const y of m){if(!F(y))continue;const v=c(y,l,f);if(v!==void 0){if(F(v))return v;u=v}}return u}function c(o,d,l){for(let f=0;f<d.length;f++){if(o===void 0||!F(o))return;if(o.$ref)return c(ue(o.$ref,n),d.slice(f),l);if(o.allOf){const u=t.mergeAllOf(o);if(!u.allOf)return c(u,d.slice(f),l)}const m=o.anyOf??o.oneOf??o.allOf;if(m){const u=i(m,o,d.slice(f),l);if(u!==void 0)return u}const p=d[f],b=typeof p;if(b==="number"){const{items:u,additionalItems:y}=o;o=(Array.isArray(u)?u[p]:u)??y,l=le(l)?l[p]:void 0;continue}if(b==="string"){const{properties:u,patternProperties:y,additionalProperties:v,dependencies:M,then:A,else:w}=o;o=(u&&u[p])??(y&&Object.entries(y).find(([P])=>new RegExp(P).test(p))?.[1])??v??(M&&i(Object.values(M).filter(U),o,d.slice(f),l))??((A||w)&&i([A,w].filter(U),o,d.slice(f),l)),l=de(l)?l[p]:void 0;continue}return}return o}return c(r,a,s)}const qe={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},ze=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Je=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function Ze(e){return e.addFormat("color",ze),e.addFormat(ge,Je),e}function Qe(e){return e.addKeyword(pe),e}function $e(e){return Qe(Ze(e))}function L(e,t){let n="",r=!1;const a=new WeakMap,s=Y(a,i=>{let c=i;return r&&(c=Ke(i,n),delete c[W]),e.compile(c)});return(i,c)=>{n=c[W]??be;let o=e.getSchema(n)?.schema;return o!==void 0&&o!==c&&(e.removeSchema(n),a.delete(i),o=void 0),o===void 0&&e.addSchema(c,n),r=i!==c,s(i)}}function q(e,t){const r=Y(new WeakMap,a=>e.compile({...a,$async:t}));return a=>r(a.schema)}function et({params:{missingProperty:e,propertyName:t},propertyName:n=t},r){let a=r;return a=e!==void 0?r.concat(e):a,a=n!==void 0?r.concat(n,ye("key-input")):a,a}function z({params:{missingProperty:e},parentSchema:t,message:n},r){if(!n)return"";if(e===void 0)return n;const a=r(e,t);return a===void 0?n:n.replace(e,a)}function J({uiSchema:e={}}){return(t,n)=>t.map(r=>{const a=Xe(r.instancePath,n);return{path:et(r,a),message:z(r,(s,i)=>{const c=ve(e,a.concat(s));if(c!==void 0)return c;const o=i?.properties?.[s];if(typeof o=="object")return o.title})}})}function Z(e){return e.instancePath===""}function tt(e){return Z(e)&&e.keyword!=="type"}function Q(e){return t=>t.filter(e.required?Z:tt).map(n=>z(n,()=>e.title))}function $(e,t,n){e(t);const r=e.errors;return e.errors=null,r?n(r,t):[]}async function ee(e,t,n){try{await e(t)}catch(r){if(!(r instanceof G.Ajv.ValidationError))throw r;return n(r.errors,t)}finally{e.errors=null}return[]}function te({compileSchema:e}){return{isValid(t,n,r){if(typeof t=="boolean")return t;const a=e(t,n);try{return a(r)}catch(s){return console.warn("Failed to validate",s),!1}}}}function nt(e){const t=J(e);return{validateFormValue(n,r){return $(e.compileSchema(n,n),r,t)}}}function rt({compileFieldSchema:e}){return{validateFieldValue(t,n){return $(e(t),n,Q(t))}}}function at(e){const t=J(e);return{async validateFormValueAsync(n,r,a){return ee(e.compileAsyncSchema(r,r),a,t)}}}function it({compileAsyncFieldSchema:e}){return{async validateFieldValueAsync(t,n,r){return ee(e(n),r,Q(n))}}}function Et({ajvOptions:e=qe,ajvPlugins:t=$e,ajv:n=t(new G.Ajv(e)),compileSchema:r=L(n),compileFieldSchema:a=q(n,!1),...s}={}){const i={...s,compileSchema:r,compileFieldSchema:a};return Object.assign(te(i),nt(i),rt(i))}function wt({ajv:e,compileSchema:t=L(e),compileAsyncSchema:n=L(e),compileAsyncFieldSchema:r=q(e,!0),...a}){const s={...a,compileSchema:t,compileAsyncSchema:n,compileAsyncFieldSchema:r};return Object.assign(te(s),at(s),it(s))}const ot="nativeFileField";function st(e,t){O(t,!0);const n=b=>{var u=k(),y=T(u);je(y,()=>g(f)??ke,()=>a,()=>t.config,()=>({get current(){return r()},set current(v){r(v)}}),()=>g(d)),h(b,u)};let r=S(t,"value",15);const a=C(),s=_(()=>H(a,"fieldTemplate",t.config)),i="fileWidget",c=_(()=>H(a,i,t.config)),o=_e(a,()=>t.config,()=>he(a,t.config,r())),d=_(()=>Se(a,t.config.path)),l=De({combinator:Ie,async execute(b,u){if(!(u===void 0||u.length===0)){if(!await Ae(b,a,t.config,u))throw new Fe;return u[0]}},onSuccess(b){r(b)}}),f=_(()=>Oe(a,t.config,ot));var m=k(),p=T(m);{let b=_(()=>g(f)&&n);B(p,()=>g(s),(u,y)=>{y(u,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return t.uiOption},widgetType:i,get value(){return r()},get config(){return t.config},get errors(){return g(d)},get action(){return g(b)},children:(v,M)=>{var A=k(),w=T(A),P=()=>{const x=r(),R=new DataTransfer;return x&&R.items.add(x),R.files},ne=l.run;B(w,()=>g(c),(x,R)=>{R(x,{type:"widget",get value(){return P()},set value(re){ne(re)},get processing(){return l.isProcessed},loading:!1,get uiOption(){return t.uiOption},get handlers(){return o},get errors(){return g(d)},get config(){return t.config},multiple:!1})}),h(v,A)},$$slots:{default:!0}})})}h(e,m),E()}function ct(e,t){O(t,!0);let n=S(t,"value",15),r=we(t,["$$slots","$$events","$$legacy","value"]);var a=()=>(ae(n()),n()),s=i=>{n(i)};st(e,Ee({get value(){return a()},set value(i){s(i)}},()=>r)),E()}xe.unknownNativeFileField=ct;var ut=j("<textarea></textarea>");function lt(e,t){O(t,!0);let n=S(t,"value",15);const r=C(),a=_(()=>We(r,t.config,"textarea",t.handlers,{style:"flex-grow: 1;"}));var s=ut();Te(s),D(s,()=>({...g(a)})),Ue(s,n),h(e,s),E()}I.textareaWidget=lt;var dt=j("<input/>");function ft(e,t){O(t,!0);let n=S(t,"value",15);const r=C(),a=_(()=>K(r,t.config,"file",t.handlers,{multiple:t.multiple,style:"flex-grow: 1","data-loading":t.loading,"data-processing":t.processing}));var s=dt();D(s,()=>({type:"file",...g(a)}),void 0,void 0,void 0,!0),Be(s,n),h(e,s),E()}I.fileWidget=ft;var mt=j('<label class="svelte-tmopj2"><input/> </label>');const pt={hash:"svelte-tmopj2",code:"label.svelte-tmopj2 {display:flex;align-items:start;gap:0.2rem;}"};function gt(e,t){O(t,!0),Ne(e,pt);const n=[];let r=S(t,"value",15);const a=C(),s=_(()=>K(a,t.config,"checkboxes",t.handlers,{type:"checkbox"})),i=Ge({mapper:()=>Ye(t.options),value:()=>r(),update:d=>r(d)});var c=k(),o=T(c);Re(o,19,()=>t.options,d=>d.id,(d,l,f)=>{var m=mt(),p=Ve(m);D(p,()=>({value:g(f),...g(s),id:g(l).id,disabled:g(l).disabled||g(s).disabled}),void 0,void 0,void 0,!0);var b=Ce(p);Me(m),Pe(()=>Le(b,` ${g(l).label??""}`)),He(n,[],p,()=>(g(f),i.value),u=>i.value=u),h(d,m)}),h(e,c),E()}I.checkboxesWidget=gt;export{$e as a,wt as b,Et as c,St as d,J as e,Q as f,Ot as g,Ke as h,Xe as p,$ as v};
