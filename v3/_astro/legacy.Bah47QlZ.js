import{a2 as I,O as L,b as N,p as S,e as x,m as k,a3 as D,a4 as P,j as h,k as q,l as O,o as C,a5 as B}from"./definitions.D6l9tcG8.js";import"./_commonjsHelpers.DWjMLJnj.js";import{p as H,m as b,e as E,b as _,a as M,g as l,u as g,aj as U}from"./render.BD-ZvB3X.js";import{e as W,f as z}from"./file.BEdc_U--.js";import{a as R}from"./file-include.BPa_l-if.js";const V=t=>({type:"object",properties:{default:t,error:t}}),ne={type:"boolean"},G={type:"string",enum:["foo","bar","fuzz","qux"]},ae={type:"array",items:G,uniqueItems:!0},X={type:"string",format:"data-url"},se={type:"array",items:X},oe={type:"number"},ie={type:"string"},J=t=>({default:t,error:t}),K=t=>t.map(e=>({path:[e,"error"],message:`${e} error`})),Q={[N]:"oninput",[L]:"onchange",[I]:"onblur"};Object.keys(Q).map(Number);const ue="switch";function ce(t){const e=Object.keys(t),i={type:"object",properties:Object.fromEntries(e.map(s=>[s,V(t[s][0])]))},a=Object.fromEntries(e.flatMap(s=>{const u=t[s][1];return Object.keys(u).length>0?[[s,J(u)]]:[]})),f=K(e);return{schema:i,uiSchema:a,initialErrors:f}}function le(t){if(t?.some(e=>typeof e!="string"))throw new TypeError("expected array of strings")}function Y(t,e){H(e,!0);let i=S(e,"value",15);const a=x(),f=g(()=>O(a,"fieldTemplate",e.config)),s="fileWidget",u=g(()=>O(a,s,e.config)),v=k(a,()=>e.config,()=>q(a,e.config,i())),c=W({initialOutput:void 0,getInput:()=>i(),setInput:r=>i(r),isEqual:(r,n)=>r===void 0&&n===void 0||Array.isArray(r)&&Array.isArray(n)&&r.length===n.length&&r.every((o,p)=>o===n[p]),async toOutput(r,n){const o=new DataTransfer;return n&&await R(a,r,o,n),o.files},async toInput(r,n){if(n!==void 0){if(!await D(r,a,e.config,n))throw new P;return Promise.all(Array.from(n).map(o=>z(r,o)))}}}),m=g(()=>C(a,e.config.path));var d=b(),A=E(d);h(A,()=>l(f),(r,n)=>{n(r,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:s,get value(){return i()},get config(){return e.config},get errors(){return l(m)},children:(o,p)=>{var y=b(),T=E(y);h(T,()=>l(u),(F,j)=>{j(F,{type:"widget",get processing(){return c.inputProcessing},get loading(){return c.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return v},get errors(){return l(m)},get config(){return e.config},multiple:!0,get value(){return c.current},set value(w){c.current=w}})}),_(o,y)},$$slots:{default:!0}})}),_(t,d),M()}B.filesField=Y;U();export{Y as F,ue as S,X as a,ne as b,le as c,ce as d,G as e,se as f,oe as n,ie as t,ae as u};
