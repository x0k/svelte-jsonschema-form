import{aa as q,ab as P,t as V,ac as H,ad as M,p as I,o as U,R as W,q as y,U as A,x as w,W as R,X as S,Y as X,Z as Y}from"./definitions.C_vWxCYR.js";import"./_commonjsHelpers.DeY__IKx.js";import{p as B,l as p,e as b,b as T,a as C,g as d,u as f}from"./render.BvCbmumc.js";import{d as Z,f as j}from"./file.B_KPueyH.js";async function N(a,e,n,t){const{name:s,blob:i}=await a[q](e,t);n.items.add(new File([i],s,{type:i.type}))}function ee(a,e,n,t){const s=[];for(const i of t)s.push(N(a,e,n,i));return Promise.all(s)}function x(a,e){return a.anyOf?[a.anyOf,e.anyOf]:[a.oneOf,e.oneOf]}function z(a,e,n,t){const s=t.enum,i=new Set(n("disabledEnumValues"));if(s){const r=n("enumNames");return s.map((o,u)=>{const g=r?.[u]??P(o);return{id:V(e.id,u,a),label:g,value:o,disabled:i.has(o)}})}const[m,O]=x(t,e.uiSchema);return m&&m.map((r,o)=>{if(typeof r=="boolean")throw new Error(`Invalid enum definition in anyOf ${o}`);const u=H(r),g=M(a,O?.[o])["ui:options"]?.title??r.title??P(u);return{id:V(e.id,o,a),schema:r,label:g,value:u,disabled:i.has(u)}})}function D(a,e){B(e,!0);let n=I(e,"value",15);const t=U(),s=f(()=>w(t,"fieldTemplate",e.config)),i="selectWidget",m=f(()=>w(t,i,e.config)),O=W(t,()=>A(t,e.config,n())),r=f(()=>z(t,e.config,e.uiOption,e.config.schema)??[]),o=f(()=>R(t,e.config.id));var u=p(),g=b(u);y(g,()=>d(s),(c,l)=>{l(c,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return n()},get config(){return e.config},get errors(){return d(o)},children:(v,k)=>{var h=p(),F=b(h);y(F,()=>d(m),(_,L)=>{L(_,{type:"widget",get handlers(){return O},get config(){return e.config},get errors(){return d(o)},get uiOption(){return e.uiOption},get options(){return d(r)},get value(){return n()},set value(E){n(E)}})}),T(v,h)},$$slots:{default:!0}})}),T(a,u),C()}S.enumField=D;function G(a,e){B(e,!0);let n=I(e,"value",15);const t=U(),s=f(()=>w(t,"fieldTemplate",e.config)),i="fileWidget",m=f(()=>w(t,i,e.config)),O=W(t,()=>A(t,e.config,n())),r=Z({initialOutput:void 0,getInput:()=>n(),setInput:c=>n(c),async toOutput(c,l){const v=new DataTransfer;return l!==void 0&&await N(t,c,v,l),v.files},async toInput(c,l){if(!(l===void 0||l.length===0)){if(!await X(c,t,e.config,l))throw new Y;return j(c,l[0])}}}),o=f(()=>R(t,e.config.id));var u=p(),g=b(u);y(g,()=>d(s),(c,l)=>{l(c,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return n()},get config(){return e.config},get errors(){return d(o)},children:(v,k)=>{var h=p(),F=b(h);y(F,()=>d(m),(_,L)=>{L(_,{type:"widget",get processing(){return r.inputProcessing},get loading(){return r.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return O},get errors(){return d(o)},get config(){return e.config},multiple:!1,get value(){return r.current},set value(E){r.current=E}})}),T(v,h)},$$slots:{default:!0}})}),T(a,u),C()}S.fileField=G;export{ee as a,z as c};
