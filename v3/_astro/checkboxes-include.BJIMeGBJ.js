import{a as B}from"./multi-enum-include.B_E-uM-W.js";import{a9 as S,ag as te,ah as ne,ai as re,aj as I,ak as ae,al as ie,am as oe,an as U,R as se,ao as ue,ap as ce,aq as le,ar as fe,aa as de,ab as j,ac as H,U as pe,as as me,p as O,d as T,m as ge,e as N,j as ye,a0 as be,a1 as ve,k as W,n as _e,s as he,r as Ae,a2 as Fe}from"./definitions.Alz4DWWs.js";import{e as Se}from"./each.CCbNYC82.js";import{p as E,m as V,e as C,b as F,a as w,g as y,u as A,f as P,aH as Oe,c as Ee,s as we,r as Re,t as xe,h as ke}from"./render.BDRr2Iv9.js";import{c as Te,g as Ve,b as L}from"./file.Dy3skqxB.js";import{j as Ce,w as Me,g as D,x as Pe,i as Y,e as Le,m as De,f as Ie}from"./en.DAt9nQCd.js";function k(e,t,n={type:"root",path:[]}){if(!S(e))return t(e,n);const r={...e};for(const i of te){const u=e[i];if(u===void 0||!Array.isArray(u))continue;const o={type:"array",parent:e,key:i,index:0,path:n.path.concat(i,0)};r[i]=u.map((l,c)=>(o.index=c,o.path[o.path.length-1]=c,k(l,t,o)))}const a=new Map;for(const i of ne){const u=e[i];if(u===void 0)continue;const o={type:"record",parent:e,key:i,property:"",path:n.path.concat(i,"")},l=Object.keys(u),c=l.length;for(let p=0;p<c;p++){const d=l[p],f=u[d];if(Array.isArray(f)){a.set(d,f);continue}o.property=d,o.path[o.path.length-1]=d,a.set(d,k(f,t,o))}r[i]=Object.fromEntries(a),a.clear()}const s={type:"sub",parent:e,key:"items",path:n.path.concat("")};for(const i of re){const u=e[i];u===void 0||Array.isArray(u)||(s.key=i,s.path[s.path.length-1]=i,r[i]=k(u,t,s))}return t(r,n)}function Ue(e,t){return k(e,n=>{if(!S(n))return n;const r=n[I];return r!==void 0&&r.startsWith("#")&&(n[I]=`${t}${r}`),n})}function G(e){return e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function pt(e){if(e==="#")return[];const t=G(e);let n=!1;return t.map(r=>{if(n){const a=Number(r);if(Number.isInteger(a)&&a>=0)return n=!1,a}return n=ae.has(r),r})}function je(e,t){const n=[];if(e==="")return n;const r=G(e);let a=t;for(const s of r)if(Array.isArray(a)&&/^\d+$/.test(s)){const i=Number(s);n.push(i),a=a[i]}else n.push(s),a=a?.[s];return n}function mt(e,t,n,r,a,s){function i(o,l,c,p){const d=o.map(g=>typeof g=="boolean"?g?{}:{not:{}}:g),f=ue(e,t,n,p,d,-1,ce(l)),b=u(d[f],c,p);if(b!==void 0)return b;let m;for(const g of d){if(!S(g))continue;const v=u(g,c,p);if(v!==void 0){if(S(v))return v;m=v}}return m}function u(o,l,c){for(let p=0;p<l.length;p++){if(o===void 0||!S(o))return;if(o.$ref)return u(ie(o.$ref,n),l.slice(p),c);if(o.allOf){const m=t.mergeAllOf(o);if(!m.allOf)return u(m,l.slice(p),c)}const d=o.anyOf??o.oneOf??o.allOf;if(d){const m=i(d,o,l.slice(p),c);if(m!==void 0)return m}const f=l[p],b=typeof f;if(b==="number"){const{items:m,additionalItems:g}=o;o=(Array.isArray(m)?m[f]:m)??g,c=oe(c)?c[f]:void 0;continue}if(b==="string"){const{properties:m,patternProperties:g,additionalProperties:v,dependencies:R,then:x,else:_}=o;o=(m&&m[f])??(g&&Object.entries(g).find(([h])=>new RegExp(h).test(f))?.[1])??v??(R&&i(Object.values(R).filter(U),o,l.slice(p),c))??((x||_)&&i([x,_].filter(U),o,l.slice(p),c)),c=se(c)?c[f]:void 0;continue}return}return o}return u(r,a,s)}const Ne={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},We=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Be=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function He(e){return e.addFormat("color",We),e.addFormat(fe,Be),e}function Ye(e){return e.addKeyword(le),e}function Ge(e){return Ye(He(e))}function M(e,t){let n="",r=!1;const a=new WeakMap,s=H(a,i=>{let u=i;return r&&(u=Ue(i,n),delete u[j]),e.compile(u)});return(i,u)=>{n=u[j]??de;let o=e.getSchema(n)?.schema;return o!==void 0&&o!==u&&(e.removeSchema(n),a.delete(i),o=void 0),o===void 0&&e.addSchema(u,n),r=i!==u,s(i)}}function K(e,t){const r=H(new WeakMap,a=>e.compile({...a,$async:t}));return a=>r(a.schema)}function Ke({params:{missingProperty:e,propertyName:t},propertyName:n=t},r){let a=r;return a=e!==void 0?r.concat(e):a,a=n!==void 0?r.concat(n,pe("key-input")):a,a}function q({params:{missingProperty:e},parentSchema:t,message:n},r){if(!n)return"";if(e===void 0)return n;const a=r(e,t);return a===void 0?n:n.replace(e,a)}function z({uiSchema:e={}}){return(t,n)=>t.map(r=>{const a=je(r.instancePath,n);return{path:Ke(r,a),message:q(r,(s,i)=>{const u=me(e,a.concat(s));if(u!==void 0)return u;const o=i?.properties?.[s];if(typeof o=="object")return o.title})}})}function X(e){return e.instancePath===""}function qe(e){return X(e)&&e.keyword!=="type"}function J(e){return t=>t.filter(e.required?X:qe).map(n=>q(n,()=>e.title))}function Q(e,t,n){e(t);const r=e.errors;return e.errors=null,r?n(r,t):[]}async function Z(e,t,n){try{await e(t)}catch(r){if(!(r instanceof B.Ajv.ValidationError))throw r;return n(r.errors,t)}finally{e.errors=null}return[]}function $({compileSchema:e}){return{isValid(t,n,r){if(typeof t=="boolean")return t;const a=e(t,n);try{return a(r)}catch(s){return console.warn("Failed to validate",s),!1}}}}function ze(e){const t=z(e);return{validateFormValue(n,r){return Q(e.compileSchema(n,n),r,t)}}}function Xe({compileFieldSchema:e}){return{validateFieldValue(t,n){return Q(e(t),n,J(t))}}}function Je(e){const t=z(e);return{async validateFormValueAsync(n,r,a){return Z(e.compileAsyncSchema(r,r),a,t)}}}function Qe({compileAsyncFieldSchema:e}){return{async validateFieldValueAsync(t,n,r){return Z(e(n),r,J(n))}}}function gt({ajvOptions:e=Ne,ajvPlugins:t=Ge,ajv:n=t(new B.Ajv(e)),compileSchema:r=M(n),compileFieldSchema:a=K(n,!1),...s}={}){const i={...s,compileSchema:r,compileFieldSchema:a};return Object.assign($(i),ze(i),Xe(i))}function yt({ajv:e,compileSchema:t=M(e),compileAsyncSchema:n=M(e),compileAsyncFieldSchema:r=K(e,!0),...a}){const s={...a,compileSchema:t,compileAsyncSchema:n,compileAsyncFieldSchema:r};return Object.assign($(s),Je(s),Qe(s))}function Ze(e){if(e!==void 0&&!(e instanceof File))throw new Error(`expected "File" or "undefined", but got (${typeof e}: ${JSON.stringify(e)})`)}function $e(e,t){E(t,!0);let n=O(t,"value",15);const r=T(),a=A(()=>W(r,"fieldTemplate",t.config)),s="fileWidget",i=A(()=>W(r,s,t.config)),u=ge(r,()=>t.config,()=>ye(r,t.config,n())),o=A(()=>_e(r,t.config.path)),l=Te({combinator:Ve,async execute(d,f){if(!(f===void 0||f.length===0)){if(!await be(d,r,t.config,f))throw new ve;return f[0]}},onSuccess(d){n(d)}});var c=V(),p=C(c);N(p,()=>y(a),(d,f)=>{f(d,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return t.uiOption},widgetType:s,get value(){return n()},get config(){return t.config},get errors(){return y(o)},children:(b,m)=>{var g=V(),v=C(g),R=()=>{const _=n(),h=new DataTransfer;return _&&h.items.add(_),h.files},x=l.run;N(v,()=>y(i),(_,h)=>{h(_,{type:"widget",get value(){return R()},set value(ee){x(ee)},get processing(){return l.isProcessed},loading:!1,get uiOption(){return t.uiOption},get handlers(){return u},get errors(){return y(o)},get config(){return t.config},multiple:!1})}),F(b,g)},$$slots:{default:!0}})}),F(e,c),w()}function et(e,t){E(t,!0);let n=O(t,"value",15),r=Ae(t,["$$slots","$$events","$$legacy","value"]);var a=()=>(Ze(n()),n()),s=i=>{n(i)};$e(e,he({get value(){return a()},set value(i){s(i)}},()=>r)),w()}Fe.unknownNativeFileField=et;var tt=P("<textarea></textarea>");function nt(e,t){E(t,!0);let n=O(t,"value",15);const r=T(),a=A(()=>Me(r,t.config,"textarea",t.handlers,{style:"flex-grow: 1;"}));var s=tt();Oe(s),L(s,()=>({...y(a)})),Ce(s,n),F(e,s),w()}D.textareaWidget=nt;var rt=P("<input/>");function at(e,t){E(t,!0);let n=O(t,"value",15);const r=T(),a=A(()=>Y(r,t.config,"file",t.handlers,{multiple:t.multiple,style:"flex-grow: 1","data-loading":t.loading,"data-processing":t.processing}));var s=rt();L(s,()=>({type:"file",...y(a)}),void 0,void 0,void 0,!0),Pe(s,n),F(e,s),w()}D.fileWidget=at;var it=P("<label><input/> </label>");function ot(e,t){E(t,!0);const n=[];let r=O(t,"value",15);const a=T(),s=A(()=>Y(a,t.config,"checkboxes",t.handlers,{type:"checkbox"})),i=De({mapper:()=>Ie(t.options),value:()=>r(),update:l=>r(l)});var u=V(),o=C(u);Se(o,19,()=>t.options,l=>l.id,(l,c,p)=>{var d=it(),f=Ee(d);L(f,()=>({value:y(p),...y(s),id:y(c).id,disabled:y(c).disabled||y(s).disabled}),void 0,void 0,void 0,!0);var b=we(f);Re(d),xe(()=>ke(b,` ${y(c).label??""}`)),Le(n,[],f,()=>(y(p),i.value),m=>i.value=m),F(l,d)}),F(e,u),w()}D.checkboxesWidget=ot;export{Ge as a,yt as b,gt as c,pt as d,z as e,J as f,mt as g,Ue as h,je as p,Q as v};
