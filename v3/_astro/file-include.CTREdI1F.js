import{ac as q,ad as R,k as j,ae as z,af as D,p as V,g as S,m as W,c as w,v as I,d as b,j as A,a2 as U,ag as G,a0 as J,a1 as K}from"./definitions.YIf4wLMH.js";import"./_commonjsHelpers.BLl3nBgh.js";import{p as k,m as T,e as _,b as F,a as B,g as l,u as d}from"./render.BKpHmBbc.js";import{e as Q,f as X}from"./file.DehvqO_H.js";async function M(i,e,n,t){const{name:g,blob:r}=await i[q](e,t);n.items.add(new File([r],g,{type:r.type}))}function re(i,e,n,t){const g=[];for(const r of t)g.push(M(i,e,n,r));return Promise.all(g)}function Y(i,e){return i.anyOf?[i.anyOf,e.anyOf]:[i.oneOf,e.oneOf]}function N(i,e,n,t){const g=t.enum,r=new Set(n("disabledEnumValues"));if(g){const u=n("enumNames");return g.map((a,o)=>{const f=u?.[o]??R(a);return{id:j(e.id,o,i),label:f,value:a,disabled:r.has(a)}})}const[m,O]=Y(t,e.uiSchema);return m&&m.map((u,a)=>{if(typeof u=="boolean")throw new Error(`Invalid enum definition in anyOf ${a}`);const o=z(u),f=D(i,O?.[a])["ui:options"]?.title??u.title??R(o);return{id:j(e.id,a,i),schema:u,label:f,value:o,disabled:r.has(o)}})}function Z(i,e){k(e,!0);let n=V(e,"value",15);const t=S(),g=d(()=>b(t,"fieldTemplate",e.config)),r="selectWidget",m=d(()=>b(t,r,e.config)),O=W(t,()=>e.config,()=>I(t,e.config,n())),u=d(()=>N(t,e.config,e.uiOption,e.config.schema)??[]),a=d(()=>A(t,e.config.id));var o=T(),f=_(o);w(f,()=>l(g),(s,c)=>{c(s,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:r,get value(){return n()},get config(){return e.config},get errors(){return l(a)},children:(v,C)=>{var h=T(),L=_(h);w(L,()=>l(m),(E,P)=>{P(E,{type:"widget",get handlers(){return O},get config(){return e.config},get errors(){return l(a)},get uiOption(){return e.uiOption},get options(){return l(u)},get value(){return n()},set value(y){n(y)}})}),F(v,h)},$$slots:{default:!0}})}),F(i,o),B()}U.enumField=Z;function p(i,e){k(e,!0);let n=V(e,"value",15);const t=S(),g=d(()=>b(t,"fieldTemplate",e.config)),r="checkboxesWidget",m=d(()=>b(t,r,e.config)),O=W(t,()=>e.config,()=>I(t,e.config,n())),u=d(()=>{const{items:s}=e.config.schema,c=G(s)?s:{};return N(t,e.config,e.uiOption,c)??[]}),a=d(()=>A(t,e.config.id));var o=T(),f=_(o);w(f,()=>l(g),(s,c)=>{c(s,{type:"template",showTitle:!0,useLabel:!1,get uiOption(){return e.uiOption},widgetType:r,get value(){return n()},get config(){return e.config},get errors(){return l(a)},children:(v,C)=>{var h=T(),L=_(h),E=()=>n()??void 0,P=y=>n(y);w(L,()=>l(m),(y,x)=>{x(y,{type:"widget",get handlers(){return O},get config(){return e.config},get errors(){return l(a)},get value(){return E()},set value(H){P(H)},get options(){return l(u)},get uiOption(){return e.uiOption}})}),F(v,h)},$$slots:{default:!0}})}),F(i,o),B()}U.multiEnumField=p;function $(i,e){k(e,!0);let n=V(e,"value",15);const t=S(),g=d(()=>b(t,"fieldTemplate",e.config)),r="fileWidget",m=d(()=>b(t,r,e.config)),O=W(t,()=>e.config,()=>I(t,e.config,n())),u=Q({initialOutput:void 0,getInput:()=>n(),setInput:s=>n(s),async toOutput(s,c){const v=new DataTransfer;return c&&await M(t,s,v,c),v.files},async toInput(s,c){if(!(c===void 0||c.length===0)){if(!await J(s,t,e.config,c))throw new K;return X(s,c[0])}}}),a=d(()=>A(t,e.config.id));var o=T(),f=_(o);w(f,()=>l(g),(s,c)=>{c(s,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:r,get value(){return n()},get config(){return e.config},get errors(){return l(a)},children:(v,C)=>{var h=T(),L=_(h);w(L,()=>l(m),(E,P)=>{P(E,{type:"widget",get processing(){return u.inputProcessing},get loading(){return u.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return O},get errors(){return l(a)},get config(){return e.config},multiple:!1,get value(){return u.current},set value(y){u.current=y}})}),F(v,h)},$$slots:{default:!0}})}),F(i,o),B()}U.fileField=$;export{re as a};
