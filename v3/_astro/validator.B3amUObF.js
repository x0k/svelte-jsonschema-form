import{a as S}from"./ajv.BUY7ncLt.js";import{t as b,a3 as I,a4 as M,a5 as L,a6 as h,a7 as P,a8 as U,a9 as A,aa as _,o as F,n as D,ab as E,k as $}from"./definitions.CiLYYhRm.js";import"./_commonjsHelpers.B51_3taw.js";function f(e,n,r={type:"root",path:[]}){if(!b(e))return n(e,r);const t={...e};for(const a of I){const i=e[a];if(i===void 0||!Array.isArray(i))continue;const s={type:"array",parent:e,key:a,index:0,path:r.path.concat(a,0)};t[a]=i.map((l,d)=>(s.index=d,s.path[s.path.length-1]=d,f(l,n,s)))}const o=new Map;for(const a of M){const i=e[a];if(i===void 0)continue;const s={type:"record",parent:e,key:a,property:"",path:r.path.concat(a,"")},l=Object.keys(i),d=l.length;for(let p=0;p<d;p++){const u=l[p],y=i[u];if(Array.isArray(y)){o.set(u,y);continue}s.property=u,s.path[s.path.length-1]=u,o.set(u,f(y,n,s))}t[a]=Object.fromEntries(o),o.clear()}const c={type:"sub",parent:e,key:"items",path:r.path.concat("")};for(const a of L){const i=e[a];i===void 0||Array.isArray(i)||(c.key=a,c.path[c.path.length-1]=a,t[a]=f(i,n,c))}return n(t,r)}function g(e,n){return f(e,r=>{if(!b(r))return r;const t=r[h];return t!==void 0&&t.startsWith("#")&&(r[h]=`${n}${t}`),r})}const j={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},B=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,G=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function H(e){return e.addFormat("color",B),e.addFormat("data-url",G),e}function K(e){return e.addKeyword(P),e}function Y(e){return K(H(e))}function m(e,n){let r="",t=!1;const o=new WeakMap,c=_(o,a=>{let i=a;return t&&(i=g(a,r),delete i[A]),e.compile(i)});return(a,i)=>{r=i[A]??U;let s=e.getSchema(r)?.schema;return s!==void 0&&s!==i&&(e.removeSchema(r),o.delete(a),s=void 0),s===void 0&&e.addSchema(i,r),t=a!==i,c(a)}}function R(e,n){const t=_(new WeakMap,o=>e.compile({...o,$async:n}));return o=>t(o.schema)}function T({params:{missingProperty:e},parentSchema:n,message:r},t){if(!r)return"";if(e===void 0)return r;const o=t(e,n);return o===void 0?r:r.replace(e,o)}function O(e){const n=({params:{missingProperty:r,propertyName:t},propertyName:o=t},c)=>{let a=D(c,e);return a=r!==void 0?E(a,r,e):a,a=o!==void 0?$(E(a,o,e),"key-input",e):a,a};return r=>r.map(t=>{let o=t.instancePath.split("/");return o[0]===""&&(o=o.slice(1)),{instanceId:n(t,o),propertyTitle:F(e.uiSchema??{},o)??t.parentSchema?.title??o.join("."),message:T(t,(c,a)=>{const i=F(e.uiSchema??{},o.concat(c));if(i!==void 0)return i;const s=a?.properties?.[c];if(typeof s=="object")return s.title}),error:t}})}function V(e){return e.instancePath===""}function z(e){return V(e)&&e.keyword!=="type"}function k(e){return n=>n.filter(e.required?V:z).map(r=>({instanceId:e.id,propertyTitle:e.title,message:T(r,()=>e.title),error:r}))}function C(e,n,r){e(n);const t=e.errors;return e.errors=null,t?r(t):[]}async function w(e,n,r){try{await e(n)}catch(t){if(!(t instanceof S.Ajv.ValidationError))throw t;return r(t.errors)}finally{e.errors=null}return[]}function v({compileSchema:e}){return{isValid(n,r,t){if(typeof n=="boolean")return n;const o=e(n,r);try{return o(t)}catch(c){return console.warn("Failed to validate",c),!1}}}}function N(e){const n=O(e);return{validateFormValue(r,t){return C(e.compileSchema(r,r),t,n)}}}function W({compileFieldSchema:e}){return{validateFieldValue(n,r){return C(e(n),r,k(n))}}}function X(e){const n=O(e);return{async validateFormValueAsync(r,t,o){return w(e.compileAsyncSchema(t,t),o,n)}}}function q({compileAsyncFieldSchema:e}){return{async validateFieldValueAsync(n,r,t){return w(e(r),t,k(r))}}}function Z({ajvOptions:e=j,ajvPlugins:n=Y,ajv:r=n(new S.Ajv(e)),compileSchema:t=m(r),compileFieldSchema:o=R(r,!1),...c}={}){const a={...c,compileSchema:t,compileFieldSchema:o};return Object.assign(v(a),N(a),W(a))}function ee({ajv:e,compileSchema:n=m(e),compileAsyncSchema:r=m(e),compileAsyncFieldSchema:t=R(e,!0),...o}){const c={...o,compileSchema:n,compileAsyncSchema:r,compileAsyncFieldSchema:t};return Object.assign(v(c),X(c),q(c))}export{Y as a,ee as b,Z as c,O as d,k as e,g as p,C as v};
