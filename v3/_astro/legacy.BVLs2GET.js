import{p as P,o as I,R as W,U as q,V as C,q as m,W as D,x as p,X as R,Y as U}from"./definitions.WtXJsyQU.js";import"./_commonjsHelpers.DeY__IKx.js";import{p as V,l as v,e as y,b as h,a as k,g as s,u,Z as B}from"./render.BvCbmumc.js";import{d as H,f as X}from"./file.B9n3EPbd.js";import{a as Y}from"./file-include.DVYe__Bb.js";function Z(w,n){V(n,!0);let a=P(n,"value",15);const i=I(),F=u(()=>p(i,"fieldTemplate",n.config)),l="fileWidget",_=u(()=>p(i,l,n.config)),A=W(i,()=>D(i,n.config,a())),o=H({initialOutput:void 0,getInput:()=>a(),setInput:e=>a(e),isEqual:(e,t)=>e===void 0&&t===void 0||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((r,f)=>r===t[f]),async toOutput(e,t){const r=new DataTransfer;return t!==void 0&&await Y(i,e,r,t),r.files},async toInput(e,t){if(t!==void 0){if(!await q(e,i,n.config,t))throw new C;return Promise.all(Array.from(t).map(r=>X(e,r)))}}}),d=u(()=>R(i,n.config.id));var g=v(),O=y(g);m(O,()=>s(F),(e,t)=>{t(e,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return n.uiOption},widgetType:l,get value(){return a()},get config(){return n.config},get errors(){return s(d)},children:(r,f)=>{var c=v(),T=y(c);m(T,()=>s(_),(x,E)=>{E(x,{type:"widget",get processing(){return o.inputProcessing},get loading(){return o.outputProcessing},get uiOption(){return n.uiOption},get handlers(){return A},get errors(){return s(d)},get config(){return n.config},multiple:!0,get value(){return o.current},set value(L){o.current=L}})}),h(r,c)},$$slots:{default:!0}})}),h(w,g),k()}U.filesField=Z;B();export{Z as F};
