import{$ as w,O as L,b as N,N as S,p as x,g as P,m as D,a0 as k,a1 as q,c as b,v as C,d as h,j as B,a2 as H}from"./definitions.CiLYYhRm.js";import"./_commonjsHelpers.B51_3taw.js";import{p as M,m as E,d as _,b as v,a as U,g as f,u as d,aj as W}from"./render.CCL00nPe.js";import{e as z,f as R}from"./file.BSwbAV2K.js";import{a as V}from"./file-include.C1t7Hlyd.js";const G=t=>({type:"object",properties:{default:t,error:t}}),ae={type:"boolean"},X={type:"string",enum:["foo","bar","fuzz","qux"]},se={type:"array",items:X,uniqueItems:!0},J={type:"string",format:"data-url"},oe={type:"array",items:J},ie={type:"number"},ue={type:"string"},K=t=>({default:t,error:t}),Q=(t,e)=>t.map(a=>({error:null,instanceId:S([a,"error"],e),propertyTitle:"error",message:`${a} error`})),Y={[N]:"oninput",[L]:"onchange",[w]:"onblur"};Object.keys(Y).map(Number);const ce="switch";function le(t,e){const a=Object.keys(t),s={type:"object",properties:Object.fromEntries(a.map(i=>[i,G(t[i][0])]))},g=Object.fromEntries(a.flatMap(i=>{const c=t[i][1];return Object.keys(c).length>0?[[i,K(c)]]:[]})),u=Q(a,e);return{schema:s,uiSchema:g,initialErrors:u}}function fe(t){if(t?.some(e=>typeof e!="string"))throw new TypeError("expected array of strings")}function Z(t,e){M(e,!0);let a=x(e,"value",15);const s=P(),g=d(()=>h(s,"fieldTemplate",e.config)),u="fileWidget",i=d(()=>h(s,u,e.config)),c=D(s,()=>e.config,()=>C(s,e.config,a())),l=z({initialOutput:void 0,getInput:()=>a(),setInput:r=>a(r),isEqual:(r,n)=>r===void 0&&n===void 0||Array.isArray(r)&&Array.isArray(n)&&r.length===n.length&&r.every((o,y)=>o===n[y]),async toOutput(r,n){const o=new DataTransfer;return n&&await V(s,r,o,n),o.files},async toInput(r,n){if(n!==void 0){if(!await k(r,s,e.config,n))throw new q;return Promise.all(Array.from(n).map(o=>R(r,o)))}}}),m=d(()=>B(s,e.config.id));var p=E(),A=_(p);b(A,()=>f(g),(r,n)=>{n(r,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:u,get value(){return a()},get config(){return e.config},get errors(){return f(m)},children:(o,y)=>{var O=E(),T=_(O);b(T,()=>f(i),(F,I)=>{I(F,{type:"widget",get processing(){return l.inputProcessing},get loading(){return l.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return c},get errors(){return f(m)},get config(){return e.config},multiple:!0,get value(){return l.current},set value(j){l.current=j}})}),v(o,O)},$$slots:{default:!0}})}),v(t,p),U()}H.filesField=Z;W();export{Z as F,ce as S,J as a,ae as b,fe as c,le as d,X as e,oe as f,ie as n,ue as t,se as u};
