import{b as D}from"./file-include.BoYneJ0W.js";import{a6 as v,ae as te,af as re,ag as ne,ah as P,ai as ae,aj as ie,U as oe,ak as se,al as ue,a7 as ce,a8 as L,a9 as N,R as le,am as fe,p as A,d as F,m as de,j as me,e as I,k as U,n as pe,a3 as ye,a4 as ge}from"./definitions.MJ4hHTJ0.js";import{e as ve}from"./_commonjsHelpers.DWjMLJnj.js";import{p as E,m as R,e as x,g as m,u as y,b as g,a as S,f as w,aH as be,c as he,s as _e,r as Ae,t as Fe,h as Ee}from"./render.BD-ZvB3X.js";import{c as Se,g as Oe,b as k}from"./file.CB3AE7uM.js";import{j as Re,x as xe,g as V,y as Te,i as W,e as we,m as ke,f as Ve}from"./en.DQ4APLFd.js";function _(t,e,r={type:"root",path:[]}){if(!v(t))return e(t,r);const n={...t};for(const o of te){const s=t[o];if(s===void 0||!Array.isArray(s))continue;const u={type:"array",parent:t,key:o,index:0,path:r.path.concat(o,0)};n[o]=s.map((c,l)=>(u.index=l,u.path[u.path.length-1]=l,_(c,e,u)))}const a=new Map;for(const o of re){const s=t[o];if(s===void 0)continue;const u={type:"record",parent:t,key:o,property:"",path:r.path.concat(o,"")},c=Object.keys(s),l=c.length;for(let p=0;p<l;p++){const f=c[p],d=s[f];if(Array.isArray(d)){a.set(f,d);continue}u.property=f,u.path[u.path.length-1]=f,a.set(f,_(d,e,u))}n[o]=Object.fromEntries(a),a.clear()}const i={type:"sub",parent:t,key:"items",path:r.path.concat("")};for(const o of ne){const s=t[o];s===void 0||Array.isArray(s)||(i.key=o,i.path[i.path.length-1]=o,n[o]=_(s,e,i))}return e(n,r)}function Ce(t,e){return _(t,r=>{if(!v(r))return r;const n=r[P];return n!==void 0&&n.startsWith("#")&&(r[P]=`${e}${n}`),r})}function B(t){return t.split("/").slice(1).map(e=>e.replace(/~1/g,"/").replace(/~0/g,"~"))}function at(t){if(t==="#")return[];const e=B(t);let r=!1;return e.map(n=>{if(r){const a=Number(n);if(Number.isInteger(a)&&a>=0)return r=!1,a}return r=ae.has(n),n})}function Me(t,e){const r=[];if(t==="")return r;const n=B(t);let a=e;for(const i of n)if(Array.isArray(a)&&/^\d+$/.test(i)){const o=Number(i);r.push(o),a=a[o]}else r.push(i),a=a?.[i];return r}function j(t,e,r){for(let n=0;n<r.length;n++){if(e===void 0||!v(e))return;if(e.$ref)return j(t,ie(e.$ref,t),r.slice(n));const a=e.anyOf??e.oneOf??e.allOf;if(a){const s=r.slice(n);let u,c;for(const l of a)if(v(l)&&(u=j(t,l,s),u!==void 0)){if(v(u))return u;c=u}if(c!==void 0)return c}const i=r[n],o=oe(e);if(o==="array"){const{items:s,additionalItems:u}=e;e=(Array.isArray(s)?s[i]:s)??u;continue}if(o==="object"){const{properties:s,patternProperties:u,additionalProperties:c}=e;e=(s&&s[i])??(u&&Object.entries(u).find(([l])=>new RegExp(l).test(i))?.[1])??c;continue}return}return e}const Pe={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},Le=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Ie=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function Ue(t){return t.addFormat("color",Le),t.addFormat(ue,Ie),t}function je(t){return t.addKeyword(se),t}function De(t){return je(Ue(t))}function T(t,e){let r="",n=!1;const a=new WeakMap,i=N(a,o=>{let s=o;return n&&(s=Ce(o,r),delete s[L]),t.compile(s)});return(o,s)=>{r=s[L]??ce;let u=t.getSchema(r)?.schema;return u!==void 0&&u!==s&&(t.removeSchema(r),a.delete(o),u=void 0),u===void 0&&t.addSchema(s,r),n=o!==s,i(o)}}function H(t,e){const n=N(new WeakMap,a=>t.compile({...a,$async:e}));return a=>n(a.schema)}function Ne({params:{missingProperty:t,propertyName:e},propertyName:r=e},n){let a=n;return a=t!==void 0?n.concat(t):a,a=r!==void 0?n.concat(r,le("key-input")):a,a}function Y({params:{missingProperty:t},parentSchema:e,message:r},n){if(!r)return"";if(t===void 0)return r;const a=n(t,e);return a===void 0?r:r.replace(t,a)}function G({uiSchema:t={}}){return(e,r)=>e.map(n=>{const a=Me(n.instancePath,r);return{path:Ne(n,a),message:Y(n,(i,o)=>{const s=fe(t,a.concat(i));if(s!==void 0)return s;const u=o?.properties?.[i];if(typeof u=="object")return u.title})}})}function K(t){return t.instancePath===""}function We(t){return K(t)&&t.keyword!=="type"}function z(t){return e=>e.filter(t.required?K:We).map(r=>Y(r,()=>t.title))}function X(t,e,r){t(e);const n=t.errors;return t.errors=null,n?r(n,e):[]}async function q(t,e,r){try{await t(e)}catch(n){if(!(n instanceof D.Ajv.ValidationError))throw n;return r(n.errors,e)}finally{t.errors=null}return[]}function J({compileSchema:t}){return{isValid(e,r,n){if(typeof e=="boolean")return e;const a=t(e,r);try{return a(n)}catch(i){return console.warn("Failed to validate",i),!1}}}}function Be(t){const e=G(t);return{validateFormValue(r,n){return X(t.compileSchema(r,r),n,e)}}}function He({compileFieldSchema:t}){return{validateFieldValue(e,r){return X(t(e),r,z(e))}}}function Ye(t){const e=G(t);return{async validateFormValueAsync(r,n,a){return q(t.compileAsyncSchema(n,n),a,e)}}}function Ge({compileAsyncFieldSchema:t}){return{async validateFieldValueAsync(e,r,n){return q(t(r),n,z(r))}}}function it({ajvOptions:t=Pe,ajvPlugins:e=De,ajv:r=e(new D.Ajv(t)),compileSchema:n=T(r),compileFieldSchema:a=H(r,!1),...i}={}){const o={...i,compileSchema:n,compileFieldSchema:a};return Object.assign(J(o),Be(o),He(o))}function ot({ajv:t,compileSchema:e=T(t),compileAsyncSchema:r=T(t),compileAsyncFieldSchema:n=H(t,!0),...a}){const i={...a,compileSchema:e,compileAsyncSchema:r,compileAsyncFieldSchema:n};return Object.assign(J(i),Ye(i),Ge(i))}function st(t,e){return function(r,n){const a=new Proxy(n,{get(i,o,s){const u=e[o];if(u!==void 0){const{transform:c}=u;if(c!==void 0)return c(i)}return Reflect.get(i,o,s)},set(i,o,s,u){const c=e[o];if(c!==void 0&&"recover"in c){const{recover:l}=c;if(l!==void 0)return l(i,s),!0}return Reflect.set(i,o,s,u)},has(i,o){return Reflect.has(i,o)||e?.[o]?.transform!==void 0}});return t(r,a)}}function ut(t,e){E(e,!0);let r=A(e,"value",15);const n=F(),a=y(()=>U(n,"fieldTemplate",e.config)),i="fileWidget",o=y(()=>U(n,i,e.config)),s=de(n,()=>e.config,()=>me(n,e.config,r())),u=y(()=>pe(n,e.config.path)),c=Se({combinator:Oe,async execute(f,d){if(!(d===void 0||d.length===0)){if(!await ye(f,n,e.config,d))throw new ge;return d[0]}},onSuccess(f){r(f)}});var l=R(),p=x(l);I(p,()=>m(a),(f,d)=>{d(f,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return r()},get config(){return e.config},get errors(){return m(u)},children:(O,C)=>{var M=R(),Q=x(M),Z=()=>{const b=r(),h=new DataTransfer;return b&&h.items.add(b),h.files},$=c.run;I(Q,()=>m(o),(b,h)=>{h(b,{type:"widget",get value(){return Z()},set value(ee){$(ee)},get processing(){return c.isProcessed},loading:!1,get uiOption(){return e.uiOption},get handlers(){return s},get errors(){return m(u)},get config(){return e.config},multiple:!1})}),g(O,M)},$$slots:{default:!0}})}),g(t,l),S()}var Ke=w("<textarea></textarea>");function ze(t,e){E(e,!0);let r=A(e,"value",15);const n=F(),a=y(()=>xe(n,e.config,"textarea",e.handlers,{style:"flex-grow: 1;"}));var i=Ke();be(i),k(i,()=>({...m(a)})),Re(i,r),g(t,i),S()}V.textareaWidget=ze;var Xe=w("<input/>");function qe(t,e){E(e,!0);let r=A(e,"value",15);const n=F(),a=y(()=>W(n,e.config,"file",e.handlers,{multiple:e.multiple,style:"flex-grow: 1","data-loading":e.loading,"data-processing":e.processing}));var i=Xe();k(i,()=>({type:"file",...m(a)}),void 0,void 0,void 0,!0),Te(i,r),g(t,i),S()}V.fileWidget=qe;var Je=w("<label><input/> </label>");function Qe(t,e){E(e,!0);const r=[];let n=A(e,"value",15);const a=F(),i=y(()=>W(a,e.config,"checkboxes",e.handlers,{type:"checkbox"})),o=ke({mapper:()=>Ve(e.options),value:()=>n(),update:c=>n(c)});var s=R(),u=x(s);ve(u,19,()=>e.options,c=>c.id,(c,l,p)=>{var f=Je(),d=he(f);k(d,()=>({value:m(p),...m(i),id:m(l).id,disabled:m(l).disabled||m(i).disabled}),void 0,void 0,void 0,!0);var O=_e(d);Ae(f),Fe(()=>Ee(O,` ${m(l).label??""}`)),we(r,[],d,()=>(m(p),o.value),C=>o.value=C),g(c,f)}),g(t,s),S()}V.checkboxesWidget=Qe;export{ut as N,De as a,ot as b,it as c,at as d,st as e,G as f,j as g,z as h,Ce as i,Me as p,X as v};
