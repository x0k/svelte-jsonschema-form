import{$ as A,p as B,g as D,m as E,c as p,v as I,a0 as R,a1 as C,a as v,d as U,a2 as W}from"./definitions.DlirAx7C.js";import"./_commonjsHelpers.jSTVcZ1w.js";import{p as j,j as F,a as h,b as w,c as k,g as c,u as d}from"./render.BHiezTN2.js";import{d as H,f as M}from"./file.Dhna7EH6.js";async function y(s,e,a,t){const{name:o,blob:r}=await s[A](e,t);a.items.add(new File([r],o,{type:r.type}))}function N(s,e,a,t){const o=[];for(const r of t)o.push(y(s,e,a,r));return Promise.all(o)}function V(s,e){j(e,!0);let a=B(e,"value",15);const t=D(),o=d(()=>v(t,"fieldTemplate",e.config)),r="fileWidget",O=d(()=>v(t,r,e.config)),T=E(t,()=>e.config,()=>I(t,e.config,a())),u=H({initialOutput:void 0,getInput:()=>a(),setInput:i=>a(i),async toOutput(i,n){const l=new DataTransfer;return n&&await y(t,i,l,n),l.files},async toInput(i,n){if(!(n===void 0||n.length===0)){if(!await R(i,t,e.config,n))throw new C;return M(i,n[0])}}}),g=d(()=>U(t,e.config.path));var f=F(),_=h(f);p(_,()=>c(o),(i,n)=>{n(i,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:r,get value(){return a()},get config(){return e.config},get errors(){return c(g)},children:(l,q)=>{var m=F(),L=h(m);p(L,()=>c(O),(b,P)=>{P(b,{type:"widget",get processing(){return u.inputProcessing},get loading(){return u.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return T},get errors(){return c(g)},get config(){return e.config},multiple:!1,get value(){return u.current},set value(x){u.current=x}})}),w(l,m)},$$slots:{default:!0}})}),w(s,f),k()}W.fileField=V;export{N as a};
