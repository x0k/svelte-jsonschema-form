import{a9 as S,ag as te,ah as re,ai as ne,aj as I,ak as ae,al as ie,am as oe,an as U,R as se,ao as ue,ap as ce,p as O,g as k,m as le,c as j,v as fe,a0 as de,a1 as pe,a as N,d as me,f as ge,r as ye,a2 as be,aq as ve,ar as _e,aa as he,ab as W,ac as B,U as Ae,as as Fe}from"./definitions.DlirAx7C.js";import{e as Se}from"./_commonjsHelpers.jSTVcZ1w.js";import{p as E,j as V,a as C,b as F,c as w,g as y,u as A,f as P,aH as Oe,e as Ee,s as we,r as Re,t as xe,h as Te}from"./render.BHiezTN2.js";import{c as ke,g as Ve,b as L}from"./file.Dhna7EH6.js";import{j as Ce,w as Me,g as D,x as Pe,i as H,e as Le,m as De,f as Ie}from"./en.DYIUX5Qt.js";import{a as Y}from"./ajv.BzvNAUtq.js";function T(e,t,r={type:"root",path:[]}){if(!S(e))return t(e,r);const n={...e};for(const i of te){const u=e[i];if(u===void 0||!Array.isArray(u))continue;const o={type:"array",parent:e,key:i,index:0,path:r.path.concat(i,0)};n[i]=u.map((l,c)=>(o.index=c,o.path[o.path.length-1]=c,T(l,t,o)))}const a=new Map;for(const i of re){const u=e[i];if(u===void 0)continue;const o={type:"record",parent:e,key:i,property:"",path:r.path.concat(i,"")},l=Object.keys(u),c=l.length;for(let p=0;p<c;p++){const d=l[p],f=u[d];if(Array.isArray(f)){a.set(d,f);continue}o.property=d,o.path[o.path.length-1]=d,a.set(d,T(f,t,o))}n[i]=Object.fromEntries(a),a.clear()}const s={type:"sub",parent:e,key:"items",path:r.path.concat("")};for(const i of ne){const u=e[i];u===void 0||Array.isArray(u)||(s.key=i,s.path[s.path.length-1]=i,n[i]=T(u,t,s))}return t(n,r)}function Ue(e,t){return T(e,r=>{if(!S(r))return r;const n=r[I];return n!==void 0&&n.startsWith("#")&&(r[I]=`${t}${n}`),r})}function G(e){return e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function pt(e){if(e==="#")return[];const t=G(e);let r=!1;return t.map(n=>{if(r){const a=Number(n);if(Number.isInteger(a)&&a>=0)return r=!1,a}return r=ae.has(n),n})}function je(e,t){const r=[];if(e==="")return r;const n=G(e);let a=t;for(const s of n)if(Array.isArray(a)&&/^\d+$/.test(s)){const i=Number(s);r.push(i),a=a[i]}else r.push(s),a=a?.[s];return r}function mt(e,t,r,n,a,s){function i(o,l,c,p){const d=o.map(g=>typeof g=="boolean"?g?{}:{not:{}}:g),f=ue(e,t,r,p,d,-1,ce(l)),b=u(d[f],c,p);if(b!==void 0)return b;let m;for(const g of d){if(!S(g))continue;const v=u(g,c,p);if(v!==void 0){if(S(v))return v;m=v}}return m}function u(o,l,c){for(let p=0;p<l.length;p++){if(o===void 0||!S(o))return;if(o.$ref)return u(ie(o.$ref,r),l.slice(p),c);if(o.allOf){const m=t.mergeAllOf(o);if(!m.allOf)return u(m,l.slice(p),c)}const d=o.anyOf??o.oneOf??o.allOf;if(d){const m=i(d,o,l.slice(p),c);if(m!==void 0)return m}const f=l[p],b=typeof f;if(b==="number"){const{items:m,additionalItems:g}=o;o=(Array.isArray(m)?m[f]:m)??g,c=oe(c)?c[f]:void 0;continue}if(b==="string"){const{properties:m,patternProperties:g,additionalProperties:v,dependencies:R,then:x,else:_}=o;o=(m&&m[f])??(g&&Object.entries(g).find(([h])=>new RegExp(h).test(f))?.[1])??v??(R&&i(Object.values(R).filter(U),o,l.slice(p),c))??((x||_)&&i([x,_].filter(U),o,l.slice(p),c)),c=se(c)?c[f]:void 0;continue}return}return o}return u(n,a,s)}function Ne(e){if(e!==void 0&&!(e instanceof File))throw new Error(`expected "File" or "undefined", but got (${typeof e}: ${JSON.stringify(e)})`)}function We(e,t){E(t,!0);let r=O(t,"value",15);const n=k(),a=A(()=>N(n,"fieldTemplate",t.config)),s="fileWidget",i=A(()=>N(n,s,t.config)),u=le(n,()=>t.config,()=>fe(n,t.config,r())),o=A(()=>me(n,t.config.path)),l=ke({combinator:Ve,async execute(d,f){if(!(f===void 0||f.length===0)){if(!await de(d,n,t.config,f))throw new pe;return f[0]}},onSuccess(d){r(d)}});var c=V(),p=C(c);j(p,()=>y(a),(d,f)=>{f(d,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return t.uiOption},widgetType:s,get value(){return r()},get config(){return t.config},get errors(){return y(o)},children:(b,m)=>{var g=V(),v=C(g),R=()=>{const _=r(),h=new DataTransfer;return _&&h.items.add(_),h.files},x=l.run;j(v,()=>y(i),(_,h)=>{h(_,{type:"widget",get value(){return R()},set value(ee){x(ee)},get processing(){return l.isProcessed},loading:!1,get uiOption(){return t.uiOption},get handlers(){return u},get errors(){return y(o)},get config(){return t.config},multiple:!1})}),F(b,g)},$$slots:{default:!0}})}),F(e,c),w()}function Be(e,t){E(t,!0);let r=O(t,"value",15),n=ye(t,["$$slots","$$events","$$legacy","value"]);var a=()=>(Ne(r()),r()),s=i=>{r(i)};We(e,ge({get value(){return a()},set value(i){s(i)}},()=>n)),w()}be.unknownNativeFileField=Be;var He=P("<textarea></textarea>");function Ye(e,t){E(t,!0);let r=O(t,"value",15);const n=k(),a=A(()=>Me(n,t.config,"textarea",t.handlers,{style:"flex-grow: 1;"}));var s=He();Oe(s),L(s,()=>({...y(a)})),Ce(s,r),F(e,s),w()}D.textareaWidget=Ye;var Ge=P("<input/>");function Ke(e,t){E(t,!0);let r=O(t,"value",15);const n=k(),a=A(()=>H(n,t.config,"file",t.handlers,{multiple:t.multiple,style:"flex-grow: 1","data-loading":t.loading,"data-processing":t.processing}));var s=Ge();L(s,()=>({type:"file",...y(a)}),void 0,void 0,void 0,!0),Pe(s,r),F(e,s),w()}D.fileWidget=Ke;var qe=P("<label><input/> </label>");function ze(e,t){E(t,!0);const r=[];let n=O(t,"value",15);const a=k(),s=A(()=>H(a,t.config,"checkboxes",t.handlers,{type:"checkbox"})),i=De({mapper:()=>Ie(t.options),value:()=>n(),update:l=>n(l)});var u=V(),o=C(u);Se(o,19,()=>t.options,l=>l.id,(l,c,p)=>{var d=qe(),f=Ee(d);L(f,()=>({value:y(p),...y(s),id:y(c).id,disabled:y(c).disabled||y(s).disabled}),void 0,void 0,void 0,!0);var b=we(f);Re(d),xe(()=>Te(b,` ${y(c).label??""}`)),Le(r,[],f,()=>(y(p),i.value),m=>i.value=m),F(l,d)}),F(e,u),w()}D.checkboxesWidget=ze;const Xe={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},Je=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Qe=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function Ze(e){return e.addFormat("color",Je),e.addFormat(_e,Qe),e}function $e(e){return e.addKeyword(ve),e}function et(e){return $e(Ze(e))}function M(e,t){let r="",n=!1;const a=new WeakMap,s=B(a,i=>{let u=i;return n&&(u=Ue(i,r),delete u[W]),e.compile(u)});return(i,u)=>{r=u[W]??he;let o=e.getSchema(r)?.schema;return o!==void 0&&o!==u&&(e.removeSchema(r),a.delete(i),o=void 0),o===void 0&&e.addSchema(u,r),n=i!==u,s(i)}}function K(e,t){const n=B(new WeakMap,a=>e.compile({...a,$async:t}));return a=>n(a.schema)}function tt({params:{missingProperty:e,propertyName:t},propertyName:r=t},n){let a=n;return a=e!==void 0?n.concat(e):a,a=r!==void 0?n.concat(r,Ae("key-input")):a,a}function q({params:{missingProperty:e},parentSchema:t,message:r},n){if(!r)return"";if(e===void 0)return r;const a=n(e,t);return a===void 0?r:r.replace(e,a)}function z({uiSchema:e={}}){return(t,r)=>t.map(n=>{const a=je(n.instancePath,r);return{path:tt(n,a),message:q(n,(s,i)=>{const u=Fe(e,a.concat(s));if(u!==void 0)return u;const o=i?.properties?.[s];if(typeof o=="object")return o.title})}})}function X(e){return e.instancePath===""}function rt(e){return X(e)&&e.keyword!=="type"}function J(e){return t=>t.filter(e.required?X:rt).map(r=>q(r,()=>e.title))}function Q(e,t,r){e(t);const n=e.errors;return e.errors=null,n?r(n,t):[]}async function Z(e,t,r){try{await e(t)}catch(n){if(!(n instanceof Y.Ajv.ValidationError))throw n;return r(n.errors,t)}finally{e.errors=null}return[]}function $({compileSchema:e}){return{isValid(t,r,n){if(typeof t=="boolean")return t;const a=e(t,r);try{return a(n)}catch(s){return console.warn("Failed to validate",s),!1}}}}function nt(e){const t=z(e);return{validateFormValue(r,n){return Q(e.compileSchema(r,r),n,t)}}}function at({compileFieldSchema:e}){return{validateFieldValue(t,r){return Q(e(t),r,J(t))}}}function it(e){const t=z(e);return{async validateFormValueAsync(r,n,a){return Z(e.compileAsyncSchema(n,n),a,t)}}}function ot({compileAsyncFieldSchema:e}){return{async validateFieldValueAsync(t,r,n){return Z(e(r),n,J(r))}}}function gt({ajvOptions:e=Xe,ajvPlugins:t=et,ajv:r=t(new Y.Ajv(e)),compileSchema:n=M(r),compileFieldSchema:a=K(r,!1),...s}={}){const i={...s,compileSchema:n,compileFieldSchema:a};return Object.assign($(i),nt(i),at(i))}function yt({ajv:e,compileSchema:t=M(e),compileAsyncSchema:r=M(e),compileAsyncFieldSchema:n=K(e,!0),...a}){const s={...a,compileSchema:t,compileAsyncSchema:r,compileAsyncFieldSchema:n};return Object.assign($(s),it(s),ot(s))}export{et as a,yt as b,gt as c,pt as d,z as e,J as f,mt as g,Ue as h,je as p,Q as v};
