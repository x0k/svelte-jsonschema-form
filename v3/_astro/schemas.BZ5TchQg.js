import{p as E,k as P,Y as q,_ as C,$ as B,l as h,Z as H,t as A,a0 as M,a1 as U,s as W,r as z,a2 as F,aa as R,O as V,c as G}from"./definitions.CQdNrImE.js";import"./each.B6EQyiei.js";import{p as T,m as p,d as y,b as v,a as I,g as c,u as g,_ as X}from"./render.p9uU9aNd.js";import{a as Y}from"./ajv.XFQD3mfp.js";import{s as Z}from"./snippet.CRTjy3CY.js";import{e as J,f as K}from"./file.DTwbteRD.js";import{a as Q}from"./file-include.BLVi8o58.js";const $="filesField";function L(r,e){T(e,!0);const l=n=>{var t=p(),i=y(t);Z(i,()=>c(_)??X,()=>a,()=>e.config,()=>({get current(){return s()},set current(f){s(f)}}),()=>c(m)),v(n,t)};let s=E(e,"value",15);const a=P(),o=g(()=>A(a,"fieldTemplate",e.config)),u="fileWidget",N=g(()=>A(a,u,e.config)),j=q(a,()=>e.config,()=>H(a,e.config,s())),d=J({initialOutput:void 0,getInput:()=>s(),setInput:n=>s(n),isEqual:(n,t)=>n===void 0&&t===void 0||Array.isArray(n)&&Array.isArray(t)&&n.length===t.length&&n.every((i,f)=>i===t[f]),async toOutput(n,t){const i=new DataTransfer;return t&&await Q(a,n,i,t),i.files},async toInput(n,t){if(t!==void 0){if(!await C(n,a,e.config,t))throw new B;return Promise.all(Array.from(t).map(i=>K(n,i)))}}}),m=g(()=>M(a,e.config.path)),_=g(()=>U(a,e.config,$));var O=p(),w=y(O);{let n=g(()=>c(_)&&l);h(w,()=>c(o),(t,i)=>{i(t,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:u,get value(){return s()},get config(){return e.config},get errors(){return c(m)},get action(){return c(n)},children:(f,oe)=>{var b=p(),S=y(b);h(S,()=>c(N),(k,x)=>{x(k,{type:"widget",get processing(){return d.inputProcessing},get loading(){return d.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return j},get errors(){return c(m)},get config(){return e.config},multiple:!0,get value(){return d.current},set value(D){d.current=D}})}),v(f,b)},$$slots:{default:!0}})})}v(r,O),I()}function ee(r,e){T(e,!0);let l=E(e,"value",15),s=z(e,["$$slots","$$events","$$legacy","value"]);var a=()=>(Y(l()),l()),o=u=>{l(u)};L(r,W(()=>s,{get value(){return a()},set value(u){o(u)}})),I()}F.arrayFilesField=ee;F.filesField=L;const te=r=>({type:"object",properties:{default:r,error:r}}),pe={type:"boolean"},re={type:"string",enum:["foo","bar","fuzz","qux"]},ye={type:"array",items:re,uniqueItems:!0},ne={type:"string",format:"data-url"},ve={type:"array",items:ne},_e={type:"number"},Oe={type:"string"},ae=r=>({default:r,error:r}),se=r=>r.map(e=>({path:[e,"error"],message:`${e} error`})),ie={[G]:"oninput",[V]:"onchange",[R]:"onblur"};Object.keys(ie).map(Number);const be="switch";function he(r){const e=Object.keys(r),l={type:"object",properties:Object.fromEntries(e.map(o=>[o,te(r[o][0])]))},s=Object.fromEntries(e.flatMap(o=>{const u=r[o][1];return Object.keys(u).length>0?[[o,ae(u)]]:[]})),a=se(e);return{schema:l,uiSchema:s,initialErrors:a}}export{be as S,ne as a,pe as b,he as c,re as e,ve as f,_e as n,Oe as t,ye as u};
