import{a1 as E,p as I,k as R,W,l as y,X as k,a2 as C,a3 as U,t as O,Z as H,$ as M,a0 as V}from"./definitions.iJbBEcx_.js";import"./each.BEO3Vq6I.js";import{p as X,m,e as p,b as v,a as Z,g as a,u as l,w as j}from"./render.BbHDAxyr.js";import{s as q}from"./snippet.CdzS3xvw.js";import{e as z,f as G}from"./file.wfO_7GZ5.js";async function T(u,e,c,i){const{name:t,blob:o}=await u[E](e,i);c.items.add(new File([o],t,{type:o.type}))}function te(u,e,c,i){const t=[];for(const o of i)t.push(T(u,e,c,o));return Promise.all(t)}const J="fileField";function K(u,e){X(e,!0);const c=r=>{var n=m(),s=p(n);q(s,()=>a(w)??j,()=>t,()=>e.config,()=>({get current(){return i()},set current(f){i(f)}}),()=>a(d)),v(r,n)};let i=I(e,"value",15);const t=R(),o=l(()=>O(t,"fieldTemplate",e.config)),F="fileWidget",L=l(()=>O(t,F,e.config)),A=W(t,()=>e.config,()=>k(t,e.config,i())),g=z({initialOutput:void 0,getInput:()=>i(),setInput:r=>i(r),async toOutput(r,n){const s=new DataTransfer;return n&&await T(t,r,s,n),s.files},async toInput(r,n){if(!(n===void 0||n.length===0)){if(!await C(r,t,e.config,n))throw new U;return G(r,n[0])}}}),d=l(()=>H(t,e.config.path)),w=l(()=>M(t,e.config,J));var h=m(),b=p(h);{let r=l(()=>a(w)&&c);y(b,()=>a(o),(n,s)=>{s(n,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:F,get value(){return i()},get config(){return e.config},get errors(){return a(d)},get action(){return a(r)},children:(f,N)=>{var _=m(),P=p(_);y(P,()=>a(L),(x,B)=>{B(x,{type:"widget",get processing(){return g.inputProcessing},get loading(){return g.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return A},get errors(){return a(d)},get config(){return e.config},multiple:!1,get value(){return g.current},set value(D){g.current=D}})}),v(f,_)},$$slots:{default:!0}})})}v(u,h),Z()}V.fileField=K;export{te as a};
