import"./_commonjsHelpers.nzPBiERf.js";import{p as O,f as j,e as _,t as V,b as x,a as $,s as q,h as A,c as z,r as E}from"./render.DGF5rvx7.js";import"./definitions.tZoYbX81.js";import{c as S}from"./en.B2cNZMQ7.js";import{B as I}from"./basic-form.BobfPTBf.js";import{D as T,r as M}from"./compat.F9TUEWX1.js";import{v as w,d as U,e as B}from"./validator.CLjnkwtC.js";import{d as G}from"./defaults.AHhhXAqH.js";import"./snippet.Dk1U9Ewh.js";import"./file.BpxfmLB7.js";import"./form.CH5c5Qcb.js";import"./content.DAFVNmCq.js";import"./submit-button.CkDOqO9R.js";import"./ajv.CoAlnjeA.js";import"./checkboxes-include.20HZgU-l.js";import"./file-include.CN7NffNL.js";function b({validateFunctions:e,augmentSuffix:t=T},{$id:n,allOf:a}){if(n===void 0){const s=a?.[0];if(typeof s=="object"&&s.$id!==void 0)n=s.$id+t;else throw new Error("Schema id not found")}const i=e[n];if(i===void 0)throw new Error(`Validate function with id "${n}" not found`);return i}function J(e){return{isValid(t,n,a){if(typeof t=="boolean")return t;const i=b(e,t);try{return i(a)}catch(s){return console.warn("Failed to validate",s),!1}}}}function L(e){const t=U(e);return{validateFormValue(n,a){return w(b(e,n),a,t)}}}function R(e){return{validateFieldValue(t,n){return w(b(e,t.schema),n,B(t))}}}function X(e){return t=>{const n={...e,...t};return Object.assign(J(n),L(n),R(n))}}const C=11,H={title:"User",type:"object",required:["id","email","age","roles"],properties:{id:{type:"integer",minimum:1,$id:"v1"},email:{type:"string",format:"email",$id:"v2"},age:{type:"integer",minimum:21,maximum:100,$id:"v3"},roles:{type:"array",items:{type:"string",enum:["admin","editor","viewer"],$id:"v5"},uniqueItems:!0,minItems:1,$id:"v4"}},additionalProperties:!1,$id:"v0"};var k=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),K=k((e,t)=>{t.exports=function n(a,i){if(a===i)return!0;if(a&&i&&typeof a=="object"&&typeof i=="object"){if(a.constructor!==i.constructor)return!1;var s,r,m;if(Array.isArray(a)){if(s=a.length,s!=i.length)return!1;for(r=s;r--!==0;)if(!n(a[r],i[r]))return!1;return!0}if(a.constructor===RegExp)return a.source===i.source&&a.flags===i.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===i.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===i.toString();if(m=Object.keys(a),s=m.length,s!==Object.keys(i).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(i,m[r]))return!1;for(r=s;r--!==0;){var p=m[r];if(!n(a[p],i[p]))return!1}return!0}return a!==a&&i!==i}}),Q=k(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=K();t.code='require("ajv/dist/runtime/equal").default',e.default=t}),W=v;function v(e,{instancePath:t="",parentData:n,parentDataProperty:a,rootData:i=e}={}){let s=null,r=0;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?r===0&&typeof e=="number"&&isFinite(e)&&(e<1||isNaN(e))?(v.errors=[{instancePath:t,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1):(v.errors=s,r===0):(v.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var Y=g,N=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i;function g(e,{instancePath:t="",parentData:n,parentDataProperty:a,rootData:i=e}={}){let s=null,r=0;if(typeof e=="string"){if(!N.test(e))return g.errors=[{instancePath:t,schemaPath:"#/format",keyword:"format",params:{format:"email"},message:'must match format "email"'}],!1}else return g.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;return g.errors=s,r===0}var Z=y;function y(e,{instancePath:t="",parentData:n,parentDataProperty:a,rootData:i=e}={}){let s=null,r=0;if(!(typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)))return y.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(typeof e=="number"&&isFinite(e)){if(e>100||isNaN(e))return y.errors=[{instancePath:t,schemaPath:"#/maximum",keyword:"maximum",params:{comparison:"<=",limit:100},message:"must be <= 100"}],!1;if(e<21||isNaN(e))return y.errors=[{instancePath:t,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:21},message:"must be >= 21"}],!1}return y.errors=s,r===0}var ee=P,F={enum:["admin","editor","viewer"]};function P(e,{instancePath:t="",parentData:n,parentDataProperty:a,rootData:i=e}={}){let s=null,r=0;return typeof e!="string"?(P.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1):e==="admin"||e==="editor"||e==="viewer"?(P.errors=s,r===0):(P.errors=[{instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:F.enum},message:"must be equal to one of the allowed values"}],!1)}var te=c,re=Q().default;function c(e,{instancePath:t="",parentData:n,parentDataProperty:a,rootData:i=e}={}){let s=null,r=0;if(Array.isArray(e)){if(e.length<1)return c.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var m=!0;let p=e.length;for(let u=0;u<p;u++){let o=e[u],d=r;if(typeof o!="string")return c.errors=[{instancePath:t+"/"+u,schemaPath:"v5#/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(o==="admin"||o==="editor"||o==="viewer"))return c.errors=[{instancePath:t+"/"+u,schemaPath:"v5#/enum",keyword:"enum",params:{allowedValues:F.enum},message:"must be equal to one of the allowed values"}],!1;var m=d===r;if(!m)break}if(m){let u=e.length,o;if(u>1){for(;u--;)for(o=u;o--;)if(re(e[u],e[o]))return c.errors=[{instancePath:t,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:o},message:"must NOT have duplicate items (items ## "+o+" and "+u+" are identical)"}],!1}}}}else return c.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return c.errors=s,r===0}var ae=f;function f(e,{instancePath:t="",parentData:n,parentDataProperty:a,rootData:i=e}={}){let s=null,r=0;if(r===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let p;if(e.id===void 0&&(p="id")||e.email===void 0&&(p="email")||e.age===void 0&&(p="age")||e.roles===void 0&&(p="roles"))return f.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{let u=r;for(let o in e)if(!(o==="id"||o==="email"||o==="age"||o==="roles"))return f.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:o},message:"must NOT have additional properties"}],!1;if(u===r){if(e.id!==void 0){let o=e.id,d=r,l=r;if(!(typeof o=="number"&&!(o%1)&&!isNaN(o)&&isFinite(o)))return f.errors=[{instancePath:t+"/id",schemaPath:"v1#/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(r===l&&typeof o=="number"&&isFinite(o)&&(o<1||isNaN(o)))return f.errors=[{instancePath:t+"/id",schemaPath:"v1#/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1;var m=d===r}else var m=!0;if(m){if(e.email!==void 0){let d=e.email,l=r,h=r;if(r===h&&r===h)if(typeof d=="string"){if(!N.test(d))return f.errors=[{instancePath:t+"/email",schemaPath:"v2#/format",keyword:"format",params:{format:"email"},message:'must match format "email"'}],!1}else return f.errors=[{instancePath:t+"/email",schemaPath:"v2#/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=l===r}else var m=!0;if(m){if(e.age!==void 0){let l=e.age,h=r,D=r;if(!(typeof l=="number"&&!(l%1)&&!isNaN(l)&&isFinite(l)))return f.errors=[{instancePath:t+"/age",schemaPath:"v3#/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(r===D&&typeof l=="number"&&isFinite(l)){if(l>100||isNaN(l))return f.errors=[{instancePath:t+"/age",schemaPath:"v3#/maximum",keyword:"maximum",params:{comparison:"<=",limit:100},message:"must be <= 100"}],!1;if(l<21||isNaN(l))return f.errors=[{instancePath:t+"/age",schemaPath:"v3#/minimum",keyword:"minimum",params:{comparison:">=",limit:21},message:"must be >= 21"}],!1}var m=h===r}else var m=!0;if(m)if(e.roles!==void 0){let l=r;c(e.roles,{instancePath:t+"/roles",parentData:e,parentDataProperty:"roles",rootData:i})||(s=s===null?c.errors:s.concat(c.errors),r=s.length);var m=l===r}else var m=!0}}}}}else return f.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return f.errors=s,r===0}const se=Object.freeze(Object.defineProperty({__proto__:null,v0:ae,v1:W,v2:Y,v3:Z,v4:te,v5:ee},Symbol.toStringTag,{value:"Module"}));var ie=j("<!> <pre> </pre>",1);function ke(e,t){O(t,!0);const n=S({...G,schema:H,createValidator:X({validateFunctions:se}),fieldsValidationMode:C,resolver:M});var a=ie(),i=_(a);I(i,{get form(){return n},novalidate:!0});var s=q(i,2),r=z(s,!0);E(s),V(m=>A(r,m),[()=>JSON.stringify(n.value,null,2)]),x(e,a),$()}export{ke as default};
