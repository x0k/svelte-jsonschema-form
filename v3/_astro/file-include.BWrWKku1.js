import{g as Sn}from"./_commonjsHelpers.DWjMLJnj.js";import{aG as Rn,b0 as xt,ad as er,b1 as Nn,b2 as On,p as Ut,d as zt,m as Lt,e as Ne,j as Kt,k as Oe,n as Ht,a5 as Gt,b3 as kn,a3 as jn,a4 as Tn}from"./definitions.15afNNW8.js";import{p as Jt,m as ke,e as je,b as Te,a as Wt,g as oe,u as de}from"./render.BD-ZvB3X.js";import{e as In,f as qn}from"./file.Dl-5ck6g.js";async function yn(e,r,v,u){const{name:_,blob:o}=await e[Rn](r,u);v.items.add(new File([o],_,{type:o.type}))}function Qs(e,r,v,u){const _=[];for(const o of u)_.push(yn(e,r,v,o));return Promise.all(_)}var Me={exports:{}},kt={},pe={},we={},jt={},Tt={},It={},tr;function $t(){return tr||(tr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class r{}e._CodeOrName=r,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class v extends r{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=v;class u extends r{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((n,l)=>`${n}${l}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((n,l)=>(l instanceof v&&(n[l.str]=(n[l.str]||0)+1),n),{})}}e._Code=u,e.nil=new u("");function _(s,...t){const n=[s[0]];let l=0;for(;l<t.length;)c(n,t[l]),n.push(s[++l]);return new u(n)}e._=_;const o=new u("+");function h(s,...t){const n=[P(s[0])];let l=0;for(;l<t.length;)n.push(o),c(n,t[l]),n.push(o,P(s[++l]));return d(n),new u(n)}e.str=h;function c(s,t){t instanceof u?s.push(...t._items):t instanceof v?s.push(t):s.push(E(t))}e.addCodeArg=c;function d(s){let t=1;for(;t<s.length-1;){if(s[t]===o){const n=g(s[t-1],s[t+1]);if(n!==void 0){s.splice(t-1,3,n);continue}s[t++]="+"}t++}}function g(s,t){if(t==='""')return s;if(s==='""')return t;if(typeof s=="string")return t instanceof v||s[s.length-1]!=='"'?void 0:typeof t!="string"?`${s.slice(0,-1)}${t}"`:t[0]==='"'?s.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(s instanceof v))return`"${s}${t.slice(1)}`}function m(s,t){return t.emptyStr()?s:s.emptyStr()?t:h`${s}${t}`}e.strConcat=m;function E(s){return typeof s=="number"||typeof s=="boolean"||s===null?s:P(Array.isArray(s)?s.join(","):s)}function S(s){return new u(P(s))}e.stringify=S;function P(s){return JSON.stringify(s).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=P;function b(s){return typeof s=="string"&&e.IDENTIFIER.test(s)?new u(`.${s}`):_`[${s}]`}e.getProperty=b;function y(s){if(typeof s=="string"&&e.IDENTIFIER.test(s))return new u(`${s}`);throw new Error(`CodeGen: invalid export name: ${s}, use explicit $id name mapping`)}e.getEsmExportName=y;function a(s){return new u(s.toString())}e.regexpCode=a})(It)),It}var qt={},rr;function nr(){return rr||(rr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const r=$t();class v extends Error{constructor(g){super(`CodeGen: "code" for ${g} not defined`),this.value=g.value}}var u;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(u||(e.UsedValueState=u={})),e.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class _{constructor({prefixes:g,parent:m}={}){this._names={},this._prefixes=g,this._parent=m}toName(g){return g instanceof r.Name?g:this.name(g)}name(g){return new r.Name(this._newName(g))}_newName(g){const m=this._names[g]||this._nameGroup(g);return`${g}${m.index++}`}_nameGroup(g){var m,E;if(!((E=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||E===void 0)&&E.has(g)||this._prefixes&&!this._prefixes.has(g))throw new Error(`CodeGen: prefix "${g}" is not allowed in this scope`);return this._names[g]={prefix:g,index:0}}}e.Scope=_;class o extends r.Name{constructor(g,m){super(m),this.prefix=g}setValue(g,{property:m,itemIndex:E}){this.value=g,this.scopePath=(0,r._)`.${new r.Name(m)}[${E}]`}}e.ValueScopeName=o;const h=(0,r._)`\n`;class c extends _{constructor(g){super(g),this._values={},this._scope=g.scope,this.opts={...g,_n:g.lines?h:r.nil}}get(){return this._scope}name(g){return new o(g,this._newName(g))}value(g,m){var E;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const S=this.toName(g),{prefix:P}=S,b=(E=m.key)!==null&&E!==void 0?E:m.ref;let y=this._values[P];if(y){const t=y.get(b);if(t)return t}else y=this._values[P]=new Map;y.set(b,S);const a=this._scope[P]||(this._scope[P]=[]),s=a.length;return a[s]=m.ref,S.setValue(m,{property:P,itemIndex:s}),S}getValue(g,m){const E=this._values[g];if(E)return E.get(m)}scopeRefs(g,m=this._values){return this._reduceValues(m,E=>{if(E.scopePath===void 0)throw new Error(`CodeGen: name "${E}" has no value`);return(0,r._)`${g}${E.scopePath}`})}scopeCode(g=this._values,m,E){return this._reduceValues(g,S=>{if(S.value===void 0)throw new Error(`CodeGen: name "${S}" has no value`);return S.value.code},m,E)}_reduceValues(g,m,E={},S){let P=r.nil;for(const b in g){const y=g[b];if(!y)continue;const a=E[b]=E[b]||new Map;y.forEach(s=>{if(a.has(s))return;a.set(s,u.Started);let t=m(s);if(t){const n=this.opts.es5?e.varKinds.var:e.varKinds.const;P=(0,r._)`${P}${n} ${s} = ${t};${this.opts._n}`}else if(t=S?.(s))P=(0,r._)`${P}${t}${this.opts._n}`;else throw new v(s);a.set(s,u.Completed)})}return P}}e.ValueScope=c})(qt)),qt}var sr;function J(){return sr||(sr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const r=$t(),v=nr();var u=$t();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return u.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return u.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return u.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}});var _=nr();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return _.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return _.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return _.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return _.varKinds}}),e.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class o{optimizeNodes(){return this}optimizeNames(i,w){return this}}class h extends o{constructor(i,w,T){super(),this.varKind=i,this.name=w,this.rhs=T}render({es5:i,_n:w}){const T=i?v.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${T} ${this.name}${V};`+w}optimizeNames(i,w){if(i[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,i,w)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class c extends o{constructor(i,w,T){super(),this.lhs=i,this.rhs=w,this.sideEffects=T}render({_n:i}){return`${this.lhs} = ${this.rhs};`+i}optimizeNames(i,w){if(!(this.lhs instanceof r.Name&&!i[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,i,w),this}get names(){const i=this.lhs instanceof r.Name?{}:{...this.lhs.names};return L(i,this.rhs)}}class d extends c{constructor(i,w,T,V){super(i,T,V),this.op=w}render({_n:i}){return`${this.lhs} ${this.op}= ${this.rhs};`+i}}class g extends o{constructor(i){super(),this.label=i,this.names={}}render({_n:i}){return`${this.label}:`+i}}class m extends o{constructor(i){super(),this.label=i,this.names={}}render({_n:i}){return`break${this.label?` ${this.label}`:""};`+i}}class E extends o{constructor(i){super(),this.error=i}render({_n:i}){return`throw ${this.error};`+i}get names(){return this.error.names}}class S extends o{constructor(i){super(),this.code=i}render({_n:i}){return`${this.code};`+i}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(i,w){return this.code=B(this.code,i,w),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class P extends o{constructor(i=[]){super(),this.nodes=i}render(i){return this.nodes.reduce((w,T)=>w+T.render(i),"")}optimizeNodes(){const{nodes:i}=this;let w=i.length;for(;w--;){const T=i[w].optimizeNodes();Array.isArray(T)?i.splice(w,1,...T):T?i[w]=T:i.splice(w,1)}return i.length>0?this:void 0}optimizeNames(i,w){const{nodes:T}=this;let V=T.length;for(;V--;){const z=T[V];z.optimizeNames(i,w)||(x(i,z.names),T.splice(V,1))}return T.length>0?this:void 0}get names(){return this.nodes.reduce((i,w)=>K(i,w.names),{})}}class b extends P{render(i){return"{"+i._n+super.render(i)+"}"+i._n}}class y extends P{}class a extends b{}a.kind="else";class s extends b{constructor(i,w){super(w),this.condition=i}render(i){let w=`if(${this.condition})`+super.render(i);return this.else&&(w+="else "+this.else.render(i)),w}optimizeNodes(){super.optimizeNodes();const i=this.condition;if(i===!0)return this.nodes;let w=this.else;if(w){const T=w.optimizeNodes();w=this.else=Array.isArray(T)?new a(T):T}if(w)return i===!1?w instanceof s?w:w.nodes:this.nodes.length?this:new s(he(i),w instanceof s?[w]:w.nodes);if(!(i===!1||!this.nodes.length))return this}optimizeNames(i,w){var T;if(this.else=(T=this.else)===null||T===void 0?void 0:T.optimizeNames(i,w),!!(super.optimizeNames(i,w)||this.else))return this.condition=B(this.condition,i,w),this}get names(){const i=super.names;return L(i,this.condition),this.else&&K(i,this.else.names),i}}s.kind="if";class t extends b{}t.kind="for";class n extends t{constructor(i){super(),this.iteration=i}render(i){return`for(${this.iteration})`+super.render(i)}optimizeNames(i,w){if(super.optimizeNames(i,w))return this.iteration=B(this.iteration,i,w),this}get names(){return K(super.names,this.iteration.names)}}class l extends t{constructor(i,w,T,V){super(),this.varKind=i,this.name=w,this.from=T,this.to=V}render(i){const w=i.es5?v.varKinds.var:this.varKind,{name:T,from:V,to:z}=this;return`for(${w} ${T}=${V}; ${T}<${z}; ${T}++)`+super.render(i)}get names(){const i=L(super.names,this.from);return L(i,this.to)}}class p extends t{constructor(i,w,T,V){super(),this.loop=i,this.varKind=w,this.name=T,this.iterable=V}render(i){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(i)}optimizeNames(i,w){if(super.optimizeNames(i,w))return this.iterable=B(this.iterable,i,w),this}get names(){return K(super.names,this.iterable.names)}}class f extends b{constructor(i,w,T){super(),this.name=i,this.args=w,this.async=T}render(i){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(i)}}f.kind="func";class $ extends P{render(i){return"return "+super.render(i)}}$.kind="return";class j extends b{render(i){let w="try"+super.render(i);return this.catch&&(w+=this.catch.render(i)),this.finally&&(w+=this.finally.render(i)),w}optimizeNodes(){var i,w;return super.optimizeNodes(),(i=this.catch)===null||i===void 0||i.optimizeNodes(),(w=this.finally)===null||w===void 0||w.optimizeNodes(),this}optimizeNames(i,w){var T,V;return super.optimizeNames(i,w),(T=this.catch)===null||T===void 0||T.optimizeNames(i,w),(V=this.finally)===null||V===void 0||V.optimizeNames(i,w),this}get names(){const i=super.names;return this.catch&&K(i,this.catch.names),this.finally&&K(i,this.finally.names),i}}class C extends b{constructor(i){super(),this.error=i}render(i){return`catch(${this.error})`+super.render(i)}}C.kind="catch";class D extends b{render(i){return"finally"+super.render(i)}}D.kind="finally";class F{constructor(i,w={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...w,_n:w.lines?`
`:""},this._extScope=i,this._scope=new v.Scope({parent:i}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(i){return this._scope.name(i)}scopeName(i){return this._extScope.name(i)}scopeValue(i,w){const T=this._extScope.value(i,w);return(this._values[T.prefix]||(this._values[T.prefix]=new Set)).add(T),T}getScopeValue(i,w){return this._extScope.getValue(i,w)}scopeRefs(i){return this._extScope.scopeRefs(i,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(i,w,T,V){const z=this._scope.toName(w);return T!==void 0&&V&&(this._constants[z.str]=T),this._leafNode(new h(i,z,T)),z}const(i,w,T){return this._def(v.varKinds.const,i,w,T)}let(i,w,T){return this._def(v.varKinds.let,i,w,T)}var(i,w,T){return this._def(v.varKinds.var,i,w,T)}assign(i,w,T){return this._leafNode(new c(i,w,T))}add(i,w){return this._leafNode(new d(i,e.operators.ADD,w))}code(i){return typeof i=="function"?i():i!==r.nil&&this._leafNode(new S(i)),this}object(...i){const w=["{"];for(const[T,V]of i)w.length>1&&w.push(","),w.push(T),(T!==V||this.opts.es5)&&(w.push(":"),(0,r.addCodeArg)(w,V));return w.push("}"),new r._Code(w)}if(i,w,T){if(this._blockNode(new s(i)),w&&T)this.code(w).else().code(T).endIf();else if(w)this.code(w).endIf();else if(T)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(i){return this._elseNode(new s(i))}else(){return this._elseNode(new a)}endIf(){return this._endBlockNode(s,a)}_for(i,w){return this._blockNode(i),w&&this.code(w).endFor(),this}for(i,w){return this._for(new n(i),w)}forRange(i,w,T,V,z=this.opts.es5?v.varKinds.var:v.varKinds.let){const Q=this._scope.toName(i);return this._for(new l(z,Q,w,T),()=>V(Q))}forOf(i,w,T,V=v.varKinds.const){const z=this._scope.toName(i);if(this.opts.es5){const Q=w instanceof r.Name?w:this.var("_arr",w);return this.forRange("_i",0,(0,r._)`${Q}.length`,W=>{this.var(z,(0,r._)`${Q}[${W}]`),T(z)})}return this._for(new p("of",V,z,w),()=>T(z))}forIn(i,w,T,V=this.opts.es5?v.varKinds.var:v.varKinds.const){if(this.opts.ownProperties)return this.forOf(i,(0,r._)`Object.keys(${w})`,T);const z=this._scope.toName(i);return this._for(new p("in",V,z,w),()=>T(z))}endFor(){return this._endBlockNode(t)}label(i){return this._leafNode(new g(i))}break(i){return this._leafNode(new m(i))}return(i){const w=new $;if(this._blockNode(w),this.code(i),w.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($)}try(i,w,T){if(!w&&!T)throw new Error('CodeGen: "try" without "catch" and "finally"');const V=new j;if(this._blockNode(V),this.code(i),w){const z=this.name("e");this._currNode=V.catch=new C(z),w(z)}return T&&(this._currNode=V.finally=new D,this.code(T)),this._endBlockNode(C,D)}throw(i){return this._leafNode(new E(i))}block(i,w){return this._blockStarts.push(this._nodes.length),i&&this.code(i).endBlock(w),this}endBlock(i){const w=this._blockStarts.pop();if(w===void 0)throw new Error("CodeGen: not in self-balancing block");const T=this._nodes.length-w;if(T<0||i!==void 0&&T!==i)throw new Error(`CodeGen: wrong number of nodes: ${T} vs ${i} expected`);return this._nodes.length=w,this}func(i,w=r.nil,T,V){return this._blockNode(new f(i,w,T)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(f)}optimize(i=1){for(;i-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(i){return this._currNode.nodes.push(i),this}_blockNode(i){this._currNode.nodes.push(i),this._nodes.push(i)}_endBlockNode(i,w){const T=this._currNode;if(T instanceof i||w&&T instanceof w)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${w?`${i.kind}/${w.kind}`:i.kind}"`)}_elseNode(i){const w=this._currNode;if(!(w instanceof s))throw new Error('CodeGen: "else" without "if"');return this._currNode=w.else=i,this}get _root(){return this._nodes[0]}get _currNode(){const i=this._nodes;return i[i.length-1]}set _currNode(i){const w=this._nodes;w[w.length-1]=i}}e.CodeGen=F;function K(k,i){for(const w in i)k[w]=(k[w]||0)+(i[w]||0);return k}function L(k,i){return i instanceof r._CodeOrName?K(k,i.names):k}function B(k,i,w){if(k instanceof r.Name)return T(k);if(!V(k))return k;return new r._Code(k._items.reduce((z,Q)=>(Q instanceof r.Name&&(Q=T(Q)),Q instanceof r._Code?z.push(...Q._items):z.push(Q),z),[]));function T(z){const Q=w[z.str];return Q===void 0||i[z.str]!==1?z:(delete i[z.str],Q)}function V(z){return z instanceof r._Code&&z._items.some(Q=>Q instanceof r.Name&&i[Q.str]===1&&w[Q.str]!==void 0)}}function x(k,i){for(const w in i)k[w]=(k[w]||0)-(i[w]||0)}function he(k){return typeof k=="boolean"||typeof k=="number"||k===null?!k:(0,r._)`!${q(k)}`}e.not=he;const me=N(e.operators.AND);function Z(...k){return k.reduce(me)}e.and=Z;const ve=N(e.operators.OR);function A(...k){return k.reduce(ve)}e.or=A;function N(k){return(i,w)=>i===r.nil?w:w===r.nil?i:(0,r._)`${q(i)} ${k} ${q(w)}`}function q(k){return k instanceof r.Name?k:(0,r._)`(${k})`}})(Tt)),Tt}var H={},ar;function X(){if(ar)return H;ar=1,Object.defineProperty(H,"__esModule",{value:!0}),H.checkStrictMode=H.getErrorPath=H.Type=H.useFunc=H.setEvaluated=H.evaluatedPropsToName=H.mergeEvaluated=H.eachItem=H.unescapeJsonPointer=H.escapeJsonPointer=H.escapeFragment=H.unescapeFragment=H.schemaRefOrVal=H.schemaHasRulesButRef=H.schemaHasRules=H.checkUnknownRules=H.alwaysValidSchema=H.toHash=void 0;const e=J(),r=$t();function v(p){const f={};for(const $ of p)f[$]=!0;return f}H.toHash=v;function u(p,f){return typeof f=="boolean"?f:Object.keys(f).length===0?!0:(_(p,f),!o(f,p.self.RULES.all))}H.alwaysValidSchema=u;function _(p,f=p.schema){const{opts:$,self:j}=p;if(!$.strictSchema||typeof f=="boolean")return;const C=j.RULES.keywords;for(const D in f)C[D]||l(p,`unknown keyword: "${D}"`)}H.checkUnknownRules=_;function o(p,f){if(typeof p=="boolean")return!p;for(const $ in p)if(f[$])return!0;return!1}H.schemaHasRules=o;function h(p,f){if(typeof p=="boolean")return!p;for(const $ in p)if($!=="$ref"&&f.all[$])return!0;return!1}H.schemaHasRulesButRef=h;function c({topSchemaRef:p,schemaPath:f},$,j,C){if(!C){if(typeof $=="number"||typeof $=="boolean")return $;if(typeof $=="string")return(0,e._)`${$}`}return(0,e._)`${p}${f}${(0,e.getProperty)(j)}`}H.schemaRefOrVal=c;function d(p){return E(decodeURIComponent(p))}H.unescapeFragment=d;function g(p){return encodeURIComponent(m(p))}H.escapeFragment=g;function m(p){return typeof p=="number"?`${p}`:p.replace(/~/g,"~0").replace(/\//g,"~1")}H.escapeJsonPointer=m;function E(p){return p.replace(/~1/g,"/").replace(/~0/g,"~")}H.unescapeJsonPointer=E;function S(p,f){if(Array.isArray(p))for(const $ of p)f($);else f(p)}H.eachItem=S;function P({mergeNames:p,mergeToName:f,mergeValues:$,resultToName:j}){return(C,D,F,K)=>{const L=F===void 0?D:F instanceof e.Name?(D instanceof e.Name?p(C,D,F):f(C,D,F),F):D instanceof e.Name?(f(C,F,D),D):$(D,F);return K===e.Name&&!(L instanceof e.Name)?j(C,L):L}}H.mergeEvaluated={props:P({mergeNames:(p,f,$)=>p.if((0,e._)`${$} !== true && ${f} !== undefined`,()=>{p.if((0,e._)`${f} === true`,()=>p.assign($,!0),()=>p.assign($,(0,e._)`${$} || {}`).code((0,e._)`Object.assign(${$}, ${f})`))}),mergeToName:(p,f,$)=>p.if((0,e._)`${$} !== true`,()=>{f===!0?p.assign($,!0):(p.assign($,(0,e._)`${$} || {}`),y(p,$,f))}),mergeValues:(p,f)=>p===!0?!0:{...p,...f},resultToName:b}),items:P({mergeNames:(p,f,$)=>p.if((0,e._)`${$} !== true && ${f} !== undefined`,()=>p.assign($,(0,e._)`${f} === true ? true : ${$} > ${f} ? ${$} : ${f}`)),mergeToName:(p,f,$)=>p.if((0,e._)`${$} !== true`,()=>p.assign($,f===!0?!0:(0,e._)`${$} > ${f} ? ${$} : ${f}`)),mergeValues:(p,f)=>p===!0?!0:Math.max(p,f),resultToName:(p,f)=>p.var("items",f)})};function b(p,f){if(f===!0)return p.var("props",!0);const $=p.var("props",(0,e._)`{}`);return f!==void 0&&y(p,$,f),$}H.evaluatedPropsToName=b;function y(p,f,$){Object.keys($).forEach(j=>p.assign((0,e._)`${f}${(0,e.getProperty)(j)}`,!0))}H.setEvaluated=y;const a={};function s(p,f){return p.scopeValue("func",{ref:f,code:a[f.code]||(a[f.code]=new r._Code(f.code))})}H.useFunc=s;var t;(function(p){p[p.Num=0]="Num",p[p.Str=1]="Str"})(t||(H.Type=t={}));function n(p,f,$){if(p instanceof e.Name){const j=f===t.Num;return $?j?(0,e._)`"[" + ${p} + "]"`:(0,e._)`"['" + ${p} + "']"`:j?(0,e._)`"/" + ${p}`:(0,e._)`"/" + ${p}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return $?(0,e.getProperty)(p).toString():"/"+m(p)}H.getErrorPath=n;function l(p,f,$=p.opts.strictSchema){if($){if(f=`strict mode: ${f}`,$===!0)throw new Error(f);p.self.logger.warn(f)}}return H.checkStrictMode=l,H}var De={},or;function $e(){if(or)return De;or=1,Object.defineProperty(De,"__esModule",{value:!0});const e=J(),r={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return De.default=r,De}var ir;function bt(){return ir||(ir=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const r=J(),v=X(),u=$e();e.keywordError={message:({keyword:a})=>(0,r.str)`must pass "${a}" keyword validation`},e.keyword$DataError={message:({keyword:a,schemaType:s})=>s?(0,r.str)`"${a}" keyword must be ${s} ($data)`:(0,r.str)`"${a}" keyword is invalid ($data)`};function _(a,s=e.keywordError,t,n){const{it:l}=a,{gen:p,compositeRule:f,allErrors:$}=l,j=E(a,s,t);n??(f||$)?d(p,j):g(l,(0,r._)`[${j}]`)}e.reportError=_;function o(a,s=e.keywordError,t){const{it:n}=a,{gen:l,compositeRule:p,allErrors:f}=n,$=E(a,s,t);d(l,$),p||f||g(n,u.default.vErrors)}e.reportExtraError=o;function h(a,s){a.assign(u.default.errors,s),a.if((0,r._)`${u.default.vErrors} !== null`,()=>a.if(s,()=>a.assign((0,r._)`${u.default.vErrors}.length`,s),()=>a.assign(u.default.vErrors,null)))}e.resetErrorsCount=h;function c({gen:a,keyword:s,schemaValue:t,data:n,errsCount:l,it:p}){if(l===void 0)throw new Error("ajv implementation error");const f=a.name("err");a.forRange("i",l,u.default.errors,$=>{a.const(f,(0,r._)`${u.default.vErrors}[${$}]`),a.if((0,r._)`${f}.instancePath === undefined`,()=>a.assign((0,r._)`${f}.instancePath`,(0,r.strConcat)(u.default.instancePath,p.errorPath))),a.assign((0,r._)`${f}.schemaPath`,(0,r.str)`${p.errSchemaPath}/${s}`),p.opts.verbose&&(a.assign((0,r._)`${f}.schema`,t),a.assign((0,r._)`${f}.data`,n))})}e.extendErrors=c;function d(a,s){const t=a.const("err",s);a.if((0,r._)`${u.default.vErrors} === null`,()=>a.assign(u.default.vErrors,(0,r._)`[${t}]`),(0,r._)`${u.default.vErrors}.push(${t})`),a.code((0,r._)`${u.default.errors}++`)}function g(a,s){const{gen:t,validateName:n,schemaEnv:l}=a;l.$async?t.throw((0,r._)`new ${a.ValidationError}(${s})`):(t.assign((0,r._)`${n}.errors`,s),t.return(!1))}const m={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function E(a,s,t){const{createErrors:n}=a.it;return n===!1?(0,r._)`{}`:S(a,s,t)}function S(a,s,t={}){const{gen:n,it:l}=a,p=[P(l,t),b(a,t)];return y(a,s,p),n.object(...p)}function P({errorPath:a},{instancePath:s}){const t=s?(0,r.str)`${a}${(0,v.getErrorPath)(s,v.Type.Str)}`:a;return[u.default.instancePath,(0,r.strConcat)(u.default.instancePath,t)]}function b({keyword:a,it:{errSchemaPath:s}},{schemaPath:t,parentSchema:n}){let l=n?s:(0,r.str)`${s}/${a}`;return t&&(l=(0,r.str)`${l}${(0,v.getErrorPath)(t,v.Type.Str)}`),[m.schemaPath,l]}function y(a,{params:s,message:t},n){const{keyword:l,data:p,schemaValue:f,it:$}=a,{opts:j,propertyName:C,topSchemaRef:D,schemaPath:F}=$;n.push([m.keyword,l],[m.params,typeof s=="function"?s(a):s||(0,r._)`{}`]),j.messages&&n.push([m.message,typeof t=="function"?t(a):t]),j.verbose&&n.push([m.schema,f],[m.parentSchema,(0,r._)`${D}${F}`],[u.default.data,p]),C&&n.push([m.propertyName,C])}})(jt)),jt}var ur;function Cn(){if(ur)return we;ur=1,Object.defineProperty(we,"__esModule",{value:!0}),we.boolOrEmptySchema=we.topBoolOrEmptySchema=void 0;const e=bt(),r=J(),v=$e(),u={message:"boolean schema is false"};function _(c){const{gen:d,schema:g,validateName:m}=c;g===!1?h(c,!1):typeof g=="object"&&g.$async===!0?d.return(v.default.data):(d.assign((0,r._)`${m}.errors`,null),d.return(!0))}we.topBoolOrEmptySchema=_;function o(c,d){const{gen:g,schema:m}=c;m===!1?(g.var(d,!1),h(c)):g.var(d,!0)}we.boolOrEmptySchema=o;function h(c,d){const{gen:g,data:m}=c,E={gen:g,keyword:"false schema",data:m,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:c};(0,e.reportError)(E,u,void 0,d)}return we}var re={},be={},cr;function gn(){if(cr)return be;cr=1,Object.defineProperty(be,"__esModule",{value:!0}),be.getRules=be.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],r=new Set(e);function v(_){return typeof _=="string"&&r.has(_)}be.isJSONType=v;function u(){const _={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{..._,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},_.number,_.string,_.array,_.object],post:{rules:[]},all:{},keywords:{}}}return be.getRules=u,be}var ye={},lr;function vn(){if(lr)return ye;lr=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.shouldUseRule=ye.shouldUseGroup=ye.schemaHasRulesForType=void 0;function e({schema:u,self:_},o){const h=_.RULES.types[o];return h&&h!==!0&&r(u,h)}ye.schemaHasRulesForType=e;function r(u,_){return _.rules.some(o=>v(u,o))}ye.shouldUseGroup=r;function v(u,_){var o;return u[_.keyword]!==void 0||((o=_.definition.implements)===null||o===void 0?void 0:o.some(h=>u[h]!==void 0))}return ye.shouldUseRule=v,ye}var dr;function wt(){if(dr)return re;dr=1,Object.defineProperty(re,"__esModule",{value:!0}),re.reportTypeError=re.checkDataTypes=re.checkDataType=re.coerceAndCheckDataType=re.getJSONTypes=re.getSchemaTypes=re.DataType=void 0;const e=gn(),r=vn(),v=bt(),u=J(),_=X();var o;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(o||(re.DataType=o={}));function h(t){const n=c(t.type);if(n.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!n.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&n.push("null")}return n}re.getSchemaTypes=h;function c(t){const n=Array.isArray(t)?t:t?[t]:[];if(n.every(e.isJSONType))return n;throw new Error("type must be JSONType or JSONType[]: "+n.join(","))}re.getJSONTypes=c;function d(t,n){const{gen:l,data:p,opts:f}=t,$=m(n,f.coerceTypes),j=n.length>0&&!($.length===0&&n.length===1&&(0,r.schemaHasRulesForType)(t,n[0]));if(j){const C=b(n,p,f.strictNumbers,o.Wrong);l.if(C,()=>{$.length?E(t,n,$):a(t)})}return j}re.coerceAndCheckDataType=d;const g=new Set(["string","number","integer","boolean","null"]);function m(t,n){return n?t.filter(l=>g.has(l)||n==="array"&&l==="array"):[]}function E(t,n,l){const{gen:p,data:f,opts:$}=t,j=p.let("dataType",(0,u._)`typeof ${f}`),C=p.let("coerced",(0,u._)`undefined`);$.coerceTypes==="array"&&p.if((0,u._)`${j} == 'object' && Array.isArray(${f}) && ${f}.length == 1`,()=>p.assign(f,(0,u._)`${f}[0]`).assign(j,(0,u._)`typeof ${f}`).if(b(n,f,$.strictNumbers),()=>p.assign(C,f))),p.if((0,u._)`${C} !== undefined`);for(const F of l)(g.has(F)||F==="array"&&$.coerceTypes==="array")&&D(F);p.else(),a(t),p.endIf(),p.if((0,u._)`${C} !== undefined`,()=>{p.assign(f,C),S(t,C)});function D(F){switch(F){case"string":p.elseIf((0,u._)`${j} == "number" || ${j} == "boolean"`).assign(C,(0,u._)`"" + ${f}`).elseIf((0,u._)`${f} === null`).assign(C,(0,u._)`""`);return;case"number":p.elseIf((0,u._)`${j} == "boolean" || ${f} === null
              || (${j} == "string" && ${f} && ${f} == +${f})`).assign(C,(0,u._)`+${f}`);return;case"integer":p.elseIf((0,u._)`${j} === "boolean" || ${f} === null
              || (${j} === "string" && ${f} && ${f} == +${f} && !(${f} % 1))`).assign(C,(0,u._)`+${f}`);return;case"boolean":p.elseIf((0,u._)`${f} === "false" || ${f} === 0 || ${f} === null`).assign(C,!1).elseIf((0,u._)`${f} === "true" || ${f} === 1`).assign(C,!0);return;case"null":p.elseIf((0,u._)`${f} === "" || ${f} === 0 || ${f} === false`),p.assign(C,null);return;case"array":p.elseIf((0,u._)`${j} === "string" || ${j} === "number"
              || ${j} === "boolean" || ${f} === null`).assign(C,(0,u._)`[${f}]`)}}}function S({gen:t,parentData:n,parentDataProperty:l},p){t.if((0,u._)`${n} !== undefined`,()=>t.assign((0,u._)`${n}[${l}]`,p))}function P(t,n,l,p=o.Correct){const f=p===o.Correct?u.operators.EQ:u.operators.NEQ;let $;switch(t){case"null":return(0,u._)`${n} ${f} null`;case"array":$=(0,u._)`Array.isArray(${n})`;break;case"object":$=(0,u._)`${n} && typeof ${n} == "object" && !Array.isArray(${n})`;break;case"integer":$=j((0,u._)`!(${n} % 1) && !isNaN(${n})`);break;case"number":$=j();break;default:return(0,u._)`typeof ${n} ${f} ${t}`}return p===o.Correct?$:(0,u.not)($);function j(C=u.nil){return(0,u.and)((0,u._)`typeof ${n} == "number"`,C,l?(0,u._)`isFinite(${n})`:u.nil)}}re.checkDataType=P;function b(t,n,l,p){if(t.length===1)return P(t[0],n,l,p);let f;const $=(0,_.toHash)(t);if($.array&&$.object){const j=(0,u._)`typeof ${n} != "object"`;f=$.null?j:(0,u._)`!${n} || ${j}`,delete $.null,delete $.array,delete $.object}else f=u.nil;$.number&&delete $.integer;for(const j in $)f=(0,u.and)(f,P(j,n,l,p));return f}re.checkDataTypes=b;const y={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:n})=>typeof t=="string"?(0,u._)`{type: ${t}}`:(0,u._)`{type: ${n}}`};function a(t){const n=s(t);(0,v.reportError)(n,y)}re.reportTypeError=a;function s(t){const{gen:n,data:l,schema:p}=t,f=(0,_.schemaRefOrVal)(t,p,"type");return{gen:n,keyword:"type",data:l,schema:p.type,schemaCode:f,schemaValue:f,parentSchema:p,params:{},it:t}}return re}var qe={},fr;function An(){if(fr)return qe;fr=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.assignDefaults=void 0;const e=J(),r=X();function v(_,o){const{properties:h,items:c}=_.schema;if(o==="object"&&h)for(const d in h)u(_,d,h[d].default);else o==="array"&&Array.isArray(c)&&c.forEach((d,g)=>u(_,g,d.default))}qe.assignDefaults=v;function u(_,o,h){const{gen:c,compositeRule:d,data:g,opts:m}=_;if(h===void 0)return;const E=(0,e._)`${g}${(0,e.getProperty)(o)}`;if(d){(0,r.checkStrictMode)(_,`default is ignored for: ${E}`);return}let S=(0,e._)`${E} === undefined`;m.useDefaults==="empty"&&(S=(0,e._)`${S} || ${E} === null || ${E} === ""`),c.if(S,(0,e._)`${E} = ${(0,e.stringify)(h)}`)}return qe}var le={},Y={},hr;function fe(){if(hr)return Y;hr=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.validateUnion=Y.validateArray=Y.usePattern=Y.callValidateCode=Y.schemaProperties=Y.allSchemaProperties=Y.noPropertyInData=Y.propertyInData=Y.isOwnProperty=Y.hasPropFunc=Y.reportMissingProp=Y.checkMissingProp=Y.checkReportMissingProp=void 0;const e=J(),r=X(),v=$e(),u=X();function _(t,n){const{gen:l,data:p,it:f}=t;l.if(m(l,p,n,f.opts.ownProperties),()=>{t.setParams({missingProperty:(0,e._)`${n}`},!0),t.error()})}Y.checkReportMissingProp=_;function o({gen:t,data:n,it:{opts:l}},p,f){return(0,e.or)(...p.map($=>(0,e.and)(m(t,n,$,l.ownProperties),(0,e._)`${f} = ${$}`)))}Y.checkMissingProp=o;function h(t,n){t.setParams({missingProperty:n},!0),t.error()}Y.reportMissingProp=h;function c(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Y.hasPropFunc=c;function d(t,n,l){return(0,e._)`${c(t)}.call(${n}, ${l})`}Y.isOwnProperty=d;function g(t,n,l,p){const f=(0,e._)`${n}${(0,e.getProperty)(l)} !== undefined`;return p?(0,e._)`${f} && ${d(t,n,l)}`:f}Y.propertyInData=g;function m(t,n,l,p){const f=(0,e._)`${n}${(0,e.getProperty)(l)} === undefined`;return p?(0,e.or)(f,(0,e.not)(d(t,n,l))):f}Y.noPropertyInData=m;function E(t){return t?Object.keys(t).filter(n=>n!=="__proto__"):[]}Y.allSchemaProperties=E;function S(t,n){return E(n).filter(l=>!(0,r.alwaysValidSchema)(t,n[l]))}Y.schemaProperties=S;function P({schemaCode:t,data:n,it:{gen:l,topSchemaRef:p,schemaPath:f,errorPath:$},it:j},C,D,F){const K=F?(0,e._)`${t}, ${n}, ${p}${f}`:n,L=[[v.default.instancePath,(0,e.strConcat)(v.default.instancePath,$)],[v.default.parentData,j.parentData],[v.default.parentDataProperty,j.parentDataProperty],[v.default.rootData,v.default.rootData]];j.opts.dynamicRef&&L.push([v.default.dynamicAnchors,v.default.dynamicAnchors]);const B=(0,e._)`${K}, ${l.object(...L)}`;return D!==e.nil?(0,e._)`${C}.call(${D}, ${B})`:(0,e._)`${C}(${B})`}Y.callValidateCode=P;const b=(0,e._)`new RegExp`;function y({gen:t,it:{opts:n}},l){const p=n.unicodeRegExp?"u":"",{regExp:f}=n.code,$=f(l,p);return t.scopeValue("pattern",{key:$.toString(),ref:$,code:(0,e._)`${f.code==="new RegExp"?b:(0,u.useFunc)(t,f)}(${l}, ${p})`})}Y.usePattern=y;function a(t){const{gen:n,data:l,keyword:p,it:f}=t,$=n.name("valid");if(f.allErrors){const C=n.let("valid",!0);return j(()=>n.assign(C,!1)),C}return n.var($,!0),j(()=>n.break()),$;function j(C){const D=n.const("len",(0,e._)`${l}.length`);n.forRange("i",0,D,F=>{t.subschema({keyword:p,dataProp:F,dataPropType:r.Type.Num},$),n.if((0,e.not)($),C)})}}Y.validateArray=a;function s(t){const{gen:n,schema:l,keyword:p,it:f}=t;if(!Array.isArray(l))throw new Error("ajv implementation error");if(l.some(D=>(0,r.alwaysValidSchema)(f,D))&&!f.opts.unevaluated)return;const j=n.let("valid",!1),C=n.name("_valid");n.block(()=>l.forEach((D,F)=>{const K=t.subschema({keyword:p,schemaProp:F,compositeRule:!0},C);n.assign(j,(0,e._)`${j} || ${C}`),t.mergeValidEvaluated(K,C)||n.if((0,e.not)(j))})),t.result(j,()=>t.reset(),()=>t.error(!0))}return Y.validateUnion=s,Y}var mr;function Mn(){if(mr)return le;mr=1,Object.defineProperty(le,"__esModule",{value:!0}),le.validateKeywordUsage=le.validSchemaType=le.funcKeywordCode=le.macroKeywordCode=void 0;const e=J(),r=$e(),v=fe(),u=bt();function _(S,P){const{gen:b,keyword:y,schema:a,parentSchema:s,it:t}=S,n=P.macro.call(t.self,a,s,t),l=g(b,y,n);t.opts.validateSchema!==!1&&t.self.validateSchema(n,!0);const p=b.name("valid");S.subschema({schema:n,schemaPath:e.nil,errSchemaPath:`${t.errSchemaPath}/${y}`,topSchemaRef:l,compositeRule:!0},p),S.pass(p,()=>S.error(!0))}le.macroKeywordCode=_;function o(S,P){var b;const{gen:y,keyword:a,schema:s,parentSchema:t,$data:n,it:l}=S;d(l,P);const p=!n&&P.compile?P.compile.call(l.self,s,t,l):P.validate,f=g(y,a,p),$=y.let("valid");S.block$data($,j),S.ok((b=P.valid)!==null&&b!==void 0?b:$);function j(){if(P.errors===!1)F(),P.modifying&&h(S),K(()=>S.error());else{const L=P.async?C():D();P.modifying&&h(S),K(()=>c(S,L))}}function C(){const L=y.let("ruleErrs",null);return y.try(()=>F((0,e._)`await `),B=>y.assign($,!1).if((0,e._)`${B} instanceof ${l.ValidationError}`,()=>y.assign(L,(0,e._)`${B}.errors`),()=>y.throw(B))),L}function D(){const L=(0,e._)`${f}.errors`;return y.assign(L,null),F(e.nil),L}function F(L=P.async?(0,e._)`await `:e.nil){const B=l.opts.passContext?r.default.this:r.default.self,x=!("compile"in P&&!n||P.schema===!1);y.assign($,(0,e._)`${L}${(0,v.callValidateCode)(S,f,B,x)}`,P.modifying)}function K(L){var B;y.if((0,e.not)((B=P.valid)!==null&&B!==void 0?B:$),L)}}le.funcKeywordCode=o;function h(S){const{gen:P,data:b,it:y}=S;P.if(y.parentData,()=>P.assign(b,(0,e._)`${y.parentData}[${y.parentDataProperty}]`))}function c(S,P){const{gen:b}=S;b.if((0,e._)`Array.isArray(${P})`,()=>{b.assign(r.default.vErrors,(0,e._)`${r.default.vErrors} === null ? ${P} : ${r.default.vErrors}.concat(${P})`).assign(r.default.errors,(0,e._)`${r.default.vErrors}.length`),(0,u.extendErrors)(S)},()=>S.error())}function d({schemaEnv:S},P){if(P.async&&!S.$async)throw new Error("async keyword in sync schema")}function g(S,P,b){if(b===void 0)throw new Error(`keyword "${P}" failed to compile`);return S.scopeValue("keyword",typeof b=="function"?{ref:b}:{ref:b,code:(0,e.stringify)(b)})}function m(S,P,b=!1){return!P.length||P.some(y=>y==="array"?Array.isArray(S):y==="object"?S&&typeof S=="object"&&!Array.isArray(S):typeof S==y||b&&typeof S>"u")}le.validSchemaType=m;function E({schema:S,opts:P,self:b,errSchemaPath:y},a,s){if(Array.isArray(a.keyword)?!a.keyword.includes(s):a.keyword!==s)throw new Error("ajv implementation error");const t=a.dependencies;if(t?.some(n=>!Object.prototype.hasOwnProperty.call(S,n)))throw new Error(`parent schema must have dependencies of ${s}: ${t.join(",")}`);if(a.validateSchema&&!a.validateSchema(S[s])){const l=`keyword "${s}" value is invalid at path "${y}": `+b.errorsText(a.validateSchema.errors);if(P.validateSchema==="log")b.logger.error(l);else throw new Error(l)}}return le.validateKeywordUsage=E,le}var ge={},pr;function Dn(){if(pr)return ge;pr=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.extendSubschemaMode=ge.extendSubschemaData=ge.getSubschema=void 0;const e=J(),r=X();function v(o,{keyword:h,schemaProp:c,schema:d,schemaPath:g,errSchemaPath:m,topSchemaRef:E}){if(h!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(h!==void 0){const S=o.schema[h];return c===void 0?{schema:S,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(h)}`,errSchemaPath:`${o.errSchemaPath}/${h}`}:{schema:S[c],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(h)}${(0,e.getProperty)(c)}`,errSchemaPath:`${o.errSchemaPath}/${h}/${(0,r.escapeFragment)(c)}`}}if(d!==void 0){if(g===void 0||m===void 0||E===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:g,topSchemaRef:E,errSchemaPath:m}}throw new Error('either "keyword" or "schema" must be passed')}ge.getSubschema=v;function u(o,h,{dataProp:c,dataPropType:d,data:g,dataTypes:m,propertyName:E}){if(g!==void 0&&c!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:S}=h;if(c!==void 0){const{errorPath:b,dataPathArr:y,opts:a}=h,s=S.let("data",(0,e._)`${h.data}${(0,e.getProperty)(c)}`,!0);P(s),o.errorPath=(0,e.str)`${b}${(0,r.getErrorPath)(c,d,a.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${c}`,o.dataPathArr=[...y,o.parentDataProperty]}if(g!==void 0){const b=g instanceof e.Name?g:S.let("data",g,!0);P(b),E!==void 0&&(o.propertyName=E)}m&&(o.dataTypes=m);function P(b){o.data=b,o.dataLevel=h.dataLevel+1,o.dataTypes=[],h.definedProperties=new Set,o.parentData=h.data,o.dataNames=[...h.dataNames,b]}}ge.extendSubschemaData=u;function _(o,{jtdDiscriminator:h,jtdMetadata:c,compositeRule:d,createErrors:g,allErrors:m}){d!==void 0&&(o.compositeRule=d),g!==void 0&&(o.createErrors=g),m!==void 0&&(o.allErrors=m),o.jtdDiscriminator=h,o.jtdMetadata=c}return ge.extendSubschemaMode=_,ge}var ne={},Ct,yr;function _n(){return yr||(yr=1,Ct=function e(r,v){if(r===v)return!0;if(r&&v&&typeof r=="object"&&typeof v=="object"){if(r.constructor!==v.constructor)return!1;var u,_,o;if(Array.isArray(r)){if(u=r.length,u!=v.length)return!1;for(_=u;_--!==0;)if(!e(r[_],v[_]))return!1;return!0}if(r.constructor===RegExp)return r.source===v.source&&r.flags===v.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===v.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===v.toString();if(o=Object.keys(r),u=o.length,u!==Object.keys(v).length)return!1;for(_=u;_--!==0;)if(!Object.prototype.hasOwnProperty.call(v,o[_]))return!1;for(_=u;_--!==0;){var h=o[_];if(!e(r[h],v[h]))return!1}return!0}return r!==r&&v!==v}),Ct}var At={exports:{}},gr;function Vn(){if(gr)return At.exports;gr=1;var e=At.exports=function(u,_,o){typeof _=="function"&&(o=_,_={}),o=_.cb||o;var h=typeof o=="function"?o:o.pre||function(){},c=o.post||function(){};r(_,h,c,u,"",u)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function r(u,_,o,h,c,d,g,m,E,S){if(h&&typeof h=="object"&&!Array.isArray(h)){_(h,c,d,g,m,E,S);for(var P in h){var b=h[P];if(Array.isArray(b)){if(P in e.arrayKeywords)for(var y=0;y<b.length;y++)r(u,_,o,b[y],c+"/"+P+"/"+y,d,c,P,h,y)}else if(P in e.propsKeywords){if(b&&typeof b=="object")for(var a in b)r(u,_,o,b[a],c+"/"+P+"/"+v(a),d,c,P,h,a)}else(P in e.keywords||u.allKeys&&!(P in e.skipKeywords))&&r(u,_,o,b,c+"/"+P,d,c,P,h)}o(h,c,d,g,m,E,S)}}function v(u){return u.replace(/~/g,"~0").replace(/\//g,"~1")}return At.exports}var vr;function Et(){if(vr)return ne;vr=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.getSchemaRefs=ne.resolveUrl=ne.normalizeId=ne._getFullPath=ne.getFullPath=ne.inlineRef=void 0;const e=X(),r=_n(),v=Vn(),u=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function _(y,a=!0){return typeof y=="boolean"?!0:a===!0?!h(y):a?c(y)<=a:!1}ne.inlineRef=_;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function h(y){for(const a in y){if(o.has(a))return!0;const s=y[a];if(Array.isArray(s)&&s.some(h)||typeof s=="object"&&h(s))return!0}return!1}function c(y){let a=0;for(const s in y){if(s==="$ref")return 1/0;if(a++,!u.has(s)&&(typeof y[s]=="object"&&(0,e.eachItem)(y[s],t=>a+=c(t)),a===1/0))return 1/0}return a}function d(y,a="",s){s!==!1&&(a=E(a));const t=y.parse(a);return g(y,t)}ne.getFullPath=d;function g(y,a){return y.serialize(a).split("#")[0]+"#"}ne._getFullPath=g;const m=/#\/?$/;function E(y){return y?y.replace(m,""):""}ne.normalizeId=E;function S(y,a,s){return s=E(s),y.resolve(a,s)}ne.resolveUrl=S;const P=/^[a-z_][-a-z0-9._]*$/i;function b(y,a){if(typeof y=="boolean")return{};const{schemaId:s,uriResolver:t}=this.opts,n=E(y[s]||a),l={"":n},p=d(t,n,!1),f={},$=new Set;return v(y,{allKeys:!0},(D,F,K,L)=>{if(L===void 0)return;const B=p+F;let x=l[L];typeof D[s]=="string"&&(x=he.call(this,D[s])),me.call(this,D.$anchor),me.call(this,D.$dynamicAnchor),l[F]=x;function he(Z){const ve=this.opts.uriResolver.resolve;if(Z=E(x?ve(x,Z):Z),$.has(Z))throw C(Z);$.add(Z);let A=this.refs[Z];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?j(D,A.schema,Z):Z!==E(B)&&(Z[0]==="#"?(j(D,f[Z],Z),f[Z]=D):this.refs[Z]=B),Z}function me(Z){if(typeof Z=="string"){if(!P.test(Z))throw new Error(`invalid anchor "${Z}"`);he.call(this,`#${Z}`)}}}),f;function j(D,F,K){if(F!==void 0&&!r(D,F))throw C(K)}function C(D){return new Error(`reference "${D}" resolves to more than one schema`)}}return ne.getSchemaRefs=b,ne}var _r;function Pt(){if(_r)return pe;_r=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.getData=pe.KeywordCxt=pe.validateFunctionCode=void 0;const e=Cn(),r=wt(),v=vn(),u=wt(),_=An(),o=Mn(),h=Dn(),c=J(),d=$e(),g=Et(),m=X(),E=bt();function S(R){if(p(R)&&($(R),l(R))){a(R);return}P(R,()=>(0,e.topBoolOrEmptySchema)(R))}pe.validateFunctionCode=S;function P({gen:R,validateName:O,schema:I,schemaEnv:M,opts:U},G){U.code.es5?R.func(O,(0,c._)`${d.default.data}, ${d.default.valCxt}`,M.$async,()=>{R.code((0,c._)`"use strict"; ${t(I,U)}`),y(R,U),R.code(G)}):R.func(O,(0,c._)`${d.default.data}, ${b(U)}`,M.$async,()=>R.code(t(I,U)).code(G))}function b(R){return(0,c._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${R.dynamicRef?(0,c._)`, ${d.default.dynamicAnchors}={}`:c.nil}}={}`}function y(R,O){R.if(d.default.valCxt,()=>{R.var(d.default.instancePath,(0,c._)`${d.default.valCxt}.${d.default.instancePath}`),R.var(d.default.parentData,(0,c._)`${d.default.valCxt}.${d.default.parentData}`),R.var(d.default.parentDataProperty,(0,c._)`${d.default.valCxt}.${d.default.parentDataProperty}`),R.var(d.default.rootData,(0,c._)`${d.default.valCxt}.${d.default.rootData}`),O.dynamicRef&&R.var(d.default.dynamicAnchors,(0,c._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{R.var(d.default.instancePath,(0,c._)`""`),R.var(d.default.parentData,(0,c._)`undefined`),R.var(d.default.parentDataProperty,(0,c._)`undefined`),R.var(d.default.rootData,d.default.data),O.dynamicRef&&R.var(d.default.dynamicAnchors,(0,c._)`{}`)})}function a(R){const{schema:O,opts:I,gen:M}=R;P(R,()=>{I.$comment&&O.$comment&&L(R),D(R),M.let(d.default.vErrors,null),M.let(d.default.errors,0),I.unevaluated&&s(R),j(R),B(R)})}function s(R){const{gen:O,validateName:I}=R;R.evaluated=O.const("evaluated",(0,c._)`${I}.evaluated`),O.if((0,c._)`${R.evaluated}.dynamicProps`,()=>O.assign((0,c._)`${R.evaluated}.props`,(0,c._)`undefined`)),O.if((0,c._)`${R.evaluated}.dynamicItems`,()=>O.assign((0,c._)`${R.evaluated}.items`,(0,c._)`undefined`))}function t(R,O){const I=typeof R=="object"&&R[O.schemaId];return I&&(O.code.source||O.code.process)?(0,c._)`/*# sourceURL=${I} */`:c.nil}function n(R,O){if(p(R)&&($(R),l(R))){f(R,O);return}(0,e.boolOrEmptySchema)(R,O)}function l({schema:R,self:O}){if(typeof R=="boolean")return!R;for(const I in R)if(O.RULES.all[I])return!0;return!1}function p(R){return typeof R.schema!="boolean"}function f(R,O){const{schema:I,gen:M,opts:U}=R;U.$comment&&I.$comment&&L(R),F(R),K(R);const G=M.const("_errs",d.default.errors);j(R,G),M.var(O,(0,c._)`${G} === ${d.default.errors}`)}function $(R){(0,m.checkUnknownRules)(R),C(R)}function j(R,O){if(R.opts.jtd)return he(R,[],!1,O);const I=(0,r.getSchemaTypes)(R.schema),M=(0,r.coerceAndCheckDataType)(R,I);he(R,I,!M,O)}function C(R){const{schema:O,errSchemaPath:I,opts:M,self:U}=R;O.$ref&&M.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(O,U.RULES)&&U.logger.warn(`$ref: keywords ignored in schema at path "${I}"`)}function D(R){const{schema:O,opts:I}=R;O.default!==void 0&&I.useDefaults&&I.strictSchema&&(0,m.checkStrictMode)(R,"default is ignored in the schema root")}function F(R){const O=R.schema[R.opts.schemaId];O&&(R.baseId=(0,g.resolveUrl)(R.opts.uriResolver,R.baseId,O))}function K(R){if(R.schema.$async&&!R.schemaEnv.$async)throw new Error("async schema in sync schema")}function L({gen:R,schemaEnv:O,schema:I,errSchemaPath:M,opts:U}){const G=I.$comment;if(U.$comment===!0)R.code((0,c._)`${d.default.self}.logger.log(${G})`);else if(typeof U.$comment=="function"){const ee=(0,c.str)`${M}/$comment`,ce=R.scopeValue("root",{ref:O.root});R.code((0,c._)`${d.default.self}.opts.$comment(${G}, ${ee}, ${ce}.schema)`)}}function B(R){const{gen:O,schemaEnv:I,validateName:M,ValidationError:U,opts:G}=R;I.$async?O.if((0,c._)`${d.default.errors} === 0`,()=>O.return(d.default.data),()=>O.throw((0,c._)`new ${U}(${d.default.vErrors})`)):(O.assign((0,c._)`${M}.errors`,d.default.vErrors),G.unevaluated&&x(R),O.return((0,c._)`${d.default.errors} === 0`))}function x({gen:R,evaluated:O,props:I,items:M}){I instanceof c.Name&&R.assign((0,c._)`${O}.props`,I),M instanceof c.Name&&R.assign((0,c._)`${O}.items`,M)}function he(R,O,I,M){const{gen:U,schema:G,data:ee,allErrors:ce,opts:se,self:ae}=R,{RULES:te}=ae;if(G.$ref&&(se.ignoreKeywordsWithRef||!(0,m.schemaHasRulesButRef)(G,te))){U.block(()=>V(R,"$ref",te.all.$ref.definition));return}se.jtd||Z(R,O),U.block(()=>{for(const ue of te.rules)Pe(ue);Pe(te.post)});function Pe(ue){(0,v.shouldUseGroup)(G,ue)&&(ue.type?(U.if((0,u.checkDataType)(ue.type,ee,se.strictNumbers)),me(R,ue),O.length===1&&O[0]===ue.type&&I&&(U.else(),(0,u.reportTypeError)(R)),U.endIf()):me(R,ue),ce||U.if((0,c._)`${d.default.errors} === ${M||0}`))}}function me(R,O){const{gen:I,schema:M,opts:{useDefaults:U}}=R;U&&(0,_.assignDefaults)(R,O.type),I.block(()=>{for(const G of O.rules)(0,v.shouldUseRule)(M,G)&&V(R,G.keyword,G.definition,O.type)})}function Z(R,O){R.schemaEnv.meta||!R.opts.strictTypes||(ve(R,O),R.opts.allowUnionTypes||A(R,O),N(R,R.dataTypes))}function ve(R,O){if(O.length){if(!R.dataTypes.length){R.dataTypes=O;return}O.forEach(I=>{k(R.dataTypes,I)||w(R,`type "${I}" not allowed by context "${R.dataTypes.join(",")}"`)}),i(R,O)}}function A(R,O){O.length>1&&!(O.length===2&&O.includes("null"))&&w(R,"use allowUnionTypes to allow union type keyword")}function N(R,O){const I=R.self.RULES.all;for(const M in I){const U=I[M];if(typeof U=="object"&&(0,v.shouldUseRule)(R.schema,U)){const{type:G}=U.definition;G.length&&!G.some(ee=>q(O,ee))&&w(R,`missing type "${G.join(",")}" for keyword "${M}"`)}}}function q(R,O){return R.includes(O)||O==="number"&&R.includes("integer")}function k(R,O){return R.includes(O)||O==="integer"&&R.includes("number")}function i(R,O){const I=[];for(const M of R.dataTypes)k(O,M)?I.push(M):O.includes("integer")&&M==="number"&&I.push("integer");R.dataTypes=I}function w(R,O){const I=R.schemaEnv.baseId+R.errSchemaPath;O+=` at "${I}" (strictTypes)`,(0,m.checkStrictMode)(R,O,R.opts.strictTypes)}class T{constructor(O,I,M){if((0,o.validateKeywordUsage)(O,I,M),this.gen=O.gen,this.allErrors=O.allErrors,this.keyword=M,this.data=O.data,this.schema=O.schema[M],this.$data=I.$data&&O.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(O,this.schema,M,this.$data),this.schemaType=I.schemaType,this.parentSchema=O.schema,this.params={},this.it=O,this.def=I,this.$data)this.schemaCode=O.gen.const("vSchema",W(this.$data,O));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,I.schemaType,I.allowUndefined))throw new Error(`${M} value must be ${JSON.stringify(I.schemaType)}`);("code"in I?I.trackErrors:I.errors!==!1)&&(this.errsCount=O.gen.const("_errs",d.default.errors))}result(O,I,M){this.failResult((0,c.not)(O),I,M)}failResult(O,I,M){this.gen.if(O),M?M():this.error(),I?(this.gen.else(),I(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(O,I){this.failResult((0,c.not)(O),void 0,I)}fail(O){if(O===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(O),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(O){if(!this.$data)return this.fail(O);const{schemaCode:I}=this;this.fail((0,c._)`${I} !== undefined && (${(0,c.or)(this.invalid$data(),O)})`)}error(O,I,M){if(I){this.setParams(I),this._error(O,M),this.setParams({});return}this._error(O,M)}_error(O,I){(O?E.reportExtraError:E.reportError)(this,this.def.error,I)}$dataError(){(0,E.reportError)(this,this.def.$dataError||E.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,E.resetErrorsCount)(this.gen,this.errsCount)}ok(O){this.allErrors||this.gen.if(O)}setParams(O,I){I?Object.assign(this.params,O):this.params=O}block$data(O,I,M=c.nil){this.gen.block(()=>{this.check$data(O,M),I()})}check$data(O=c.nil,I=c.nil){if(!this.$data)return;const{gen:M,schemaCode:U,schemaType:G,def:ee}=this;M.if((0,c.or)((0,c._)`${U} === undefined`,I)),O!==c.nil&&M.assign(O,!0),(G.length||ee.validateSchema)&&(M.elseIf(this.invalid$data()),this.$dataError(),O!==c.nil&&M.assign(O,!1)),M.else()}invalid$data(){const{gen:O,schemaCode:I,schemaType:M,def:U,it:G}=this;return(0,c.or)(ee(),ce());function ee(){if(M.length){if(!(I instanceof c.Name))throw new Error("ajv implementation error");const se=Array.isArray(M)?M:[M];return(0,c._)`${(0,u.checkDataTypes)(se,I,G.opts.strictNumbers,u.DataType.Wrong)}`}return c.nil}function ce(){if(U.validateSchema){const se=O.scopeValue("validate$data",{ref:U.validateSchema});return(0,c._)`!${se}(${I})`}return c.nil}}subschema(O,I){const M=(0,h.getSubschema)(this.it,O);(0,h.extendSubschemaData)(M,this.it,O),(0,h.extendSubschemaMode)(M,O);const U={...this.it,...M,items:void 0,props:void 0};return n(U,I),U}mergeEvaluated(O,I){const{it:M,gen:U}=this;M.opts.unevaluated&&(M.props!==!0&&O.props!==void 0&&(M.props=m.mergeEvaluated.props(U,O.props,M.props,I)),M.items!==!0&&O.items!==void 0&&(M.items=m.mergeEvaluated.items(U,O.items,M.items,I)))}mergeValidEvaluated(O,I){const{it:M,gen:U}=this;if(M.opts.unevaluated&&(M.props!==!0||M.items!==!0))return U.if(I,()=>this.mergeEvaluated(O,c.Name)),!0}}pe.KeywordCxt=T;function V(R,O,I,M){const U=new T(R,I,O);"code"in I?I.code(U,M):U.$data&&I.validate?(0,o.funcKeywordCode)(U,I):"macro"in I?(0,o.macroKeywordCode)(U,I):(I.compile||I.validate)&&(0,o.funcKeywordCode)(U,I)}const z=/^\/(?:[^~]|~0|~1)*$/,Q=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W(R,{dataLevel:O,dataNames:I,dataPathArr:M}){let U,G;if(R==="")return d.default.rootData;if(R[0]==="/"){if(!z.test(R))throw new Error(`Invalid JSON-pointer: ${R}`);U=R,G=d.default.rootData}else{const ae=Q.exec(R);if(!ae)throw new Error(`Invalid JSON-pointer: ${R}`);const te=+ae[1];if(U=ae[2],U==="#"){if(te>=O)throw new Error(se("property/index",te));return M[O-te]}if(te>O)throw new Error(se("data",te));if(G=I[O-te],!U)return G}let ee=G;const ce=U.split("/");for(const ae of ce)ae&&(G=(0,c._)`${G}${(0,c.getProperty)((0,m.unescapeJsonPointer)(ae))}`,ee=(0,c._)`${ee} && ${G}`);return ee;function se(ae,te){return`Cannot access ${ae} ${te} levels up, current level is ${O}`}}return pe.getData=W,pe}var Ve={},$r;function Bt(){if($r)return Ve;$r=1,Object.defineProperty(Ve,"__esModule",{value:!0});class e extends Error{constructor(v){super("validation failed"),this.errors=v,this.ajv=this.validation=!0}}return Ve.default=e,Ve}var Fe={},wr;function St(){if(wr)return Fe;wr=1,Object.defineProperty(Fe,"__esModule",{value:!0});const e=Et();class r extends Error{constructor(u,_,o,h){super(h||`can't resolve reference ${o} from id ${_}`),this.missingRef=(0,e.resolveUrl)(u,_,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(u,this.missingRef))}}return Fe.default=r,Fe}var ie={},br;function Xt(){if(br)return ie;br=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.resolveSchema=ie.getCompilingSchema=ie.resolveRef=ie.compileSchema=ie.SchemaEnv=void 0;const e=J(),r=Bt(),v=$e(),u=Et(),_=X(),o=Pt();class h{constructor(s){var t;this.refs={},this.dynamicAnchors={};let n;typeof s.schema=="object"&&(n=s.schema),this.schema=s.schema,this.schemaId=s.schemaId,this.root=s.root||this,this.baseId=(t=s.baseId)!==null&&t!==void 0?t:(0,u.normalizeId)(n?.[s.schemaId||"$id"]),this.schemaPath=s.schemaPath,this.localRefs=s.localRefs,this.meta=s.meta,this.$async=n?.$async,this.refs={}}}ie.SchemaEnv=h;function c(a){const s=m.call(this,a);if(s)return s;const t=(0,u.getFullPath)(this.opts.uriResolver,a.root.baseId),{es5:n,lines:l}=this.opts.code,{ownProperties:p}=this.opts,f=new e.CodeGen(this.scope,{es5:n,lines:l,ownProperties:p});let $;a.$async&&($=f.scopeValue("Error",{ref:r.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const j=f.scopeName("validate");a.validateName=j;const C={gen:f,allErrors:this.opts.allErrors,data:v.default.data,parentData:v.default.parentData,parentDataProperty:v.default.parentDataProperty,dataNames:[v.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:f.scopeValue("schema",this.opts.code.source===!0?{ref:a.schema,code:(0,e.stringify)(a.schema)}:{ref:a.schema}),validateName:j,ValidationError:$,schema:a.schema,schemaEnv:a,rootId:t,baseId:a.baseId||t,schemaPath:e.nil,errSchemaPath:a.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let D;try{this._compilations.add(a),(0,o.validateFunctionCode)(C),f.optimize(this.opts.code.optimize);const F=f.toString();D=`${f.scopeRefs(v.default.scope)}return ${F}`,this.opts.code.process&&(D=this.opts.code.process(D,a));const L=new Function(`${v.default.self}`,`${v.default.scope}`,D)(this,this.scope.get());if(this.scope.value(j,{ref:L}),L.errors=null,L.schema=a.schema,L.schemaEnv=a,a.$async&&(L.$async=!0),this.opts.code.source===!0&&(L.source={validateName:j,validateCode:F,scopeValues:f._values}),this.opts.unevaluated){const{props:B,items:x}=C;L.evaluated={props:B instanceof e.Name?void 0:B,items:x instanceof e.Name?void 0:x,dynamicProps:B instanceof e.Name,dynamicItems:x instanceof e.Name},L.source&&(L.source.evaluated=(0,e.stringify)(L.evaluated))}return a.validate=L,a}catch(F){throw delete a.validate,delete a.validateName,D&&this.logger.error("Error compiling schema, function code:",D),F}finally{this._compilations.delete(a)}}ie.compileSchema=c;function d(a,s,t){var n;t=(0,u.resolveUrl)(this.opts.uriResolver,s,t);const l=a.refs[t];if(l)return l;let p=S.call(this,a,t);if(p===void 0){const f=(n=a.localRefs)===null||n===void 0?void 0:n[t],{schemaId:$}=this.opts;f&&(p=new h({schema:f,schemaId:$,root:a,baseId:s}))}if(p!==void 0)return a.refs[t]=g.call(this,p)}ie.resolveRef=d;function g(a){return(0,u.inlineRef)(a.schema,this.opts.inlineRefs)?a.schema:a.validate?a:c.call(this,a)}function m(a){for(const s of this._compilations)if(E(s,a))return s}ie.getCompilingSchema=m;function E(a,s){return a.schema===s.schema&&a.root===s.root&&a.baseId===s.baseId}function S(a,s){let t;for(;typeof(t=this.refs[s])=="string";)s=t;return t||this.schemas[s]||P.call(this,a,s)}function P(a,s){const t=this.opts.uriResolver.parse(s),n=(0,u._getFullPath)(this.opts.uriResolver,t);let l=(0,u.getFullPath)(this.opts.uriResolver,a.baseId,void 0);if(Object.keys(a.schema).length>0&&n===l)return y.call(this,t,a);const p=(0,u.normalizeId)(n),f=this.refs[p]||this.schemas[p];if(typeof f=="string"){const $=P.call(this,a,f);return typeof $?.schema!="object"?void 0:y.call(this,t,$)}if(typeof f?.schema=="object"){if(f.validate||c.call(this,f),p===(0,u.normalizeId)(s)){const{schema:$}=f,{schemaId:j}=this.opts,C=$[j];return C&&(l=(0,u.resolveUrl)(this.opts.uriResolver,l,C)),new h({schema:$,schemaId:j,root:a,baseId:l})}return y.call(this,t,f)}}ie.resolveSchema=P;const b=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(a,{baseId:s,schema:t,root:n}){var l;if(((l=a.fragment)===null||l===void 0?void 0:l[0])!=="/")return;for(const $ of a.fragment.slice(1).split("/")){if(typeof t=="boolean")return;const j=t[(0,_.unescapeFragment)($)];if(j===void 0)return;t=j;const C=typeof t=="object"&&t[this.opts.schemaId];!b.has($)&&C&&(s=(0,u.resolveUrl)(this.opts.uriResolver,s,C))}let p;if(typeof t!="boolean"&&t.$ref&&!(0,_.schemaHasRulesButRef)(t,this.RULES)){const $=(0,u.resolveUrl)(this.opts.uriResolver,s,t.$ref);p=P.call(this,n,$)}const{schemaId:f}=this.opts;if(p=p||new h({schema:t,schemaId:f,root:n,baseId:s}),p.schema!==p.root.schema)return p}return ie}const Fn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Un="Meta-schema for $data reference (JSON AnySchema extension proposal)",zn="object",Ln=["$data"],Kn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Hn=!1,Gn={$id:Fn,description:Un,type:zn,required:Ln,properties:Kn,additionalProperties:Hn};var Ue={},Ce={exports:{}},Mt,Er;function Jn(){return Er||(Er=1,Mt={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),Mt}var Dt,Pr;function Wn(){if(Pr)return Dt;Pr=1;const{HEX:e}=Jn(),r=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function v(y){if(c(y,".")<3)return{host:y,isIPV4:!1};const a=y.match(r)||[],[s]=a;return s?{host:h(s,"."),isIPV4:!0}:{host:y,isIPV4:!1}}function u(y,a=!1){let s="",t=!0;for(const n of y){if(e[n]===void 0)return;n!=="0"&&t===!0&&(t=!1),t||(s+=n)}return a&&s.length===0&&(s="0"),s}function _(y){let a=0;const s={error:!1,address:"",zone:""},t=[],n=[];let l=!1,p=!1,f=!1;function $(){if(n.length){if(l===!1){const j=u(n);if(j!==void 0)t.push(j);else return s.error=!0,!1}n.length=0}return!0}for(let j=0;j<y.length;j++){const C=y[j];if(!(C==="["||C==="]"))if(C===":"){if(p===!0&&(f=!0),!$())break;if(a++,t.push(":"),a>7){s.error=!0;break}j-1>=0&&y[j-1]===":"&&(p=!0);continue}else if(C==="%"){if(!$())break;l=!0}else{n.push(C);continue}}return n.length&&(l?s.zone=n.join(""):f?t.push(n.join("")):t.push(u(n))),s.address=t.join(""),s}function o(y){if(c(y,":")<2)return{host:y,isIPV6:!1};const a=_(y);if(a.error)return{host:y,isIPV6:!1};{let s=a.address,t=a.address;return a.zone&&(s+="%"+a.zone,t+="%25"+a.zone),{host:s,escapedHost:t,isIPV6:!0}}}function h(y,a){let s="",t=!0;const n=y.length;for(let l=0;l<n;l++){const p=y[l];p==="0"&&t?(l+1<=n&&y[l+1]===a||l+1===n)&&(s+=p,t=!1):(p===a?t=!0:t=!1,s+=p)}return s}function c(y,a){let s=0;for(let t=0;t<y.length;t++)y[t]===a&&s++;return s}const d=/^\.\.?\//u,g=/^\/\.(?:\/|$)/u,m=/^\/\.\.(?:\/|$)/u,E=/^\/?(?:.|\n)*?(?=\/|$)/u;function S(y){const a=[];for(;y.length;)if(y.match(d))y=y.replace(d,"");else if(y.match(g))y=y.replace(g,"/");else if(y.match(m))y=y.replace(m,"/"),a.pop();else if(y==="."||y==="..")y="";else{const s=y.match(E);if(s){const t=s[0];y=y.slice(t.length),a.push(t)}else throw new Error("Unexpected dot segment condition")}return a.join("")}function P(y,a){const s=a!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=s(y.scheme)),y.userinfo!==void 0&&(y.userinfo=s(y.userinfo)),y.host!==void 0&&(y.host=s(y.host)),y.path!==void 0&&(y.path=s(y.path)),y.query!==void 0&&(y.query=s(y.query)),y.fragment!==void 0&&(y.fragment=s(y.fragment)),y}function b(y){const a=[];if(y.userinfo!==void 0&&(a.push(y.userinfo),a.push("@")),y.host!==void 0){let s=unescape(y.host);const t=v(s);if(t.isIPV4)s=t.host;else{const n=o(t.host);n.isIPV6===!0?s=`[${n.escapedHost}]`:s=y.host}a.push(s)}return(typeof y.port=="number"||typeof y.port=="string")&&(a.push(":"),a.push(String(y.port))),a.length?a.join(""):void 0}return Dt={recomposeAuthority:b,normalizeComponentEncoding:P,removeDotSegments:S,normalizeIPv4:v,normalizeIPv6:o,stringArrayToHexStripped:u},Dt}var Vt,Sr;function Bn(){if(Sr)return Vt;Sr=1;const e=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,r=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function v(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function u(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function _(t){const n=String(t.scheme).toLowerCase()==="https";return(t.port===(n?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function o(t){return t.secure=v(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function h(t){if((t.port===(v(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[n,l]=t.resourceName.split("?");t.path=n&&n!=="/"?n:void 0,t.query=l,t.resourceName=void 0}return t.fragment=void 0,t}function c(t,n){if(!t.path)return t.error="URN can not be parsed",t;const l=t.path.match(r);if(l){const p=n.scheme||t.scheme||"urn";t.nid=l[1].toLowerCase(),t.nss=l[2];const f=`${p}:${n.nid||t.nid}`,$=s[f];t.path=void 0,$&&(t=$.parse(t,n))}else t.error=t.error||"URN can not be parsed.";return t}function d(t,n){const l=n.scheme||t.scheme||"urn",p=t.nid.toLowerCase(),f=`${l}:${n.nid||p}`,$=s[f];$&&(t=$.serialize(t,n));const j=t,C=t.nss;return j.path=`${p||n.nid}:${C}`,n.skipEscape=!0,j}function g(t,n){const l=t;return l.uuid=l.nss,l.nss=void 0,!n.tolerant&&(!l.uuid||!e.test(l.uuid))&&(l.error=l.error||"UUID is not valid."),l}function m(t){const n=t;return n.nss=(t.uuid||"").toLowerCase(),n}const E={scheme:"http",domainHost:!0,parse:u,serialize:_},S={scheme:"https",domainHost:E.domainHost,parse:u,serialize:_},P={scheme:"ws",domainHost:!0,parse:o,serialize:h},b={scheme:"wss",domainHost:P.domainHost,parse:P.parse,serialize:P.serialize},s={http:E,https:S,ws:P,wss:b,urn:{scheme:"urn",parse:c,serialize:d,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:g,serialize:m,skipNormalize:!0}};return Vt=s,Vt}var Rr;function Xn(){if(Rr)return Ce.exports;Rr=1;const{normalizeIPv6:e,normalizeIPv4:r,removeDotSegments:v,recomposeAuthority:u,normalizeComponentEncoding:_}=Wn(),o=Bn();function h(a,s){return typeof a=="string"?a=m(b(a,s),s):typeof a=="object"&&(a=b(m(a,s),s)),a}function c(a,s,t){const n=Object.assign({scheme:"null"},t),l=d(b(a,n),b(s,n),n,!0);return m(l,{...n,skipEscape:!0})}function d(a,s,t,n){const l={};return n||(a=b(m(a,t),t),s=b(m(s,t),t)),t=t||{},!t.tolerant&&s.scheme?(l.scheme=s.scheme,l.userinfo=s.userinfo,l.host=s.host,l.port=s.port,l.path=v(s.path||""),l.query=s.query):(s.userinfo!==void 0||s.host!==void 0||s.port!==void 0?(l.userinfo=s.userinfo,l.host=s.host,l.port=s.port,l.path=v(s.path||""),l.query=s.query):(s.path?(s.path.charAt(0)==="/"?l.path=v(s.path):((a.userinfo!==void 0||a.host!==void 0||a.port!==void 0)&&!a.path?l.path="/"+s.path:a.path?l.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+s.path:l.path=s.path,l.path=v(l.path)),l.query=s.query):(l.path=a.path,s.query!==void 0?l.query=s.query:l.query=a.query),l.userinfo=a.userinfo,l.host=a.host,l.port=a.port),l.scheme=a.scheme),l.fragment=s.fragment,l}function g(a,s,t){return typeof a=="string"?(a=unescape(a),a=m(_(b(a,t),!0),{...t,skipEscape:!0})):typeof a=="object"&&(a=m(_(a,!0),{...t,skipEscape:!0})),typeof s=="string"?(s=unescape(s),s=m(_(b(s,t),!0),{...t,skipEscape:!0})):typeof s=="object"&&(s=m(_(s,!0),{...t,skipEscape:!0})),a.toLowerCase()===s.toLowerCase()}function m(a,s){const t={host:a.host,scheme:a.scheme,userinfo:a.userinfo,port:a.port,path:a.path,query:a.query,nid:a.nid,nss:a.nss,uuid:a.uuid,fragment:a.fragment,reference:a.reference,resourceName:a.resourceName,secure:a.secure,error:""},n=Object.assign({},s),l=[],p=o[(n.scheme||t.scheme||"").toLowerCase()];p&&p.serialize&&p.serialize(t,n),t.path!==void 0&&(n.skipEscape?t.path=unescape(t.path):(t.path=escape(t.path),t.scheme!==void 0&&(t.path=t.path.split("%3A").join(":")))),n.reference!=="suffix"&&t.scheme&&l.push(t.scheme,":");const f=u(t);if(f!==void 0&&(n.reference!=="suffix"&&l.push("//"),l.push(f),t.path&&t.path.charAt(0)!=="/"&&l.push("/")),t.path!==void 0){let $=t.path;!n.absolutePath&&(!p||!p.absolutePath)&&($=v($)),f===void 0&&($=$.replace(/^\/\//u,"/%2F")),l.push($)}return t.query!==void 0&&l.push("?",t.query),t.fragment!==void 0&&l.push("#",t.fragment),l.join("")}const E=Array.from({length:127},(a,s)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(s)));function S(a){let s=0;for(let t=0,n=a.length;t<n;++t)if(s=a.charCodeAt(t),s>126||E[s])return!0;return!1}const P=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function b(a,s){const t=Object.assign({},s),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},l=a.indexOf("%")!==-1;let p=!1;t.reference==="suffix"&&(a=(t.scheme?t.scheme+":":"")+"//"+a);const f=a.match(P);if(f){if(n.scheme=f[1],n.userinfo=f[3],n.host=f[4],n.port=parseInt(f[5],10),n.path=f[6]||"",n.query=f[7],n.fragment=f[8],isNaN(n.port)&&(n.port=f[5]),n.host){const j=r(n.host);if(j.isIPV4===!1){const C=e(j.host);n.host=C.host.toLowerCase(),p=C.isIPV6}else n.host=j.host,p=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",t.reference&&t.reference!=="suffix"&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");const $=o[(t.scheme||n.scheme||"").toLowerCase()];if(!t.unicodeSupport&&(!$||!$.unicodeSupport)&&n.host&&(t.domainHost||$&&$.domainHost)&&p===!1&&S(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(j){n.error=n.error||"Host's domain name can not be converted to ASCII: "+j}(!$||$&&!$.skipNormalize)&&(l&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),l&&n.host!==void 0&&(n.host=unescape(n.host)),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),$&&$.parse&&$.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}const y={SCHEMES:o,normalize:h,resolve:c,resolveComponents:d,equal:g,serialize:m,parse:b};return Ce.exports=y,Ce.exports.default=y,Ce.exports.fastUri=y,Ce.exports}var Nr;function Qn(){if(Nr)return Ue;Nr=1,Object.defineProperty(Ue,"__esModule",{value:!0});const e=Xn();return e.code='require("ajv/dist/runtime/uri").default',Ue.default=e,Ue}var Or;function Yn(){return Or||(Or=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var r=Pt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var v=J();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return v._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return v.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return v.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return v.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return v.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return v.CodeGen}});const u=Bt(),_=St(),o=gn(),h=Xt(),c=J(),d=Et(),g=wt(),m=X(),E=Gn,S=Qn(),P=(A,N)=>new RegExp(A,N);P.code="new RegExp";const b=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),a={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},s={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},t=200;function n(A){var N,q,k,i,w,T,V,z,Q,W,R,O,I,M,U,G,ee,ce,se,ae,te,Pe,ue,Rt,Nt;const Ie=A.strict,Ot=(N=A.code)===null||N===void 0?void 0:N.optimize,Yt=Ot===!0||Ot===void 0?1:Ot||0,Zt=(k=(q=A.code)===null||q===void 0?void 0:q.regExp)!==null&&k!==void 0?k:P,Pn=(i=A.uriResolver)!==null&&i!==void 0?i:S.default;return{strictSchema:(T=(w=A.strictSchema)!==null&&w!==void 0?w:Ie)!==null&&T!==void 0?T:!0,strictNumbers:(z=(V=A.strictNumbers)!==null&&V!==void 0?V:Ie)!==null&&z!==void 0?z:!0,strictTypes:(W=(Q=A.strictTypes)!==null&&Q!==void 0?Q:Ie)!==null&&W!==void 0?W:"log",strictTuples:(O=(R=A.strictTuples)!==null&&R!==void 0?R:Ie)!==null&&O!==void 0?O:"log",strictRequired:(M=(I=A.strictRequired)!==null&&I!==void 0?I:Ie)!==null&&M!==void 0?M:!1,code:A.code?{...A.code,optimize:Yt,regExp:Zt}:{optimize:Yt,regExp:Zt},loopRequired:(U=A.loopRequired)!==null&&U!==void 0?U:t,loopEnum:(G=A.loopEnum)!==null&&G!==void 0?G:t,meta:(ee=A.meta)!==null&&ee!==void 0?ee:!0,messages:(ce=A.messages)!==null&&ce!==void 0?ce:!0,inlineRefs:(se=A.inlineRefs)!==null&&se!==void 0?se:!0,schemaId:(ae=A.schemaId)!==null&&ae!==void 0?ae:"$id",addUsedSchema:(te=A.addUsedSchema)!==null&&te!==void 0?te:!0,validateSchema:(Pe=A.validateSchema)!==null&&Pe!==void 0?Pe:!0,validateFormats:(ue=A.validateFormats)!==null&&ue!==void 0?ue:!0,unicodeRegExp:(Rt=A.unicodeRegExp)!==null&&Rt!==void 0?Rt:!0,int32range:(Nt=A.int32range)!==null&&Nt!==void 0?Nt:!0,uriResolver:Pn}}class l{constructor(N={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,N=this.opts={...N,...n(N)};const{es5:q,lines:k}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:y,es5:q,lines:k}),this.logger=K(N.logger);const i=N.validateFormats;N.validateFormats=!1,this.RULES=(0,o.getRules)(),p.call(this,a,N,"NOT SUPPORTED"),p.call(this,s,N,"DEPRECATED","warn"),this._metaOpts=D.call(this),N.formats&&j.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),N.keywords&&C.call(this,N.keywords),typeof N.meta=="object"&&this.addMetaSchema(N.meta),$.call(this),N.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:N,meta:q,schemaId:k}=this.opts;let i=E;k==="id"&&(i={...E},i.id=i.$id,delete i.$id),q&&N&&this.addMetaSchema(i,i[k],!1)}defaultMeta(){const{meta:N,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof N=="object"?N[q]||N:void 0}validate(N,q){let k;if(typeof N=="string"){if(k=this.getSchema(N),!k)throw new Error(`no schema with key or ref "${N}"`)}else k=this.compile(N);const i=k(q);return"$async"in k||(this.errors=k.errors),i}compile(N,q){const k=this._addSchema(N,q);return k.validate||this._compileSchemaEnv(k)}compileAsync(N,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:k}=this.opts;return i.call(this,N,q);async function i(W,R){await w.call(this,W.$schema);const O=this._addSchema(W,R);return O.validate||T.call(this,O)}async function w(W){W&&!this.getSchema(W)&&await i.call(this,{$ref:W},!0)}async function T(W){try{return this._compileSchemaEnv(W)}catch(R){if(!(R instanceof _.default))throw R;return V.call(this,R),await z.call(this,R.missingSchema),T.call(this,W)}}function V({missingSchema:W,missingRef:R}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${R} cannot be resolved`)}async function z(W){const R=await Q.call(this,W);this.refs[W]||await w.call(this,R.$schema),this.refs[W]||this.addSchema(R,W,q)}async function Q(W){const R=this._loading[W];if(R)return R;try{return await(this._loading[W]=k(W))}finally{delete this._loading[W]}}}addSchema(N,q,k,i=this.opts.validateSchema){if(Array.isArray(N)){for(const T of N)this.addSchema(T,void 0,k,i);return this}let w;if(typeof N=="object"){const{schemaId:T}=this.opts;if(w=N[T],w!==void 0&&typeof w!="string")throw new Error(`schema ${T} must be string`)}return q=(0,d.normalizeId)(q||w),this._checkUnique(q),this.schemas[q]=this._addSchema(N,k,q,i,!0),this}addMetaSchema(N,q,k=this.opts.validateSchema){return this.addSchema(N,q,!0,k),this}validateSchema(N,q){if(typeof N=="boolean")return!0;let k;if(k=N.$schema,k!==void 0&&typeof k!="string")throw new Error("$schema must be a string");if(k=k||this.opts.defaultMeta||this.defaultMeta(),!k)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(k,N);if(!i&&q){const w="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(w);else throw new Error(w)}return i}getSchema(N){let q;for(;typeof(q=f.call(this,N))=="string";)N=q;if(q===void 0){const{schemaId:k}=this.opts,i=new h.SchemaEnv({schema:{},schemaId:k});if(q=h.resolveSchema.call(this,i,N),!q)return;this.refs[N]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(N){if(N instanceof RegExp)return this._removeAllSchemas(this.schemas,N),this._removeAllSchemas(this.refs,N),this;switch(typeof N){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=f.call(this,N);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[N],delete this.refs[N],this}case"object":{const q=N;this._cache.delete(q);let k=N[this.opts.schemaId];return k&&(k=(0,d.normalizeId)(k),delete this.schemas[k],delete this.refs[k]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(N){for(const q of N)this.addKeyword(q);return this}addKeyword(N,q){let k;if(typeof N=="string")k=N,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=k);else if(typeof N=="object"&&q===void 0){if(q=N,k=q.keyword,Array.isArray(k)&&!k.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,k,q),!q)return(0,m.eachItem)(k,w=>x.call(this,w)),this;me.call(this,q);const i={...q,type:(0,g.getJSONTypes)(q.type),schemaType:(0,g.getJSONTypes)(q.schemaType)};return(0,m.eachItem)(k,i.type.length===0?w=>x.call(this,w,i):w=>i.type.forEach(T=>x.call(this,w,i,T))),this}getKeyword(N){const q=this.RULES.all[N];return typeof q=="object"?q.definition:!!q}removeKeyword(N){const{RULES:q}=this;delete q.keywords[N],delete q.all[N];for(const k of q.rules){const i=k.rules.findIndex(w=>w.keyword===N);i>=0&&k.rules.splice(i,1)}return this}addFormat(N,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[N]=q,this}errorsText(N=this.errors,{separator:q=", ",dataVar:k="data"}={}){return!N||N.length===0?"No errors":N.map(i=>`${k}${i.instancePath} ${i.message}`).reduce((i,w)=>i+q+w)}$dataMetaSchema(N,q){const k=this.RULES.all;N=JSON.parse(JSON.stringify(N));for(const i of q){const w=i.split("/").slice(1);let T=N;for(const V of w)T=T[V];for(const V in k){const z=k[V];if(typeof z!="object")continue;const{$data:Q}=z.definition,W=T[V];Q&&W&&(T[V]=ve(W))}}return N}_removeAllSchemas(N,q){for(const k in N){const i=N[k];(!q||q.test(k))&&(typeof i=="string"?delete N[k]:i&&!i.meta&&(this._cache.delete(i.schema),delete N[k]))}}_addSchema(N,q,k,i=this.opts.validateSchema,w=this.opts.addUsedSchema){let T;const{schemaId:V}=this.opts;if(typeof N=="object")T=N[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof N!="boolean")throw new Error("schema must be object or boolean")}let z=this._cache.get(N);if(z!==void 0)return z;k=(0,d.normalizeId)(T||k);const Q=d.getSchemaRefs.call(this,N,k);return z=new h.SchemaEnv({schema:N,schemaId:V,meta:q,baseId:k,localRefs:Q}),this._cache.set(z.schema,z),w&&!k.startsWith("#")&&(k&&this._checkUnique(k),this.refs[k]=z),i&&this.validateSchema(N,!0),z}_checkUnique(N){if(this.schemas[N]||this.refs[N])throw new Error(`schema with key or id "${N}" already exists`)}_compileSchemaEnv(N){if(N.meta?this._compileMetaSchema(N):h.compileSchema.call(this,N),!N.validate)throw new Error("ajv implementation error");return N.validate}_compileMetaSchema(N){const q=this.opts;this.opts=this._metaOpts;try{h.compileSchema.call(this,N)}finally{this.opts=q}}}l.ValidationError=u.default,l.MissingRefError=_.default,e.default=l;function p(A,N,q,k="error"){for(const i in A){const w=i;w in N&&this.logger[k](`${q}: option ${i}. ${A[w]}`)}}function f(A){return A=(0,d.normalizeId)(A),this.schemas[A]||this.refs[A]}function $(){const A=this.opts.schemas;if(A)if(Array.isArray(A))this.addSchema(A);else for(const N in A)this.addSchema(A[N],N)}function j(){for(const A in this.opts.formats){const N=this.opts.formats[A];N&&this.addFormat(A,N)}}function C(A){if(Array.isArray(A)){this.addVocabulary(A);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const N in A){const q=A[N];q.keyword||(q.keyword=N),this.addKeyword(q)}}function D(){const A={...this.opts};for(const N of b)delete A[N];return A}const F={log(){},warn(){},error(){}};function K(A){if(A===!1)return F;if(A===void 0)return console;if(A.log&&A.warn&&A.error)return A;throw new Error("logger must implement log, warn and error methods")}const L=/^[a-z_$][a-z0-9_$:-]*$/i;function B(A,N){const{RULES:q}=this;if((0,m.eachItem)(A,k=>{if(q.keywords[k])throw new Error(`Keyword ${k} is already defined`);if(!L.test(k))throw new Error(`Keyword ${k} has invalid name`)}),!!N&&N.$data&&!("code"in N||"validate"in N))throw new Error('$data keyword must have "code" or "validate" function')}function x(A,N,q){var k;const i=N?.post;if(q&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:w}=this;let T=i?w.post:w.rules.find(({type:z})=>z===q);if(T||(T={type:q,rules:[]},w.rules.push(T)),w.keywords[A]=!0,!N)return;const V={keyword:A,definition:{...N,type:(0,g.getJSONTypes)(N.type),schemaType:(0,g.getJSONTypes)(N.schemaType)}};N.before?he.call(this,T,V,N.before):T.rules.push(V),w.all[A]=V,(k=N.implements)===null||k===void 0||k.forEach(z=>this.addKeyword(z))}function he(A,N,q){const k=A.rules.findIndex(i=>i.keyword===q);k>=0?A.rules.splice(k,0,N):(A.rules.push(N),this.logger.warn(`rule ${q} is not defined`))}function me(A){let{metaSchema:N}=A;N!==void 0&&(A.$data&&this.opts.$data&&(N=ve(N)),A.validateSchema=this.compile(N,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ve(A){return{anyOf:[A,Z]}}})(kt)),kt}var ze={},Le={},Ke={},kr;function Zn(){if(kr)return Ke;kr=1,Object.defineProperty(Ke,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Ke.default=e,Ke}var _e={},jr;function xn(){if(jr)return _e;jr=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.callRef=_e.getValidate=void 0;const e=St(),r=fe(),v=J(),u=$e(),_=Xt(),o=X(),h={keyword:"$ref",schemaType:"string",code(g){const{gen:m,schema:E,it:S}=g,{baseId:P,schemaEnv:b,validateName:y,opts:a,self:s}=S,{root:t}=b;if((E==="#"||E==="#/")&&P===t.baseId)return l();const n=_.resolveRef.call(s,t,P,E);if(n===void 0)throw new e.default(S.opts.uriResolver,P,E);if(n instanceof _.SchemaEnv)return p(n);return f(n);function l(){if(b===t)return d(g,y,b,b.$async);const $=m.scopeValue("root",{ref:t});return d(g,(0,v._)`${$}.validate`,t,t.$async)}function p($){const j=c(g,$);d(g,j,$,$.$async)}function f($){const j=m.scopeValue("schema",a.code.source===!0?{ref:$,code:(0,v.stringify)($)}:{ref:$}),C=m.name("valid"),D=g.subschema({schema:$,dataTypes:[],schemaPath:v.nil,topSchemaRef:j,errSchemaPath:E},C);g.mergeEvaluated(D),g.ok(C)}}};function c(g,m){const{gen:E}=g;return m.validate?E.scopeValue("validate",{ref:m.validate}):(0,v._)`${E.scopeValue("wrapper",{ref:m})}.validate`}_e.getValidate=c;function d(g,m,E,S){const{gen:P,it:b}=g,{allErrors:y,schemaEnv:a,opts:s}=b,t=s.passContext?u.default.this:v.nil;S?n():l();function n(){if(!a.$async)throw new Error("async schema referenced by sync schema");const $=P.let("valid");P.try(()=>{P.code((0,v._)`await ${(0,r.callValidateCode)(g,m,t)}`),f(m),y||P.assign($,!0)},j=>{P.if((0,v._)`!(${j} instanceof ${b.ValidationError})`,()=>P.throw(j)),p(j),y||P.assign($,!1)}),g.ok($)}function l(){g.result((0,r.callValidateCode)(g,m,t),()=>f(m),()=>p(m))}function p($){const j=(0,v._)`${$}.errors`;P.assign(u.default.vErrors,(0,v._)`${u.default.vErrors} === null ? ${j} : ${u.default.vErrors}.concat(${j})`),P.assign(u.default.errors,(0,v._)`${u.default.vErrors}.length`)}function f($){var j;if(!b.opts.unevaluated)return;const C=(j=E?.validate)===null||j===void 0?void 0:j.evaluated;if(b.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(b.props=o.mergeEvaluated.props(P,C.props,b.props));else{const D=P.var("props",(0,v._)`${$}.evaluated.props`);b.props=o.mergeEvaluated.props(P,D,b.props,v.Name)}if(b.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(b.items=o.mergeEvaluated.items(P,C.items,b.items));else{const D=P.var("items",(0,v._)`${$}.evaluated.items`);b.items=o.mergeEvaluated.items(P,D,b.items,v.Name)}}}return _e.callRef=d,_e.default=h,_e}var Tr;function es(){if(Tr)return Le;Tr=1,Object.defineProperty(Le,"__esModule",{value:!0});const e=Zn(),r=xn(),v=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,r.default];return Le.default=v,Le}var He={},Ge={},Ir;function ts(){if(Ir)return Ge;Ir=1,Object.defineProperty(Ge,"__esModule",{value:!0});const e=J(),r=e.operators,v={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},u={message:({keyword:o,schemaCode:h})=>(0,e.str)`must be ${v[o].okStr} ${h}`,params:({keyword:o,schemaCode:h})=>(0,e._)`{comparison: ${v[o].okStr}, limit: ${h}}`},_={keyword:Object.keys(v),type:"number",schemaType:"number",$data:!0,error:u,code(o){const{keyword:h,data:c,schemaCode:d}=o;o.fail$data((0,e._)`${c} ${v[h].fail} ${d} || isNaN(${c})`)}};return Ge.default=_,Ge}var Je={},qr;function rs(){if(qr)return Je;qr=1,Object.defineProperty(Je,"__esModule",{value:!0});const e=J(),v={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:u})=>(0,e.str)`must be multiple of ${u}`,params:({schemaCode:u})=>(0,e._)`{multipleOf: ${u}}`},code(u){const{gen:_,data:o,schemaCode:h,it:c}=u,d=c.opts.multipleOfPrecision,g=_.let("res"),m=d?(0,e._)`Math.abs(Math.round(${g}) - ${g}) > 1e-${d}`:(0,e._)`${g} !== parseInt(${g})`;u.fail$data((0,e._)`(${h} === 0 || (${g} = ${o}/${h}, ${m}))`)}};return Je.default=v,Je}var We={},Be={},Cr;function ns(){if(Cr)return Be;Cr=1,Object.defineProperty(Be,"__esModule",{value:!0});function e(r){const v=r.length;let u=0,_=0,o;for(;_<v;)u++,o=r.charCodeAt(_++),o>=55296&&o<=56319&&_<v&&(o=r.charCodeAt(_),(o&64512)===56320&&_++);return u}return Be.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',Be}var Ar;function ss(){if(Ar)return We;Ar=1,Object.defineProperty(We,"__esModule",{value:!0});const e=J(),r=X(),v=ns(),_={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:h}){const c=o==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${c} than ${h} characters`},params:({schemaCode:o})=>(0,e._)`{limit: ${o}}`},code(o){const{keyword:h,data:c,schemaCode:d,it:g}=o,m=h==="maxLength"?e.operators.GT:e.operators.LT,E=g.opts.unicode===!1?(0,e._)`${c}.length`:(0,e._)`${(0,r.useFunc)(o.gen,v.default)}(${c})`;o.fail$data((0,e._)`${E} ${m} ${d}`)}};return We.default=_,We}var Xe={},Mr;function as(){if(Mr)return Xe;Mr=1,Object.defineProperty(Xe,"__esModule",{value:!0});const e=fe(),r=J(),u={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:_})=>(0,r.str)`must match pattern "${_}"`,params:({schemaCode:_})=>(0,r._)`{pattern: ${_}}`},code(_){const{data:o,$data:h,schema:c,schemaCode:d,it:g}=_,m=g.opts.unicodeRegExp?"u":"",E=h?(0,r._)`(new RegExp(${d}, ${m}))`:(0,e.usePattern)(_,c);_.fail$data((0,r._)`!${E}.test(${o})`)}};return Xe.default=u,Xe}var Qe={},Dr;function os(){if(Dr)return Qe;Dr=1,Object.defineProperty(Qe,"__esModule",{value:!0});const e=J(),v={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:_}){const o=u==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${_} properties`},params:({schemaCode:u})=>(0,e._)`{limit: ${u}}`},code(u){const{keyword:_,data:o,schemaCode:h}=u,c=_==="maxProperties"?e.operators.GT:e.operators.LT;u.fail$data((0,e._)`Object.keys(${o}).length ${c} ${h}`)}};return Qe.default=v,Qe}var Ye={},Vr;function is(){if(Vr)return Ye;Vr=1,Object.defineProperty(Ye,"__esModule",{value:!0});const e=fe(),r=J(),v=X(),_={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,r.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,r._)`{missingProperty: ${o}}`},code(o){const{gen:h,schema:c,schemaCode:d,data:g,$data:m,it:E}=o,{opts:S}=E;if(!m&&c.length===0)return;const P=c.length>=S.loopRequired;if(E.allErrors?b():y(),S.strictRequired){const t=o.parentSchema.properties,{definedProperties:n}=o.it;for(const l of c)if(t?.[l]===void 0&&!n.has(l)){const p=E.schemaEnv.baseId+E.errSchemaPath,f=`required property "${l}" is not defined at "${p}" (strictRequired)`;(0,v.checkStrictMode)(E,f,E.opts.strictRequired)}}function b(){if(P||m)o.block$data(r.nil,a);else for(const t of c)(0,e.checkReportMissingProp)(o,t)}function y(){const t=h.let("missing");if(P||m){const n=h.let("valid",!0);o.block$data(n,()=>s(t,n)),o.ok(n)}else h.if((0,e.checkMissingProp)(o,c,t)),(0,e.reportMissingProp)(o,t),h.else()}function a(){h.forOf("prop",d,t=>{o.setParams({missingProperty:t}),h.if((0,e.noPropertyInData)(h,g,t,S.ownProperties),()=>o.error())})}function s(t,n){o.setParams({missingProperty:t}),h.forOf(t,d,()=>{h.assign(n,(0,e.propertyInData)(h,g,t,S.ownProperties)),h.if((0,r.not)(n),()=>{o.error(),h.break()})},r.nil)}}};return Ye.default=_,Ye}var Ze={},Fr;function us(){if(Fr)return Ze;Fr=1,Object.defineProperty(Ze,"__esModule",{value:!0});const e=J(),v={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:_}){const o=u==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${_} items`},params:({schemaCode:u})=>(0,e._)`{limit: ${u}}`},code(u){const{keyword:_,data:o,schemaCode:h}=u,c=_==="maxItems"?e.operators.GT:e.operators.LT;u.fail$data((0,e._)`${o}.length ${c} ${h}`)}};return Ze.default=v,Ze}var xe={},et={},Ur;function Qt(){if(Ur)return et;Ur=1,Object.defineProperty(et,"__esModule",{value:!0});const e=_n();return e.code='require("ajv/dist/runtime/equal").default',et.default=e,et}var zr;function cs(){if(zr)return xe;zr=1,Object.defineProperty(xe,"__esModule",{value:!0});const e=wt(),r=J(),v=X(),u=Qt(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:h,j:c}})=>(0,r.str)`must NOT have duplicate items (items ## ${c} and ${h} are identical)`,params:({params:{i:h,j:c}})=>(0,r._)`{i: ${h}, j: ${c}}`},code(h){const{gen:c,data:d,$data:g,schema:m,parentSchema:E,schemaCode:S,it:P}=h;if(!g&&!m)return;const b=c.let("valid"),y=E.items?(0,e.getSchemaTypes)(E.items):[];h.block$data(b,a,(0,r._)`${S} === false`),h.ok(b);function a(){const l=c.let("i",(0,r._)`${d}.length`),p=c.let("j");h.setParams({i:l,j:p}),c.assign(b,!0),c.if((0,r._)`${l} > 1`,()=>(s()?t:n)(l,p))}function s(){return y.length>0&&!y.some(l=>l==="object"||l==="array")}function t(l,p){const f=c.name("item"),$=(0,e.checkDataTypes)(y,f,P.opts.strictNumbers,e.DataType.Wrong),j=c.const("indices",(0,r._)`{}`);c.for((0,r._)`;${l}--;`,()=>{c.let(f,(0,r._)`${d}[${l}]`),c.if($,(0,r._)`continue`),y.length>1&&c.if((0,r._)`typeof ${f} == "string"`,(0,r._)`${f} += "_"`),c.if((0,r._)`typeof ${j}[${f}] == "number"`,()=>{c.assign(p,(0,r._)`${j}[${f}]`),h.error(),c.assign(b,!1).break()}).code((0,r._)`${j}[${f}] = ${l}`)})}function n(l,p){const f=(0,v.useFunc)(c,u.default),$=c.name("outer");c.label($).for((0,r._)`;${l}--;`,()=>c.for((0,r._)`${p} = ${l}; ${p}--;`,()=>c.if((0,r._)`${f}(${d}[${l}], ${d}[${p}])`,()=>{h.error(),c.assign(b,!1).break($)})))}}};return xe.default=o,xe}var tt={},Lr;function ls(){if(Lr)return tt;Lr=1,Object.defineProperty(tt,"__esModule",{value:!0});const e=J(),r=X(),v=Qt(),_={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,e._)`{allowedValue: ${o}}`},code(o){const{gen:h,data:c,$data:d,schemaCode:g,schema:m}=o;d||m&&typeof m=="object"?o.fail$data((0,e._)`!${(0,r.useFunc)(h,v.default)}(${c}, ${g})`):o.fail((0,e._)`${m} !== ${c}`)}};return tt.default=_,tt}var rt={},Kr;function ds(){if(Kr)return rt;Kr=1,Object.defineProperty(rt,"__esModule",{value:!0});const e=J(),r=X(),v=Qt(),_={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,e._)`{allowedValues: ${o}}`},code(o){const{gen:h,data:c,$data:d,schema:g,schemaCode:m,it:E}=o;if(!d&&g.length===0)throw new Error("enum must have non-empty array");const S=g.length>=E.opts.loopEnum;let P;const b=()=>P??(P=(0,r.useFunc)(h,v.default));let y;if(S||d)y=h.let("valid"),o.block$data(y,a);else{if(!Array.isArray(g))throw new Error("ajv implementation error");const t=h.const("vSchema",m);y=(0,e.or)(...g.map((n,l)=>s(t,l)))}o.pass(y);function a(){h.assign(y,!1),h.forOf("v",m,t=>h.if((0,e._)`${b()}(${c}, ${t})`,()=>h.assign(y,!0).break()))}function s(t,n){const l=g[n];return typeof l=="object"&&l!==null?(0,e._)`${b()}(${c}, ${t}[${n}])`:(0,e._)`${c} === ${l}`}}};return rt.default=_,rt}var Hr;function fs(){if(Hr)return He;Hr=1,Object.defineProperty(He,"__esModule",{value:!0});const e=ts(),r=rs(),v=ss(),u=as(),_=os(),o=is(),h=us(),c=cs(),d=ls(),g=ds(),m=[e.default,r.default,v.default,u.default,_.default,o.default,h.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,g.default];return He.default=m,He}var nt={},Se={},Gr;function $n(){if(Gr)return Se;Gr=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.validateAdditionalItems=void 0;const e=J(),r=X(),u={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{parentSchema:h,it:c}=o,{items:d}=h;if(!Array.isArray(d)){(0,r.checkStrictMode)(c,'"additionalItems" is ignored when "items" is not an array of schemas');return}_(o,d)}};function _(o,h){const{gen:c,schema:d,data:g,keyword:m,it:E}=o;E.items=!0;const S=c.const("len",(0,e._)`${g}.length`);if(d===!1)o.setParams({len:h.length}),o.pass((0,e._)`${S} <= ${h.length}`);else if(typeof d=="object"&&!(0,r.alwaysValidSchema)(E,d)){const b=c.var("valid",(0,e._)`${S} <= ${h.length}`);c.if((0,e.not)(b),()=>P(b)),o.ok(b)}function P(b){c.forRange("i",h.length,S,y=>{o.subschema({keyword:m,dataProp:y,dataPropType:r.Type.Num},b),E.allErrors||c.if((0,e.not)(b),()=>c.break())})}}return Se.validateAdditionalItems=_,Se.default=u,Se}var st={},Re={},Jr;function wn(){if(Jr)return Re;Jr=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.validateTuple=void 0;const e=J(),r=X(),v=fe(),u={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:h,it:c}=o;if(Array.isArray(h))return _(o,"additionalItems",h);c.items=!0,!(0,r.alwaysValidSchema)(c,h)&&o.ok((0,v.validateArray)(o))}};function _(o,h,c=o.schema){const{gen:d,parentSchema:g,data:m,keyword:E,it:S}=o;y(g),S.opts.unevaluated&&c.length&&S.items!==!0&&(S.items=r.mergeEvaluated.items(d,c.length,S.items));const P=d.name("valid"),b=d.const("len",(0,e._)`${m}.length`);c.forEach((a,s)=>{(0,r.alwaysValidSchema)(S,a)||(d.if((0,e._)`${b} > ${s}`,()=>o.subschema({keyword:E,schemaProp:s,dataProp:s},P)),o.ok(P))});function y(a){const{opts:s,errSchemaPath:t}=S,n=c.length,l=n===a.minItems&&(n===a.maxItems||a[h]===!1);if(s.strictTuples&&!l){const p=`"${E}" is ${n}-tuple, but minItems or maxItems/${h} are not specified or different at path "${t}"`;(0,r.checkStrictMode)(S,p,s.strictTuples)}}}return Re.validateTuple=_,Re.default=u,Re}var Wr;function hs(){if(Wr)return st;Wr=1,Object.defineProperty(st,"__esModule",{value:!0});const e=wn(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:v=>(0,e.validateTuple)(v,"items")};return st.default=r,st}var at={},Br;function ms(){if(Br)return at;Br=1,Object.defineProperty(at,"__esModule",{value:!0});const e=J(),r=X(),v=fe(),u=$n(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:h}})=>(0,e.str)`must NOT have more than ${h} items`,params:({params:{len:h}})=>(0,e._)`{limit: ${h}}`},code(h){const{schema:c,parentSchema:d,it:g}=h,{prefixItems:m}=d;g.items=!0,!(0,r.alwaysValidSchema)(g,c)&&(m?(0,u.validateAdditionalItems)(h,m):h.ok((0,v.validateArray)(h)))}};return at.default=o,at}var ot={},Xr;function ps(){if(Xr)return ot;Xr=1,Object.defineProperty(ot,"__esModule",{value:!0});const e=J(),r=X(),u={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:_,max:o}})=>o===void 0?(0,e.str)`must contain at least ${_} valid item(s)`:(0,e.str)`must contain at least ${_} and no more than ${o} valid item(s)`,params:({params:{min:_,max:o}})=>o===void 0?(0,e._)`{minContains: ${_}}`:(0,e._)`{minContains: ${_}, maxContains: ${o}}`},code(_){const{gen:o,schema:h,parentSchema:c,data:d,it:g}=_;let m,E;const{minContains:S,maxContains:P}=c;g.opts.next?(m=S===void 0?1:S,E=P):m=1;const b=o.const("len",(0,e._)`${d}.length`);if(_.setParams({min:m,max:E}),E===void 0&&m===0){(0,r.checkStrictMode)(g,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(E!==void 0&&m>E){(0,r.checkStrictMode)(g,'"minContains" > "maxContains" is always invalid'),_.fail();return}if((0,r.alwaysValidSchema)(g,h)){let n=(0,e._)`${b} >= ${m}`;E!==void 0&&(n=(0,e._)`${n} && ${b} <= ${E}`),_.pass(n);return}g.items=!0;const y=o.name("valid");E===void 0&&m===1?s(y,()=>o.if(y,()=>o.break())):m===0?(o.let(y,!0),E!==void 0&&o.if((0,e._)`${d}.length > 0`,a)):(o.let(y,!1),a()),_.result(y,()=>_.reset());function a(){const n=o.name("_valid"),l=o.let("count",0);s(n,()=>o.if(n,()=>t(l)))}function s(n,l){o.forRange("i",0,b,p=>{_.subschema({keyword:"contains",dataProp:p,dataPropType:r.Type.Num,compositeRule:!0},n),l()})}function t(n){o.code((0,e._)`${n}++`),E===void 0?o.if((0,e._)`${n} >= ${m}`,()=>o.assign(y,!0).break()):(o.if((0,e._)`${n} > ${E}`,()=>o.assign(y,!1).break()),m===1?o.assign(y,!0):o.if((0,e._)`${n} >= ${m}`,()=>o.assign(y,!0)))}}};return ot.default=u,ot}var Ft={},Qr;function ys(){return Qr||(Qr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const r=J(),v=X(),u=fe();e.error={message:({params:{property:d,depsCount:g,deps:m}})=>{const E=g===1?"property":"properties";return(0,r.str)`must have ${E} ${m} when property ${d} is present`},params:({params:{property:d,depsCount:g,deps:m,missingProperty:E}})=>(0,r._)`{property: ${d},
    missingProperty: ${E},
    depsCount: ${g},
    deps: ${m}}`};const _={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[g,m]=o(d);h(d,g),c(d,m)}};function o({schema:d}){const g={},m={};for(const E in d){if(E==="__proto__")continue;const S=Array.isArray(d[E])?g:m;S[E]=d[E]}return[g,m]}function h(d,g=d.schema){const{gen:m,data:E,it:S}=d;if(Object.keys(g).length===0)return;const P=m.let("missing");for(const b in g){const y=g[b];if(y.length===0)continue;const a=(0,u.propertyInData)(m,E,b,S.opts.ownProperties);d.setParams({property:b,depsCount:y.length,deps:y.join(", ")}),S.allErrors?m.if(a,()=>{for(const s of y)(0,u.checkReportMissingProp)(d,s)}):(m.if((0,r._)`${a} && (${(0,u.checkMissingProp)(d,y,P)})`),(0,u.reportMissingProp)(d,P),m.else())}}e.validatePropertyDeps=h;function c(d,g=d.schema){const{gen:m,data:E,keyword:S,it:P}=d,b=m.name("valid");for(const y in g)(0,v.alwaysValidSchema)(P,g[y])||(m.if((0,u.propertyInData)(m,E,y,P.opts.ownProperties),()=>{const a=d.subschema({keyword:S,schemaProp:y},b);d.mergeValidEvaluated(a,b)},()=>m.var(b,!0)),d.ok(b))}e.validateSchemaDeps=c,e.default=_})(Ft)),Ft}var it={},Yr;function gs(){if(Yr)return it;Yr=1,Object.defineProperty(it,"__esModule",{value:!0});const e=J(),r=X(),u={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:_})=>(0,e._)`{propertyName: ${_.propertyName}}`},code(_){const{gen:o,schema:h,data:c,it:d}=_;if((0,r.alwaysValidSchema)(d,h))return;const g=o.name("valid");o.forIn("key",c,m=>{_.setParams({propertyName:m}),_.subschema({keyword:"propertyNames",data:m,dataTypes:["string"],propertyName:m,compositeRule:!0},g),o.if((0,e.not)(g),()=>{_.error(!0),d.allErrors||o.break()})}),_.ok(g)}};return it.default=u,it}var ut={},Zr;function bn(){if(Zr)return ut;Zr=1,Object.defineProperty(ut,"__esModule",{value:!0});const e=fe(),r=J(),v=$e(),u=X(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:h})=>(0,r._)`{additionalProperty: ${h.additionalProperty}}`},code(h){const{gen:c,schema:d,parentSchema:g,data:m,errsCount:E,it:S}=h;if(!E)throw new Error("ajv implementation error");const{allErrors:P,opts:b}=S;if(S.props=!0,b.removeAdditional!=="all"&&(0,u.alwaysValidSchema)(S,d))return;const y=(0,e.allSchemaProperties)(g.properties),a=(0,e.allSchemaProperties)(g.patternProperties);s(),h.ok((0,r._)`${E} === ${v.default.errors}`);function s(){c.forIn("key",m,f=>{!y.length&&!a.length?l(f):c.if(t(f),()=>l(f))})}function t(f){let $;if(y.length>8){const j=(0,u.schemaRefOrVal)(S,g.properties,"properties");$=(0,e.isOwnProperty)(c,j,f)}else y.length?$=(0,r.or)(...y.map(j=>(0,r._)`${f} === ${j}`)):$=r.nil;return a.length&&($=(0,r.or)($,...a.map(j=>(0,r._)`${(0,e.usePattern)(h,j)}.test(${f})`))),(0,r.not)($)}function n(f){c.code((0,r._)`delete ${m}[${f}]`)}function l(f){if(b.removeAdditional==="all"||b.removeAdditional&&d===!1){n(f);return}if(d===!1){h.setParams({additionalProperty:f}),h.error(),P||c.break();return}if(typeof d=="object"&&!(0,u.alwaysValidSchema)(S,d)){const $=c.name("valid");b.removeAdditional==="failing"?(p(f,$,!1),c.if((0,r.not)($),()=>{h.reset(),n(f)})):(p(f,$),P||c.if((0,r.not)($),()=>c.break()))}}function p(f,$,j){const C={keyword:"additionalProperties",dataProp:f,dataPropType:u.Type.Str};j===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),h.subschema(C,$)}}};return ut.default=o,ut}var ct={},xr;function vs(){if(xr)return ct;xr=1,Object.defineProperty(ct,"__esModule",{value:!0});const e=Pt(),r=fe(),v=X(),u=bn(),_={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:h,schema:c,parentSchema:d,data:g,it:m}=o;m.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&u.default.code(new e.KeywordCxt(m,u.default,"additionalProperties"));const E=(0,r.allSchemaProperties)(c);for(const a of E)m.definedProperties.add(a);m.opts.unevaluated&&E.length&&m.props!==!0&&(m.props=v.mergeEvaluated.props(h,(0,v.toHash)(E),m.props));const S=E.filter(a=>!(0,v.alwaysValidSchema)(m,c[a]));if(S.length===0)return;const P=h.name("valid");for(const a of S)b(a)?y(a):(h.if((0,r.propertyInData)(h,g,a,m.opts.ownProperties)),y(a),m.allErrors||h.else().var(P,!0),h.endIf()),o.it.definedProperties.add(a),o.ok(P);function b(a){return m.opts.useDefaults&&!m.compositeRule&&c[a].default!==void 0}function y(a){o.subschema({keyword:"properties",schemaProp:a,dataProp:a},P)}}};return ct.default=_,ct}var lt={},en;function _s(){if(en)return lt;en=1,Object.defineProperty(lt,"__esModule",{value:!0});const e=fe(),r=J(),v=X(),u=X(),_={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:h,schema:c,data:d,parentSchema:g,it:m}=o,{opts:E}=m,S=(0,e.allSchemaProperties)(c),P=S.filter(l=>(0,v.alwaysValidSchema)(m,c[l]));if(S.length===0||P.length===S.length&&(!m.opts.unevaluated||m.props===!0))return;const b=E.strictSchema&&!E.allowMatchingProperties&&g.properties,y=h.name("valid");m.props!==!0&&!(m.props instanceof r.Name)&&(m.props=(0,u.evaluatedPropsToName)(h,m.props));const{props:a}=m;s();function s(){for(const l of S)b&&t(l),m.allErrors?n(l):(h.var(y,!0),n(l),h.if(y))}function t(l){for(const p in b)new RegExp(l).test(p)&&(0,v.checkStrictMode)(m,`property ${p} matches pattern ${l} (use allowMatchingProperties)`)}function n(l){h.forIn("key",d,p=>{h.if((0,r._)`${(0,e.usePattern)(o,l)}.test(${p})`,()=>{const f=P.includes(l);f||o.subschema({keyword:"patternProperties",schemaProp:l,dataProp:p,dataPropType:u.Type.Str},y),m.opts.unevaluated&&a!==!0?h.assign((0,r._)`${a}[${p}]`,!0):!f&&!m.allErrors&&h.if((0,r.not)(y),()=>h.break())})})}}};return lt.default=_,lt}var dt={},tn;function $s(){if(tn)return dt;tn=1,Object.defineProperty(dt,"__esModule",{value:!0});const e=X(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(v){const{gen:u,schema:_,it:o}=v;if((0,e.alwaysValidSchema)(o,_)){v.fail();return}const h=u.name("valid");v.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},h),v.failResult(h,()=>v.reset(),()=>v.error())},error:{message:"must NOT be valid"}};return dt.default=r,dt}var ft={},rn;function ws(){if(rn)return ft;rn=1,Object.defineProperty(ft,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:fe().validateUnion,error:{message:"must match a schema in anyOf"}};return ft.default=r,ft}var ht={},nn;function bs(){if(nn)return ht;nn=1,Object.defineProperty(ht,"__esModule",{value:!0});const e=J(),r=X(),u={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:_})=>(0,e._)`{passingSchemas: ${_.passing}}`},code(_){const{gen:o,schema:h,parentSchema:c,it:d}=_;if(!Array.isArray(h))throw new Error("ajv implementation error");if(d.opts.discriminator&&c.discriminator)return;const g=h,m=o.let("valid",!1),E=o.let("passing",null),S=o.name("_valid");_.setParams({passing:E}),o.block(P),_.result(m,()=>_.reset(),()=>_.error(!0));function P(){g.forEach((b,y)=>{let a;(0,r.alwaysValidSchema)(d,b)?o.var(S,!0):a=_.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},S),y>0&&o.if((0,e._)`${S} && ${m}`).assign(m,!1).assign(E,(0,e._)`[${E}, ${y}]`).else(),o.if(S,()=>{o.assign(m,!0),o.assign(E,y),a&&_.mergeEvaluated(a,e.Name)})})}}};return ht.default=u,ht}var mt={},sn;function Es(){if(sn)return mt;sn=1,Object.defineProperty(mt,"__esModule",{value:!0});const e=X(),r={keyword:"allOf",schemaType:"array",code(v){const{gen:u,schema:_,it:o}=v;if(!Array.isArray(_))throw new Error("ajv implementation error");const h=u.name("valid");_.forEach((c,d)=>{if((0,e.alwaysValidSchema)(o,c))return;const g=v.subschema({keyword:"allOf",schemaProp:d},h);v.ok(h),v.mergeEvaluated(g)})}};return mt.default=r,mt}var pt={},an;function Ps(){if(an)return pt;an=1,Object.defineProperty(pt,"__esModule",{value:!0});const e=J(),r=X(),u={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,e.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,e._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:h,parentSchema:c,it:d}=o;c.then===void 0&&c.else===void 0&&(0,r.checkStrictMode)(d,'"if" without "then" and "else" is ignored');const g=_(d,"then"),m=_(d,"else");if(!g&&!m)return;const E=h.let("valid",!0),S=h.name("_valid");if(P(),o.reset(),g&&m){const y=h.let("ifClause");o.setParams({ifClause:y}),h.if(S,b("then",y),b("else",y))}else g?h.if(S,b("then")):h.if((0,e.not)(S),b("else"));o.pass(E,()=>o.error(!0));function P(){const y=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},S);o.mergeEvaluated(y)}function b(y,a){return()=>{const s=o.subschema({keyword:y},S);h.assign(E,S),o.mergeValidEvaluated(s,E),a?h.assign(a,(0,e._)`${y}`):o.setParams({ifClause:y})}}}};function _(o,h){const c=o.schema[h];return c!==void 0&&!(0,r.alwaysValidSchema)(o,c)}return pt.default=u,pt}var yt={},on;function Ss(){if(on)return yt;on=1,Object.defineProperty(yt,"__esModule",{value:!0});const e=X(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:v,parentSchema:u,it:_}){u.if===void 0&&(0,e.checkStrictMode)(_,`"${v}" without "if" is ignored`)}};return yt.default=r,yt}var un;function Rs(){if(un)return nt;un=1,Object.defineProperty(nt,"__esModule",{value:!0});const e=$n(),r=hs(),v=wn(),u=ms(),_=ps(),o=ys(),h=gs(),c=bn(),d=vs(),g=_s(),m=$s(),E=ws(),S=bs(),P=Es(),b=Ps(),y=Ss();function a(s=!1){const t=[m.default,E.default,S.default,P.default,b.default,y.default,h.default,c.default,o.default,d.default,g.default];return s?t.push(r.default,u.default):t.push(e.default,v.default),t.push(_.default),t}return nt.default=a,nt}var gt={},vt={},cn;function Ns(){if(cn)return vt;cn=1,Object.defineProperty(vt,"__esModule",{value:!0});const e=J(),v={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:u})=>(0,e.str)`must match format "${u}"`,params:({schemaCode:u})=>(0,e._)`{format: ${u}}`},code(u,_){const{gen:o,data:h,$data:c,schema:d,schemaCode:g,it:m}=u,{opts:E,errSchemaPath:S,schemaEnv:P,self:b}=m;if(!E.validateFormats)return;c?y():a();function y(){const s=o.scopeValue("formats",{ref:b.formats,code:E.code.formats}),t=o.const("fDef",(0,e._)`${s}[${g}]`),n=o.let("fType"),l=o.let("format");o.if((0,e._)`typeof ${t} == "object" && !(${t} instanceof RegExp)`,()=>o.assign(n,(0,e._)`${t}.type || "string"`).assign(l,(0,e._)`${t}.validate`),()=>o.assign(n,(0,e._)`"string"`).assign(l,t)),u.fail$data((0,e.or)(p(),f()));function p(){return E.strictSchema===!1?e.nil:(0,e._)`${g} && !${l}`}function f(){const $=P.$async?(0,e._)`(${t}.async ? await ${l}(${h}) : ${l}(${h}))`:(0,e._)`${l}(${h})`,j=(0,e._)`(typeof ${l} == "function" ? ${$} : ${l}.test(${h}))`;return(0,e._)`${l} && ${l} !== true && ${n} === ${_} && !${j}`}}function a(){const s=b.formats[d];if(!s){p();return}if(s===!0)return;const[t,n,l]=f(s);t===_&&u.pass($());function p(){if(E.strictSchema===!1){b.logger.warn(j());return}throw new Error(j());function j(){return`unknown format "${d}" ignored in schema at path "${S}"`}}function f(j){const C=j instanceof RegExp?(0,e.regexpCode)(j):E.code.formats?(0,e._)`${E.code.formats}${(0,e.getProperty)(d)}`:void 0,D=o.scopeValue("formats",{key:d,ref:j,code:C});return typeof j=="object"&&!(j instanceof RegExp)?[j.type||"string",j.validate,(0,e._)`${D}.validate`]:["string",j,D]}function $(){if(typeof s=="object"&&!(s instanceof RegExp)&&s.async){if(!P.$async)throw new Error("async format in sync schema");return(0,e._)`await ${l}(${h})`}return typeof n=="function"?(0,e._)`${l}(${h})`:(0,e._)`${l}.test(${h})`}}}};return vt.default=v,vt}var ln;function Os(){if(ln)return gt;ln=1,Object.defineProperty(gt,"__esModule",{value:!0});const r=[Ns().default];return gt.default=r,gt}var Ee={},dn;function ks(){return dn||(dn=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.contentVocabulary=Ee.metadataVocabulary=void 0,Ee.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Ee.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Ee}var fn;function js(){if(fn)return ze;fn=1,Object.defineProperty(ze,"__esModule",{value:!0});const e=es(),r=fs(),v=Rs(),u=Os(),_=ks(),o=[e.default,r.default,(0,v.default)(),u.default,_.metadataVocabulary,_.contentVocabulary];return ze.default=o,ze}var _t={},Ae={},hn;function Ts(){if(hn)return Ae;hn=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.DiscrError=void 0;var e;return(function(r){r.Tag="tag",r.Mapping="mapping"})(e||(Ae.DiscrError=e={})),Ae}var mn;function Is(){if(mn)return _t;mn=1,Object.defineProperty(_t,"__esModule",{value:!0});const e=J(),r=Ts(),v=Xt(),u=St(),_=X(),h={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:c,tagName:d}})=>c===r.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:c,tag:d,tagName:g}})=>(0,e._)`{error: ${c}, tag: ${g}, tagValue: ${d}}`},code(c){const{gen:d,data:g,schema:m,parentSchema:E,it:S}=c,{oneOf:P}=E;if(!S.opts.discriminator)throw new Error("discriminator: requires discriminator option");const b=m.propertyName;if(typeof b!="string")throw new Error("discriminator: requires propertyName");if(m.mapping)throw new Error("discriminator: mapping is not supported");if(!P)throw new Error("discriminator: requires oneOf keyword");const y=d.let("valid",!1),a=d.const("tag",(0,e._)`${g}${(0,e.getProperty)(b)}`);d.if((0,e._)`typeof ${a} == "string"`,()=>s(),()=>c.error(!1,{discrError:r.DiscrError.Tag,tag:a,tagName:b})),c.ok(y);function s(){const l=n();d.if(!1);for(const p in l)d.elseIf((0,e._)`${a} === ${p}`),d.assign(y,t(l[p]));d.else(),c.error(!1,{discrError:r.DiscrError.Mapping,tag:a,tagName:b}),d.endIf()}function t(l){const p=d.name("valid"),f=c.subschema({keyword:"oneOf",schemaProp:l},p);return c.mergeEvaluated(f,e.Name),p}function n(){var l;const p={},f=j(E);let $=!0;for(let F=0;F<P.length;F++){let K=P[F];if(K?.$ref&&!(0,_.schemaHasRulesButRef)(K,S.self.RULES)){const B=K.$ref;if(K=v.resolveRef.call(S.self,S.schemaEnv.root,S.baseId,B),K instanceof v.SchemaEnv&&(K=K.schema),K===void 0)throw new u.default(S.opts.uriResolver,S.baseId,B)}const L=(l=K?.properties)===null||l===void 0?void 0:l[b];if(typeof L!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${b}"`);$=$&&(f||j(K)),C(L,F)}if(!$)throw new Error(`discriminator: "${b}" must be required`);return p;function j({required:F}){return Array.isArray(F)&&F.includes(b)}function C(F,K){if(F.const)D(F.const,K);else if(F.enum)for(const L of F.enum)D(L,K);else throw new Error(`discriminator: "properties/${b}" must have "const" or "enum"`)}function D(F,K){if(typeof F!="string"||F in p)throw new Error(`discriminator: "${b}" values must be unique strings`);p[F]=K}}}};return _t.default=h,_t}const qs="http://json-schema.org/draft-07/schema#",Cs="http://json-schema.org/draft-07/schema#",As="Core schema meta-schema",Ms={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ds=["object","boolean"],Vs={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Fs={$schema:qs,$id:Cs,title:As,definitions:Ms,type:Ds,properties:Vs,default:!0};var pn;function Us(){return pn||(pn=1,(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MissingRefError=r.ValidationError=r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=r.Ajv=void 0;const v=Yn(),u=js(),_=Is(),o=Fs,h=["/properties"],c="http://json-schema.org/draft-07/schema";class d extends v.default{_addVocabularies(){super._addVocabularies(),u.default.forEach(b=>this.addVocabulary(b)),this.opts.discriminator&&this.addKeyword(_.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const b=this.opts.$data?this.$dataMetaSchema(o,h):o;this.addMetaSchema(b,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}r.Ajv=d,e.exports=r=d,e.exports.Ajv=d,Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var g=Pt();Object.defineProperty(r,"KeywordCxt",{enumerable:!0,get:function(){return g.KeywordCxt}});var m=J();Object.defineProperty(r,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var E=Bt();Object.defineProperty(r,"ValidationError",{enumerable:!0,get:function(){return E.default}});var S=St();Object.defineProperty(r,"MissingRefError",{enumerable:!0,get:function(){return S.default}})})(Me,Me.exports)),Me.exports}var zs=Us();const Ys=Sn(zs);function Ls(e,r){return e.anyOf?[e.anyOf,r.anyOf]:[e.oneOf,r.oneOf]}function En(e,r,v,u){const _=u.enum,o=new Set(v("disabledEnumValues"));if(_){const d=v("enumNames");return _.map((g,m)=>{const E=d?.[m]??xt(g);return{id:er(e,r.path,m),label:E,value:g,disabled:o.has(g)}})}const[h,c]=Ls(u,r.uiSchema);return h&&h.map((d,g)=>{if(typeof d=="boolean")throw new Error(`Invalid enum definition in anyOf ${g}`);const m=Nn(d),E=On(e,c?.[g])["ui:options"]?.title??d.title??xt(m);return{id:er(e,r.path,g),schema:d,label:E,value:m,disabled:o.has(m)}})}function Ks(e,r){Jt(r,!0);let v=Ut(r,"value",15);const u=zt(),_=de(()=>Oe(u,"fieldTemplate",r.config)),o="selectWidget",h=de(()=>Oe(u,o,r.config)),c=Lt(u,()=>r.config,()=>Kt(u,r.config,v())),d=de(()=>En(u,r.config,r.uiOption,r.config.schema)??[]),g=de(()=>Ht(u,r.config.path));var m=ke(),E=je(m);Ne(E,()=>oe(_),(S,P)=>{P(S,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return r.uiOption},widgetType:o,get value(){return v()},get config(){return r.config},get errors(){return oe(g)},children:(b,y)=>{var a=ke(),s=je(a);Ne(s,()=>oe(h),(t,n)=>{n(t,{type:"widget",get handlers(){return c},get config(){return r.config},get errors(){return oe(g)},get uiOption(){return r.uiOption},get options(){return oe(d)},get value(){return v()},set value(l){v(l)}})}),Te(b,a)},$$slots:{default:!0}})}),Te(e,m),Wt()}Gt.enumField=Ks;function Hs(e,r){Jt(r,!0);let v=Ut(r,"value",15);const u=zt(),_=de(()=>Oe(u,"fieldTemplate",r.config)),o="checkboxesWidget",h=de(()=>Oe(u,o,r.config)),c=Lt(u,()=>r.config,()=>Kt(u,r.config,v())),d=de(()=>{const{items:S}=r.config.schema,P=kn(S)?S:{};return En(u,r.config,r.uiOption,P)??[]}),g=de(()=>Ht(u,r.config.path));var m=ke(),E=je(m);Ne(E,()=>oe(_),(S,P)=>{P(S,{type:"template",showTitle:!0,useLabel:!1,get uiOption(){return r.uiOption},widgetType:o,get value(){return v()},get config(){return r.config},get errors(){return oe(g)},children:(b,y)=>{var a=ke(),s=je(a),t=()=>v()??void 0,n=l=>v(l);Ne(s,()=>oe(h),(l,p)=>{p(l,{type:"widget",get handlers(){return c},get config(){return r.config},get errors(){return oe(g)},get value(){return t()},set value(f){n(f)},get options(){return oe(d)},get uiOption(){return r.uiOption}})}),Te(b,a)},$$slots:{default:!0}})}),Te(e,m),Wt()}Gt.multiEnumField=Hs;function Gs(e,r){Jt(r,!0);let v=Ut(r,"value",15);const u=zt(),_=de(()=>Oe(u,"fieldTemplate",r.config)),o="fileWidget",h=de(()=>Oe(u,o,r.config)),c=Lt(u,()=>r.config,()=>Kt(u,r.config,v())),d=In({initialOutput:void 0,getInput:()=>v(),setInput:S=>v(S),async toOutput(S,P){const b=new DataTransfer;return P&&await yn(u,S,b,P),b.files},async toInput(S,P){if(!(P===void 0||P.length===0)){if(!await jn(S,u,r.config,P))throw new Tn;return qn(S,P[0])}}}),g=de(()=>Ht(u,r.config.path));var m=ke(),E=je(m);Ne(E,()=>oe(_),(S,P)=>{P(S,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return r.uiOption},widgetType:o,get value(){return v()},get config(){return r.config},get errors(){return oe(g)},children:(b,y)=>{var a=ke(),s=je(a);Ne(s,()=>oe(h),(t,n)=>{n(t,{type:"widget",get processing(){return d.inputProcessing},get loading(){return d.outputProcessing},get uiOption(){return r.uiOption},get handlers(){return c},get errors(){return oe(g)},get config(){return r.config},multiple:!1,get value(){return d.current},set value(l){d.current=l}})}),Te(b,a)},$$slots:{default:!0}})}),Te(e,m),Wt()}Gt.fileField=Gs;export{Ys as A,Qs as a,zs as b,J as c,Us as r};
