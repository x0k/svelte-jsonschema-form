import{a6 as E,p as I,m as R,$ as C,n as _,a0 as U,a7 as W,a8 as k,y as O,a2 as H,a4 as M,a5 as V}from"./definitions.CL1ouEUh.js";import"./each.bMr9Erja.js";import{p as j,m,e as p,b as v,a as q,g as o,u as l,o as z}from"./render.TaN5B3yv.js";import{s as G}from"./snippet.DM-Ckgdh.js";import{d as J,f as K}from"./file.ZDArYH6N.js";async function T(u,e,c,a){const{name:t,blob:s}=await u[E](e,a);c.items.add(new File([s],t,{type:s.type}))}function te(u,e,c,a){const t=[];for(const s of a)t.push(T(u,e,c,s));return Promise.all(t)}const N="fileField";function Q(u,e){j(e,!0);const c=i=>{var n=m(),r=p(n);G(r,()=>o(h)??z,()=>t,()=>e.config,()=>({get current(){return a()},set current(f){a(f)}}),()=>o(g)),v(i,n)};let a=I(e,"value",15);const t=R(),s=l(()=>O(t,"fieldTemplate",e.config)),F="fileWidget",L=l(()=>O(t,F,e.config)),A=C(t,()=>e.config,()=>U(t,e.config,a())),d=J({initialOutput:void 0,getInput:()=>a(),setInput:i=>a(i),async toOutput(i,n){const r=new DataTransfer;return n&&await T(t,i,r,n),r.files},async toInput(i,n){if(n===void 0||n.length===0)return;const r=n[0];if(!await W(i,t,e.config,n))throw new k;return K(i,r)}}),g=l(()=>H(t,e.config.path)),h=l(()=>M(t,e.config,N));var w=m(),b=p(w);{let i=l(()=>o(h)&&c);_(b,()=>o(s),(n,r)=>{r(n,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:F,get value(){return a()},get config(){return e.config},get errors(){return o(g)},get action(){return o(i)},children:(f,S)=>{var y=m(),P=p(y);_(P,()=>o(L),(x,B)=>{B(x,{type:"widget",get processing(){return d.inputProcessing},get loading(){return d.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return A},get errors(){return o(g)},get config(){return e.config},multiple:!1,get value(){return d.current},set value(D){d.current=D}})}),v(f,y)},$$slots:{default:!0}})})}v(u,w),q()}V.fileField=Q;export{te as a};
