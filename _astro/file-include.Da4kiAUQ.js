import{A as _,W as x,X as H,p as U,j as V,N as W,k as O,Q as C,l as y,R as L,V as N,c as A,Y as E,P as Q}from"./definitions.wtp0xMx8.js";import"./_commonjsHelpers.kZ6zyXPC.js";import{p as j,o as h,b as w,e as P,a as k,g as l,u as v,n as X,v as Y,s as q}from"./render.CPvwW41j.js";async function B(i,e,r,t){const{name:u,blob:s}=await i.dataUrlToBlob(e,t);r.items.add(new File([s],u,{type:s.type}))}function ee(i,e,r,t){const u=[];for(const s of t)u.push(B(i,e,r,s));return Promise.all(u)}function z(i,e){return i.anyOf?[i.anyOf,e.anyOf]:[i.oneOf,e.oneOf]}function G(i,e,r,t){const u=t.enum,s=new Set(r("disabledEnumValues"));if(u){const o=r("enumNames");return u.map((a,n)=>{const m=o?.[n]??String(a);return{id:_(e.id,n,i),label:m,value:a,disabled:s.has(a)}})}const[g,d]=z(t,e.uiSchema);return g&&g.map((o,a)=>{if(typeof o=="boolean")throw new Error(`Invalid enum definition in anyOf ${a}`);const n=x(o),m=H(i,d?.[a])["ui:options"]?.title??o.title??String(n);return{id:_(e.id,a,i),schema:o,label:m,value:n,disabled:s.has(n)}})}function J(i,e){j(e,!0);let r=U(e,"value",15);const t=V(),u=v(()=>y(t,"fieldTemplate",e.config)),s="selectWidget",g=v(()=>y(t,s,e.config)),d=W(t,()=>C(t,e.config,r())),o=v(()=>G(t,e.config,e.uiOption,e.config.schema)??[]),a=v(()=>L(t,e.config.id));var n=h(),m=w(n);O(m,()=>l(u),(f,c)=>{c(f,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:s,get value(){return r()},get config(){return e.config},get errors(){return l(a)},children:(p,R)=>{var b=h(),T=w(b);O(T,()=>l(g),(F,I)=>{I(F,{type:"widget",get handlers(){return d},get config(){return e.config},get errors(){return l(a)},get uiOption(){return e.uiOption},get options(){return l(o)},get value(){return r()},set value(S){r(S)}})}),P(p,b)},$$slots:{default:!0}})}),P(i,n),k()}N.enumField=J;function K({initialOutput:i,getInput:e,setInput:r,toInput:t,toOutput:u,isEqual:s=Object.is}){let g;const d=A({combinator:E,execute:t,onSuccess(n){g=n,r(n)}});let o=Y(i);const a=A({combinator:E,execute:u,onSuccess(n){q(o,n)}});return X(()=>{const n=e();s(n,g)||(d.abort(),a.run(n))}),{get current(){return l(o)},set current(n){a.abort(),d.run(n)},get inputProcessing(){return d.isProcessed},get outputProcessing(){return a.isProcessed}}}function M(i,e){j(e,!0);let r=U(e,"value",15);const t=V(),u=v(()=>y(t,"fieldTemplate",e.config)),s="fileWidget",g=v(()=>y(t,s,e.config)),d=W(t,()=>C(t,e.config,r())),o=K({initialOutput:void 0,getInput:()=>r(),setInput:f=>r(f),async toOutput(f,c){const p=new DataTransfer;return c!==void 0&&await B(t,f,p,c),p.files},async toInput(f,c){return c===void 0||c.length===0?void 0:Q(f,c[0])}}),a=v(()=>L(t,e.config.id));var n=h(),m=w(n);O(m,()=>l(u),(f,c)=>{c(f,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:s,get value(){return r()},get config(){return e.config},get errors(){return l(a)},children:(p,R)=>{var b=h(),T=w(b);O(T,()=>l(g),(F,I)=>{I(F,{type:"widget",get processing(){return o.inputProcessing},get loading(){return o.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return d},get errors(){return l(a)},get config(){return e.config},multiple:!1,get value(){return o.current},set value(S){o.current=S}})}),P(p,b)},$$slots:{default:!0}})}),P(i,n),k()}N.fileField=M;export{ee as a,G as b,K as c};
