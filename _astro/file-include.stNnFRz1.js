import{C as S,Y as x,Z as H,p as E,m as V,Q as C,n as O,U as W,o as y,V as L,X as j,c as U,_ as k,R as Q}from"./definitions.B4vrTEUr.js";import"./_commonjsHelpers.lPGB9vRS.js";import{p as A,l as h,e as T,b as w,a as B,g as l,u as p,k as X,j as Y,i as Z}from"./render.PDPvWcLK.js";async function N(i,e,r,t){const{name:u,blob:o}=await i.dataUrlToBlob(e,t);r.items.add(new File([o],u,{type:o.type}))}function ee(i,e,r,t){const u=[];for(const o of t)u.push(N(i,e,r,o));return Promise.all(u)}function q(i,e){return i.anyOf?[i.anyOf,e.anyOf]:[i.oneOf,e.oneOf]}function z(i,e,r,t){const u=t.enum,o=new Set(r("disabledEnumValues"));if(u){const s=r("enumNames");return u.map((a,n)=>{const m=s?.[n]??String(a);return{id:S(e.id,n,i),label:m,value:a,disabled:o.has(a)}})}const[g,d]=q(t,e.uiSchema);return g&&g.map((s,a)=>{if(typeof s=="boolean")throw new Error(`Invalid enum definition in anyOf ${a}`);const n=x(s),m=H(i,d?.[a])["ui:options"]?.title??s.title??String(n);return{id:S(e.id,a,i),schema:s,label:m,value:n,disabled:o.has(n)}})}function G(i,e){A(e,!0);let r=E(e,"value",15);const t=V(),u=p(()=>y(t,"fieldTemplate",e.config)),o="selectWidget",g=p(()=>y(t,o,e.config)),d=C(t,()=>W(t,e.config,r())),s=p(()=>z(t,e.config,e.uiOption,e.config.schema)??[]),a=p(()=>L(t,e.config.id));var n=h(),m=T(n);O(m,()=>l(u),(f,c)=>{c(f,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:o,get value(){return r()},get config(){return e.config},get errors(){return l(a)},children:(v,R)=>{var b=h(),P=T(b);O(P,()=>l(g),(F,_)=>{_(F,{type:"widget",get handlers(){return d},get config(){return e.config},get errors(){return l(a)},get uiOption(){return e.uiOption},get options(){return l(s)},get value(){return r()},set value(I){r(I)}})}),w(v,b)},$$slots:{default:!0}})}),w(i,n),B()}j.enumField=G;function J({initialOutput:i,getInput:e,setInput:r,toInput:t,toOutput:u,isEqual:o=Object.is}){let g;const d=U({combinator:k,execute:t,onSuccess(n){g=n,r(n)}});let s=Y(i);const a=U({combinator:k,execute:u,onSuccess(n){Z(s,n)}});return X(()=>{const n=e();o(n,g)||(d.abort(),a.run(n))}),{get current(){return l(s)},set current(n){a.abort(),d.run(n)},get inputProcessing(){return d.isProcessed},get outputProcessing(){return a.isProcessed}}}function K(i,e){A(e,!0);let r=E(e,"value",15);const t=V(),u=p(()=>y(t,"fieldTemplate",e.config)),o="fileWidget",g=p(()=>y(t,o,e.config)),d=C(t,()=>W(t,e.config,r())),s=J({initialOutput:void 0,getInput:()=>r(),setInput:f=>r(f),async toOutput(f,c){const v=new DataTransfer;return c!==void 0&&await N(t,f,v,c),v.files},async toInput(f,c){return c===void 0||c.length===0?void 0:Q(f,c[0])}}),a=p(()=>L(t,e.config.id));var n=h(),m=T(n);O(m,()=>l(u),(f,c)=>{c(f,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:o,get value(){return r()},get config(){return e.config},get errors(){return l(a)},children:(v,R)=>{var b=h(),P=T(b);O(P,()=>l(g),(F,_)=>{_(F,{type:"widget",get processing(){return s.inputProcessing},get loading(){return s.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return d},get errors(){return l(a)},get config(){return e.config},multiple:!1,get value(){return s.current},set value(I){s.current=I}})}),w(v,b)},$$slots:{default:!0}})}),w(i,n),B()}j.fileField=K;export{ee as a,z as b,J as c};
