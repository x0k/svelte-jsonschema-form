const wt=["top","right","bottom","left"],_=Math.min,j=Math.max,Yt=Math.round,_t=Math.floor,$t=t=>({x:t,y:t}),xt={left:"right",right:"left",bottom:"top",top:"bottom"},yt={start:"end",end:"start"};function q(t,e,n){return j(t,_(e,n))}function L(t,e){return typeof t=="function"?t(e):t}function N(t){return t.split("-")[0]}function W(t){return t.split("-")[1]}function J(t){return t==="x"?"y":"x"}function Q(t){return t==="y"?"height":"width"}const bt=new Set(["top","bottom"]);function R(t){return bt.has(N(t))?"y":"x"}function U(t){return J(R(t))}function vt(t,e,n){n===void 0&&(n=!1);const i=W(t),s=U(t),o=Q(s);let r=s==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(r=z(r)),[r,z(r)]}function At(t){const e=z(t);return[K(t),e,K(e)]}function K(t){return t.replace(/start|end/g,e=>yt[e])}const I=["left","right"],tt=["right","left"],St=["top","bottom"],Ot=["bottom","top"];function Pt(t,e,n){switch(t){case"top":case"bottom":return n?e?tt:I:e?I:tt;case"left":case"right":return e?St:Ot;default:return[]}}function Ct(t,e,n,i){const s=W(t);let o=Pt(N(t),n==="start",i);return s&&(o=o.map(r=>r+"-"+s),e&&(o=o.concat(o.map(K)))),o}function z(t){return t.replace(/left|right|bottom|top/g,e=>xt[e])}function Dt(t){return{top:0,right:0,bottom:0,left:0,...t}}function ct(t){return typeof t!="number"?Dt(t):{top:t,right:t,bottom:t,left:t}}function et(t){const{x:e,y:n,width:i,height:s}=t;return{width:i,height:s,top:n,left:e,right:e+i,bottom:n+s,x:e,y:n}}function nt(t,e,n){let{reference:i,floating:s}=t;const o=R(e),r=U(e),m=Q(r),p=N(e),h=o==="y",l=i.x+i.width/2-s.width/2,a=i.y+i.height/2-s.height/2,u=i[m]/2-s[m]/2;let c;switch(p){case"top":c={x:l,y:i.y-s.height};break;case"bottom":c={x:l,y:i.y+i.height};break;case"right":c={x:i.x+i.width,y:a};break;case"left":c={x:i.x-s.width,y:a};break;default:c={x:i.x,y:i.y}}switch(W(e)){case"start":c[r]-=u*(n&&h?-1:1);break;case"end":c[r]+=u*(n&&h?-1:1);break}return c}const zt=async(t,e,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=n,m=o.filter(Boolean),p=await(r.isRTL==null?void 0:r.isRTL(e));let h=await r.getElementRects({reference:t,floating:e,strategy:s}),{x:l,y:a}=nt(h,i,p),u=i,c={},f=0;for(let g=0;g<m.length;g++){const{name:d,fn:y}=m[g],{x:b,y:x,data:v,reset:w}=await y({x:l,y:a,initialPlacement:i,placement:u,strategy:s,middlewareData:c,rects:h,platform:r,elements:{reference:t,floating:e}});l=b??l,a=x??a,c={...c,[d]:{...c[d],...v}},w&&f<=50&&(f++,typeof w=="object"&&(w.placement&&(u=w.placement),w.rects&&(h=w.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:s}):w.rects),{x:l,y:a}=nt(h,u,p)),g=-1)}return{x:l,y:a,placement:u,strategy:s,middlewareData:c}};async function $(t,e){var n;e===void 0&&(e={});const{x:i,y:s,platform:o,rects:r,elements:m,strategy:p}=t,{boundary:h="clippingAncestors",rootBoundary:l="viewport",elementContext:a="floating",altBoundary:u=!1,padding:c=0}=L(e,t),f=ct(c),d=m[u?a==="floating"?"reference":"floating":a],y=et(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(d)))==null||n?d:d.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(m.floating)),boundary:h,rootBoundary:l,strategy:p})),b=a==="floating"?{x:i,y:s,width:r.floating.width,height:r.floating.height}:r.reference,x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(m.floating)),v=await(o.isElement==null?void 0:o.isElement(x))?await(o.getScale==null?void 0:o.getScale(x))||{x:1,y:1}:{x:1,y:1},w=et(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:b,offsetParent:x,strategy:p}):b);return{top:(y.top-w.top+f.top)/v.y,bottom:(w.bottom-y.bottom+f.bottom)/v.y,left:(y.left-w.left+f.left)/v.x,right:(w.right-y.right+f.right)/v.x}}const Xt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:s,rects:o,platform:r,elements:m,middlewareData:p}=e,{element:h,padding:l=0}=L(t,e)||{};if(h==null)return{};const a=ct(l),u={x:n,y:i},c=U(s),f=Q(c),g=await r.getDimensions(h),d=c==="y",y=d?"top":"left",b=d?"bottom":"right",x=d?"clientHeight":"clientWidth",v=o.reference[f]+o.reference[c]-u[c]-o.floating[f],w=u[c]-o.reference[c],O=await(r.getOffsetParent==null?void 0:r.getOffsetParent(h));let P=O?O[x]:0;(!P||!await(r.isElement==null?void 0:r.isElement(O)))&&(P=m.floating[x]||o.floating[f]);const T=v/2-w/2,k=P/2-g[f]/2-1,S=_(a[y],k),H=_(a[b],k),E=S,V=P-g[f]-H,A=P/2-g[f]/2+T,F=q(E,A,V),M=!p.arrow&&W(s)!=null&&A!==F&&o.reference[f]/2-(A<E?S:H)-g[f]/2<0,C=M?A<E?A-E:A-V:0;return{[c]:u[c]+C,data:{[c]:F,centerOffset:A-F-C,...M&&{alignmentOffset:C}},reset:M}}}),qt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:s,middlewareData:o,rects:r,initialPlacement:m,platform:p,elements:h}=e,{mainAxis:l=!0,crossAxis:a=!0,fallbackPlacements:u,fallbackStrategy:c="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...d}=L(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=N(s),b=R(m),x=N(m)===m,v=await(p.isRTL==null?void 0:p.isRTL(h.floating)),w=u||(x||!g?[z(m)]:At(m)),O=f!=="none";!u&&O&&w.push(...Ct(m,g,f,v));const P=[m,...w],T=await $(e,d),k=[];let S=((i=o.flip)==null?void 0:i.overflows)||[];if(l&&k.push(T[y]),a){const A=vt(s,r,v);k.push(T[A[0]],T[A[1]])}if(S=[...S,{placement:s,overflows:k}],!k.every(A=>A<=0)){var H,E;const A=(((H=o.flip)==null?void 0:H.index)||0)+1,F=P[A];if(F&&(!(a==="alignment"?b!==R(F):!1)||S.every(D=>R(D.placement)===b?D.overflows[0]>0:!0)))return{data:{index:A,overflows:S},reset:{placement:F}};let M=(E=S.filter(C=>C.overflows[0]<=0).sort((C,D)=>C.overflows[1]-D.overflows[1])[0])==null?void 0:E.placement;if(!M)switch(c){case"bestFit":{var V;const C=(V=S.filter(D=>{if(O){const B=R(D.placement);return B===b||B==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(B=>B>0).reduce((B,ht)=>B+ht,0)]).sort((D,B)=>D[1]-B[1])[0])==null?void 0:V[0];C&&(M=C);break}case"initialPlacement":M=m;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function ot(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function it(t){return wt.some(e=>t[e]>=0)}const Kt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...s}=L(t,e);switch(i){case"referenceHidden":{const o=await $(e,{...s,elementContext:"reference"}),r=ot(o,n.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:it(r)}}}case"escaped":{const o=await $(e,{...s,altBoundary:!0}),r=ot(o,n.floating);return{data:{escapedOffsets:r,escaped:it(r)}}}default:return{}}}}},at=new Set(["left","top"]);async function kt(t,e){const{placement:n,platform:i,elements:s}=t,o=await(i.isRTL==null?void 0:i.isRTL(s.floating)),r=N(n),m=W(n),p=R(n)==="y",h=at.has(r)?-1:1,l=o&&p?-1:1,a=L(e,t);let{mainAxis:u,crossAxis:c,alignmentAxis:f}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:a.mainAxis||0,crossAxis:a.crossAxis||0,alignmentAxis:a.alignmentAxis};return m&&typeof f=="number"&&(c=m==="end"?f*-1:f),p?{x:c*l,y:u*h}:{x:u*h,y:c*l}}const Gt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:s,y:o,placement:r,middlewareData:m}=e,p=await kt(e,t);return r===((n=m.offset)==null?void 0:n.placement)&&(i=m.arrow)!=null&&i.alignmentOffset?{}:{x:s+p.x,y:o+p.y,data:{...p,placement:r}}}}},Jt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:s}=e,{mainAxis:o=!0,crossAxis:r=!1,limiter:m={fn:d=>{let{x:y,y:b}=d;return{x:y,y:b}}},...p}=L(t,e),h={x:n,y:i},l=await $(e,p),a=R(N(s)),u=J(a);let c=h[u],f=h[a];if(o){const d=u==="y"?"top":"left",y=u==="y"?"bottom":"right",b=c+l[d],x=c-l[y];c=q(b,c,x)}if(r){const d=a==="y"?"top":"left",y=a==="y"?"bottom":"right",b=f+l[d],x=f-l[y];f=q(b,f,x)}const g=m.fn({...e,[u]:c,[a]:f});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[u]:o,[a]:r}}}}}},Qt=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:s,rects:o,middlewareData:r}=e,{offset:m=0,mainAxis:p=!0,crossAxis:h=!0}=L(t,e),l={x:n,y:i},a=R(s),u=J(a);let c=l[u],f=l[a];const g=L(m,e),d=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(p){const x=u==="y"?"height":"width",v=o.reference[u]-o.floating[x]+d.mainAxis,w=o.reference[u]+o.reference[x]-d.mainAxis;c<v?c=v:c>w&&(c=w)}if(h){var y,b;const x=u==="y"?"width":"height",v=at.has(N(s)),w=o.reference[a]-o.floating[x]+(v&&((y=r.offset)==null?void 0:y[a])||0)+(v?0:d.crossAxis),O=o.reference[a]+o.reference[x]+(v?0:((b=r.offset)==null?void 0:b[a])||0)-(v?d.crossAxis:0);f<w?f=w:f>O&&(f=O)}return{[u]:c,[a]:f}}}},Ut=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:s,rects:o,platform:r,elements:m}=e,{apply:p=()=>{},...h}=L(t,e),l=await $(e,h),a=N(s),u=W(s),c=R(s)==="y",{width:f,height:g}=o.floating;let d,y;a==="top"||a==="bottom"?(d=a,y=u===(await(r.isRTL==null?void 0:r.isRTL(m.floating))?"start":"end")?"left":"right"):(y=a,d=u==="end"?"top":"bottom");const b=g-l.top-l.bottom,x=f-l.left-l.right,v=_(g-l[d],b),w=_(f-l[y],x),O=!e.middlewareData.shift;let P=v,T=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=x),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(P=b),O&&!u){const S=j(l.left,0),H=j(l.right,0),E=j(l.top,0),V=j(l.bottom,0);c?T=f-2*(S!==0||H!==0?S+H:j(l.left,l.right)):P=g-2*(E!==0||V!==0?E+V:j(l.top,l.bottom))}await p({...e,availableWidth:T,availableHeight:P});const k=await r.getDimensions(m.floating);return f!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function X(){return typeof window<"u"}function Z(t){return lt(t)?(t.nodeName||"").toLowerCase():"#document"}function Y(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Et(t){var e;return(e=(lt(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lt(t){return X()?t instanceof Node||t instanceof Y(t).Node:!1}function ft(t){return X()?t instanceof Element||t instanceof Y(t).Element:!1}function mt(t){return X()?t instanceof HTMLElement||t instanceof Y(t).HTMLElement:!1}function st(t){return!X()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Y(t).ShadowRoot}const Rt=new Set(["inline","contents"]);function ut(t){const{overflow:e,overflowX:n,overflowY:i,display:s}=gt(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Rt.has(s)}const Tt=new Set(["table","td","th"]);function Zt(t){return Tt.has(Z(t))}const Mt=[":popover-open",":modal"];function Lt(t){return Mt.some(e=>{try{return t.matches(e)}catch{return!1}})}const Nt=["transform","translate","scale","rotate","perspective"],Ht=["transform","translate","scale","rotate","perspective","filter"],Vt=["paint","layout","strict","content"];function Bt(t){const e=Ft(),n=ft(t)?gt(t):t;return Nt.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Ht.some(i=>(n.willChange||"").includes(i))||Vt.some(i=>(n.contain||"").includes(i))}function It(t){let e=G(t);for(;mt(e)&&!dt(e);){if(Bt(e))return e;if(Lt(e))return null;e=G(e)}return null}function Ft(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jt=new Set(["html","body","#document"]);function dt(t){return jt.has(Z(t))}function gt(t){return Y(t).getComputedStyle(t)}function te(t){return ft(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function G(t){if(Z(t)==="html")return t;const e=t.assignedSlot||t.parentNode||st(t)&&t.host||Et(t);return st(e)?e.host:e}function pt(t){const e=G(t);return dt(e)?t.ownerDocument?t.ownerDocument.body:t.body:mt(e)&&ut(e)?e:pt(e)}function rt(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=pt(t),o=s===((i=t.ownerDocument)==null?void 0:i.body),r=Y(s);if(o){const m=Wt(r);return e.concat(r,r.visualViewport||[],ut(s)?s:[],m&&n?rt(m):[])}return e.concat(s,rt(s,[],n))}function Wt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}export{rt as A,et as B,Wt as C,Ft as D,_t as E,Ut as a,Xt as b,zt as c,gt as d,mt as e,qt as f,Et as g,Kt as h,ft as i,$t as j,Y as k,Qt as l,Lt as m,G as n,Gt as o,dt as p,Zt as q,Yt as r,Jt as s,Bt as t,It as u,j as v,_ as w,Z as x,ut as y,te as z};
