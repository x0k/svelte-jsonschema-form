import{g as En}from"./_commonjsHelpers.BKBskBl2.js";import{t as an,as as Sn,at as Pn,au as Rn,av as zt,aw as Nn,Z as On,_ as Kt,$ as on,e as Lt,d as kn,ax as Ht,A as jn}from"./definitions.CtzsFr2O.js";function ht(e,r,p={type:"root",path:[]}){if(!an(e))return r(e,p);const i={...e};for(const l of Sn){const u=e[l];if(u===void 0||!Array.isArray(u))continue;const d={type:"array",parent:e,key:l,index:0,path:p.path.concat(l,0)};i[l]=u.map((g,_)=>(d.index=_,d.path[d.path.length-1]=_,ht(g,r,d)))}const v=new Map;for(const l of Pn){const u=e[l];if(u===void 0)continue;const d={type:"record",parent:e,key:l,property:"",path:p.path.concat(l,"")};for(const[g,_]of Object.entries(u))Array.isArray(_)||(d.property=g,d.path[d.path.length-1]=g,v.set(g,ht(_,r,d)));i[l]=Object.fromEntries(v),v.clear()}const o={type:"sub",parent:e,key:"items",path:p.path.concat("")};for(const l of Rn){const u=e[l];u===void 0||Array.isArray(u)||(o.key=l,o.path[o.path.length-1]=l,i[l]=ht(u,r,o))}return r(i,p)}function In(e,r){return ht(e,p=>{if(!an(p))return p;const i=p[zt];return i!==void 0&&i.startsWith("#")&&(p[zt]=`${r}${i}`),p})}const Tn={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},qn=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Cn=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function An(e){return e.addFormat("color",qn),e.addFormat("data-url",Cn),e}function Mn(e){return e.addKeyword(Nn),e}function Dn(e){return Mn(An(e))}function Ct(e,r){let p="",i=!1;const v=new WeakMap,o=on(v,l=>{let u=l;return i&&(u=In(l,p),delete u[Kt]),e.compile(u)});return(l,u)=>{p=u[Kt]??On;let d=e.getSchema(p)?.schema;return d!==void 0&&d!==u&&(e.removeSchema(p),v.delete(l),d=void 0),d===void 0&&e.addSchema(u,p),i=l!==u,o(l)}}function un(e,r){const i=on(new WeakMap,v=>e.compile({...v,$async:r}));return v=>i(v.schema)}var ke={exports:{}},Et={},he={},ge={},St={},Pt={},Rt={},Gt;function pt(){return Gt||(Gt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class r{}e._CodeOrName=r,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class p extends r{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=p;class i extends r{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((s,f)=>`${s}${f}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((s,f)=>(f instanceof p&&(s[f.str]=(s[f.str]||0)+1),s),{})}}e._Code=i,e.nil=new i("");function v(a,...t){const s=[a[0]];let f=0;for(;f<t.length;)u(s,t[f]),s.push(a[++f]);return new i(s)}e._=v;const o=new i("+");function l(a,...t){const s=[P(a[0])];let f=0;for(;f<t.length;)s.push(o),u(s,t[f]),s.push(o,P(a[++f]));return d(s),new i(s)}e.str=l;function u(a,t){t instanceof i?a.push(...t._items):t instanceof p?a.push(t):a.push(E(t))}e.addCodeArg=u;function d(a){let t=1;for(;t<a.length-1;){if(a[t]===o){const s=g(a[t-1],a[t+1]);if(s!==void 0){a.splice(t-1,3,s);continue}a[t++]="+"}t++}}function g(a,t){if(t==='""')return a;if(a==='""')return t;if(typeof a=="string")return t instanceof p||a[a.length-1]!=='"'?void 0:typeof t!="string"?`${a.slice(0,-1)}${t}"`:t[0]==='"'?a.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(a instanceof p))return`"${a}${t.slice(1)}`}function _(a,t){return t.emptyStr()?a:a.emptyStr()?t:l`${a}${t}`}e.strConcat=_;function E(a){return typeof a=="number"||typeof a=="boolean"||a===null?a:P(Array.isArray(a)?a.join(","):a)}function R(a){return new i(P(a))}e.stringify=R;function P(a){return JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=P;function m(a){return typeof a=="string"&&e.IDENTIFIER.test(a)?new i(`.${a}`):v`[${a}]`}e.getProperty=m;function b(a){if(typeof a=="string"&&e.IDENTIFIER.test(a))return new i(`${a}`);throw new Error(`CodeGen: invalid export name: ${a}, use explicit $id name mapping`)}e.getEsmExportName=b;function n(a){return new i(a.toString())}e.regexpCode=n}(Rt)),Rt}var Nt={},Jt;function Wt(){return Jt||(Jt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const r=pt();class p extends Error{constructor(g){super(`CodeGen: "code" for ${g} not defined`),this.value=g.value}}var i;(function(d){d[d.Started=0]="Started",d[d.Completed=1]="Completed"})(i||(e.UsedValueState=i={})),e.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class v{constructor({prefixes:g,parent:_}={}){this._names={},this._prefixes=g,this._parent=_}toName(g){return g instanceof r.Name?g:this.name(g)}name(g){return new r.Name(this._newName(g))}_newName(g){const _=this._names[g]||this._nameGroup(g);return`${g}${_.index++}`}_nameGroup(g){var _,E;if(!((E=(_=this._parent)===null||_===void 0?void 0:_._prefixes)===null||E===void 0)&&E.has(g)||this._prefixes&&!this._prefixes.has(g))throw new Error(`CodeGen: prefix "${g}" is not allowed in this scope`);return this._names[g]={prefix:g,index:0}}}e.Scope=v;class o extends r.Name{constructor(g,_){super(_),this.prefix=g}setValue(g,{property:_,itemIndex:E}){this.value=g,this.scopePath=(0,r._)`.${new r.Name(_)}[${E}]`}}e.ValueScopeName=o;const l=(0,r._)`\n`;class u extends v{constructor(g){super(g),this._values={},this._scope=g.scope,this.opts={...g,_n:g.lines?l:r.nil}}get(){return this._scope}name(g){return new o(g,this._newName(g))}value(g,_){var E;if(_.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const R=this.toName(g),{prefix:P}=R,m=(E=_.key)!==null&&E!==void 0?E:_.ref;let b=this._values[P];if(b){const t=b.get(m);if(t)return t}else b=this._values[P]=new Map;b.set(m,R);const n=this._scope[P]||(this._scope[P]=[]),a=n.length;return n[a]=_.ref,R.setValue(_,{property:P,itemIndex:a}),R}getValue(g,_){const E=this._values[g];if(E)return E.get(_)}scopeRefs(g,_=this._values){return this._reduceValues(_,E=>{if(E.scopePath===void 0)throw new Error(`CodeGen: name "${E}" has no value`);return(0,r._)`${g}${E.scopePath}`})}scopeCode(g=this._values,_,E){return this._reduceValues(g,R=>{if(R.value===void 0)throw new Error(`CodeGen: name "${R}" has no value`);return R.value.code},_,E)}_reduceValues(g,_,E={},R){let P=r.nil;for(const m in g){const b=g[m];if(!b)continue;const n=E[m]=E[m]||new Map;b.forEach(a=>{if(n.has(a))return;n.set(a,i.Started);let t=_(a);if(t){const s=this.opts.es5?e.varKinds.var:e.varKinds.const;P=(0,r._)`${P}${s} ${a} = ${t};${this.opts._n}`}else if(t=R?.(a))P=(0,r._)`${P}${t}${this.opts._n}`;else throw new p(a);n.set(a,i.Completed)})}return P}}e.ValueScope=u}(Nt)),Nt}var Bt;function J(){return Bt||(Bt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const r=pt(),p=Wt();var i=pt();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return i.Name}});var v=Wt();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return v.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return v.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return v.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return v.varKinds}}),e.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class o{optimizeNodes(){return this}optimizeNames(c,w){return this}}class l extends o{constructor(c,w,I){super(),this.varKind=c,this.name=w,this.rhs=I}render({es5:c,_n:w}){const I=c?p.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${I} ${this.name}${V};`+w}optimizeNames(c,w){if(c[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,c,w)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class u extends o{constructor(c,w,I){super(),this.lhs=c,this.rhs=w,this.sideEffects=I}render({_n:c}){return`${this.lhs} = ${this.rhs};`+c}optimizeNames(c,w){if(!(this.lhs instanceof r.Name&&!c[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,c,w),this}get names(){const c=this.lhs instanceof r.Name?{}:{...this.lhs.names};return K(c,this.rhs)}}class d extends u{constructor(c,w,I,V){super(c,I,V),this.op=w}render({_n:c}){return`${this.lhs} ${this.op}= ${this.rhs};`+c}}class g extends o{constructor(c){super(),this.label=c,this.names={}}render({_n:c}){return`${this.label}:`+c}}class _ extends o{constructor(c){super(),this.label=c,this.names={}}render({_n:c}){return`break${this.label?` ${this.label}`:""};`+c}}class E extends o{constructor(c){super(),this.error=c}render({_n:c}){return`throw ${this.error};`+c}get names(){return this.error.names}}class R extends o{constructor(c){super(),this.code=c}render({_n:c}){return`${this.code};`+c}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(c,w){return this.code=B(this.code,c,w),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class P extends o{constructor(c=[]){super(),this.nodes=c}render(c){return this.nodes.reduce((w,I)=>w+I.render(c),"")}optimizeNodes(){const{nodes:c}=this;let w=c.length;for(;w--;){const I=c[w].optimizeNodes();Array.isArray(I)?c.splice(w,1,...I):I?c[w]=I:c.splice(w,1)}return c.length>0?this:void 0}optimizeNames(c,w){const{nodes:I}=this;let V=I.length;for(;V--;){const z=I[V];z.optimizeNames(c,w)||(x(c,z.names),I.splice(V,1))}return I.length>0?this:void 0}get names(){return this.nodes.reduce((c,w)=>L(c,w.names),{})}}class m extends P{render(c){return"{"+c._n+super.render(c)+"}"+c._n}}class b extends P{}class n extends m{}n.kind="else";class a extends m{constructor(c,w){super(w),this.condition=c}render(c){let w=`if(${this.condition})`+super.render(c);return this.else&&(w+="else "+this.else.render(c)),w}optimizeNodes(){super.optimizeNodes();const c=this.condition;if(c===!0)return this.nodes;let w=this.else;if(w){const I=w.optimizeNodes();w=this.else=Array.isArray(I)?new n(I):I}if(w)return c===!1?w instanceof a?w:w.nodes:this.nodes.length?this:new a(de(c),w instanceof a?[w]:w.nodes);if(!(c===!1||!this.nodes.length))return this}optimizeNames(c,w){var I;if(this.else=(I=this.else)===null||I===void 0?void 0:I.optimizeNames(c,w),!!(super.optimizeNames(c,w)||this.else))return this.condition=B(this.condition,c,w),this}get names(){const c=super.names;return K(c,this.condition),this.else&&L(c,this.else.names),c}}a.kind="if";class t extends m{}t.kind="for";class s extends t{constructor(c){super(),this.iteration=c}render(c){return`for(${this.iteration})`+super.render(c)}optimizeNames(c,w){if(super.optimizeNames(c,w))return this.iteration=B(this.iteration,c,w),this}get names(){return L(super.names,this.iteration.names)}}class f extends t{constructor(c,w,I,V){super(),this.varKind=c,this.name=w,this.from=I,this.to=V}render(c){const w=c.es5?p.varKinds.var:this.varKind,{name:I,from:V,to:z}=this;return`for(${w} ${I}=${V}; ${I}<${z}; ${I}++)`+super.render(c)}get names(){const c=K(super.names,this.from);return K(c,this.to)}}class y extends t{constructor(c,w,I,V){super(),this.loop=c,this.varKind=w,this.name=I,this.iterable=V}render(c){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(c)}optimizeNames(c,w){if(super.optimizeNames(c,w))return this.iterable=B(this.iterable,c,w),this}get names(){return L(super.names,this.iterable.names)}}class h extends m{constructor(c,w,I){super(),this.name=c,this.args=w,this.async=I}render(c){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(c)}}h.kind="func";class $ extends P{render(c){return"return "+super.render(c)}}$.kind="return";class j extends m{render(c){let w="try"+super.render(c);return this.catch&&(w+=this.catch.render(c)),this.finally&&(w+=this.finally.render(c)),w}optimizeNodes(){var c,w;return super.optimizeNodes(),(c=this.catch)===null||c===void 0||c.optimizeNodes(),(w=this.finally)===null||w===void 0||w.optimizeNodes(),this}optimizeNames(c,w){var I,V;return super.optimizeNames(c,w),(I=this.catch)===null||I===void 0||I.optimizeNames(c,w),(V=this.finally)===null||V===void 0||V.optimizeNames(c,w),this}get names(){const c=super.names;return this.catch&&L(c,this.catch.names),this.finally&&L(c,this.finally.names),c}}class C extends m{constructor(c){super(),this.error=c}render(c){return`catch(${this.error})`+super.render(c)}}C.kind="catch";class D extends m{render(c){return"finally"+super.render(c)}}D.kind="finally";class F{constructor(c,w={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...w,_n:w.lines?`
`:""},this._extScope=c,this._scope=new p.Scope({parent:c}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(c){return this._scope.name(c)}scopeName(c){return this._extScope.name(c)}scopeValue(c,w){const I=this._extScope.value(c,w);return(this._values[I.prefix]||(this._values[I.prefix]=new Set)).add(I),I}getScopeValue(c,w){return this._extScope.getValue(c,w)}scopeRefs(c){return this._extScope.scopeRefs(c,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(c,w,I,V){const z=this._scope.toName(w);return I!==void 0&&V&&(this._constants[z.str]=I),this._leafNode(new l(c,z,I)),z}const(c,w,I){return this._def(p.varKinds.const,c,w,I)}let(c,w,I){return this._def(p.varKinds.let,c,w,I)}var(c,w,I){return this._def(p.varKinds.var,c,w,I)}assign(c,w,I){return this._leafNode(new u(c,w,I))}add(c,w){return this._leafNode(new d(c,e.operators.ADD,w))}code(c){return typeof c=="function"?c():c!==r.nil&&this._leafNode(new R(c)),this}object(...c){const w=["{"];for(const[I,V]of c)w.length>1&&w.push(","),w.push(I),(I!==V||this.opts.es5)&&(w.push(":"),(0,r.addCodeArg)(w,V));return w.push("}"),new r._Code(w)}if(c,w,I){if(this._blockNode(new a(c)),w&&I)this.code(w).else().code(I).endIf();else if(w)this.code(w).endIf();else if(I)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(c){return this._elseNode(new a(c))}else(){return this._elseNode(new n)}endIf(){return this._endBlockNode(a,n)}_for(c,w){return this._blockNode(c),w&&this.code(w).endFor(),this}for(c,w){return this._for(new s(c),w)}forRange(c,w,I,V,z=this.opts.es5?p.varKinds.var:p.varKinds.let){const Y=this._scope.toName(c);return this._for(new f(z,Y,w,I),()=>V(Y))}forOf(c,w,I,V=p.varKinds.const){const z=this._scope.toName(c);if(this.opts.es5){const Y=w instanceof r.Name?w:this.var("_arr",w);return this.forRange("_i",0,(0,r._)`${Y}.length`,W=>{this.var(z,(0,r._)`${Y}[${W}]`),I(z)})}return this._for(new y("of",V,z,w),()=>I(z))}forIn(c,w,I,V=this.opts.es5?p.varKinds.var:p.varKinds.const){if(this.opts.ownProperties)return this.forOf(c,(0,r._)`Object.keys(${w})`,I);const z=this._scope.toName(c);return this._for(new y("in",V,z,w),()=>I(z))}endFor(){return this._endBlockNode(t)}label(c){return this._leafNode(new g(c))}break(c){return this._leafNode(new _(c))}return(c){const w=new $;if(this._blockNode(w),this.code(c),w.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($)}try(c,w,I){if(!w&&!I)throw new Error('CodeGen: "try" without "catch" and "finally"');const V=new j;if(this._blockNode(V),this.code(c),w){const z=this.name("e");this._currNode=V.catch=new C(z),w(z)}return I&&(this._currNode=V.finally=new D,this.code(I)),this._endBlockNode(C,D)}throw(c){return this._leafNode(new E(c))}block(c,w){return this._blockStarts.push(this._nodes.length),c&&this.code(c).endBlock(w),this}endBlock(c){const w=this._blockStarts.pop();if(w===void 0)throw new Error("CodeGen: not in self-balancing block");const I=this._nodes.length-w;if(I<0||c!==void 0&&I!==c)throw new Error(`CodeGen: wrong number of nodes: ${I} vs ${c} expected`);return this._nodes.length=w,this}func(c,w=r.nil,I,V){return this._blockNode(new h(c,w,I)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(h)}optimize(c=1){for(;c-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(c){return this._currNode.nodes.push(c),this}_blockNode(c){this._currNode.nodes.push(c),this._nodes.push(c)}_endBlockNode(c,w){const I=this._currNode;if(I instanceof c||w&&I instanceof w)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${w?`${c.kind}/${w.kind}`:c.kind}"`)}_elseNode(c){const w=this._currNode;if(!(w instanceof a))throw new Error('CodeGen: "else" without "if"');return this._currNode=w.else=c,this}get _root(){return this._nodes[0]}get _currNode(){const c=this._nodes;return c[c.length-1]}set _currNode(c){const w=this._nodes;w[w.length-1]=c}}e.CodeGen=F;function L(k,c){for(const w in c)k[w]=(k[w]||0)+(c[w]||0);return k}function K(k,c){return c instanceof r._CodeOrName?L(k,c.names):k}function B(k,c,w){if(k instanceof r.Name)return I(k);if(!V(k))return k;return new r._Code(k._items.reduce((z,Y)=>(Y instanceof r.Name&&(Y=I(Y)),Y instanceof r._Code?z.push(...Y._items):z.push(Y),z),[]));function I(z){const Y=w[z.str];return Y===void 0||c[z.str]!==1?z:(delete c[z.str],Y)}function V(z){return z instanceof r._Code&&z._items.some(Y=>Y instanceof r.Name&&c[Y.str]===1&&w[Y.str]!==void 0)}}function x(k,c){for(const w in c)k[w]=(k[w]||0)-(c[w]||0)}function de(k){return typeof k=="boolean"||typeof k=="number"||k===null?!k:(0,r._)`!${q(k)}`}e.not=de;const fe=N(e.operators.AND);function Z(...k){return k.reduce(fe)}e.and=Z;const ye=N(e.operators.OR);function A(...k){return k.reduce(ye)}e.or=A;function N(k){return(c,w)=>c===r.nil?w:w===r.nil?c:(0,r._)`${q(c)} ${k} ${q(w)}`}function q(k){return k instanceof r.Name?k:(0,r._)`(${k})`}}(Pt)),Pt}var H={},Xt;function X(){if(Xt)return H;Xt=1,Object.defineProperty(H,"__esModule",{value:!0}),H.checkStrictMode=H.getErrorPath=H.Type=H.useFunc=H.setEvaluated=H.evaluatedPropsToName=H.mergeEvaluated=H.eachItem=H.unescapeJsonPointer=H.escapeJsonPointer=H.escapeFragment=H.unescapeFragment=H.schemaRefOrVal=H.schemaHasRulesButRef=H.schemaHasRules=H.checkUnknownRules=H.alwaysValidSchema=H.toHash=void 0;const e=J(),r=pt();function p(y){const h={};for(const $ of y)h[$]=!0;return h}H.toHash=p;function i(y,h){return typeof h=="boolean"?h:Object.keys(h).length===0?!0:(v(y,h),!o(h,y.self.RULES.all))}H.alwaysValidSchema=i;function v(y,h=y.schema){const{opts:$,self:j}=y;if(!$.strictSchema||typeof h=="boolean")return;const C=j.RULES.keywords;for(const D in h)C[D]||f(y,`unknown keyword: "${D}"`)}H.checkUnknownRules=v;function o(y,h){if(typeof y=="boolean")return!y;for(const $ in y)if(h[$])return!0;return!1}H.schemaHasRules=o;function l(y,h){if(typeof y=="boolean")return!y;for(const $ in y)if($!=="$ref"&&h.all[$])return!0;return!1}H.schemaHasRulesButRef=l;function u({topSchemaRef:y,schemaPath:h},$,j,C){if(!C){if(typeof $=="number"||typeof $=="boolean")return $;if(typeof $=="string")return(0,e._)`${$}`}return(0,e._)`${y}${h}${(0,e.getProperty)(j)}`}H.schemaRefOrVal=u;function d(y){return E(decodeURIComponent(y))}H.unescapeFragment=d;function g(y){return encodeURIComponent(_(y))}H.escapeFragment=g;function _(y){return typeof y=="number"?`${y}`:y.replace(/~/g,"~0").replace(/\//g,"~1")}H.escapeJsonPointer=_;function E(y){return y.replace(/~1/g,"/").replace(/~0/g,"~")}H.unescapeJsonPointer=E;function R(y,h){if(Array.isArray(y))for(const $ of y)h($);else h(y)}H.eachItem=R;function P({mergeNames:y,mergeToName:h,mergeValues:$,resultToName:j}){return(C,D,F,L)=>{const K=F===void 0?D:F instanceof e.Name?(D instanceof e.Name?y(C,D,F):h(C,D,F),F):D instanceof e.Name?(h(C,F,D),D):$(D,F);return L===e.Name&&!(K instanceof e.Name)?j(C,K):K}}H.mergeEvaluated={props:P({mergeNames:(y,h,$)=>y.if((0,e._)`${$} !== true && ${h} !== undefined`,()=>{y.if((0,e._)`${h} === true`,()=>y.assign($,!0),()=>y.assign($,(0,e._)`${$} || {}`).code((0,e._)`Object.assign(${$}, ${h})`))}),mergeToName:(y,h,$)=>y.if((0,e._)`${$} !== true`,()=>{h===!0?y.assign($,!0):(y.assign($,(0,e._)`${$} || {}`),b(y,$,h))}),mergeValues:(y,h)=>y===!0?!0:{...y,...h},resultToName:m}),items:P({mergeNames:(y,h,$)=>y.if((0,e._)`${$} !== true && ${h} !== undefined`,()=>y.assign($,(0,e._)`${h} === true ? true : ${$} > ${h} ? ${$} : ${h}`)),mergeToName:(y,h,$)=>y.if((0,e._)`${$} !== true`,()=>y.assign($,h===!0?!0:(0,e._)`${$} > ${h} ? ${$} : ${h}`)),mergeValues:(y,h)=>y===!0?!0:Math.max(y,h),resultToName:(y,h)=>y.var("items",h)})};function m(y,h){if(h===!0)return y.var("props",!0);const $=y.var("props",(0,e._)`{}`);return h!==void 0&&b(y,$,h),$}H.evaluatedPropsToName=m;function b(y,h,$){Object.keys($).forEach(j=>y.assign((0,e._)`${h}${(0,e.getProperty)(j)}`,!0))}H.setEvaluated=b;const n={};function a(y,h){return y.scopeValue("func",{ref:h,code:n[h.code]||(n[h.code]=new r._Code(h.code))})}H.useFunc=a;var t;(function(y){y[y.Num=0]="Num",y[y.Str=1]="Str"})(t||(H.Type=t={}));function s(y,h,$){if(y instanceof e.Name){const j=h===t.Num;return $?j?(0,e._)`"[" + ${y} + "]"`:(0,e._)`"['" + ${y} + "']"`:j?(0,e._)`"/" + ${y}`:(0,e._)`"/" + ${y}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return $?(0,e.getProperty)(y).toString():"/"+_(y)}H.getErrorPath=s;function f(y,h,$=y.opts.strictSchema){if($){if(h=`strict mode: ${h}`,$===!0)throw new Error(h);y.self.logger.warn(h)}}return H.checkStrictMode=f,H}var je={},Yt;function ve(){if(Yt)return je;Yt=1,Object.defineProperty(je,"__esModule",{value:!0});const e=J(),r={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return je.default=r,je}var Qt;function yt(){return Qt||(Qt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const r=J(),p=X(),i=ve();e.keywordError={message:({keyword:n})=>(0,r.str)`must pass "${n}" keyword validation`},e.keyword$DataError={message:({keyword:n,schemaType:a})=>a?(0,r.str)`"${n}" keyword must be ${a} ($data)`:(0,r.str)`"${n}" keyword is invalid ($data)`};function v(n,a=e.keywordError,t,s){const{it:f}=n,{gen:y,compositeRule:h,allErrors:$}=f,j=E(n,a,t);s??(h||$)?d(y,j):g(f,(0,r._)`[${j}]`)}e.reportError=v;function o(n,a=e.keywordError,t){const{it:s}=n,{gen:f,compositeRule:y,allErrors:h}=s,$=E(n,a,t);d(f,$),y||h||g(s,i.default.vErrors)}e.reportExtraError=o;function l(n,a){n.assign(i.default.errors,a),n.if((0,r._)`${i.default.vErrors} !== null`,()=>n.if(a,()=>n.assign((0,r._)`${i.default.vErrors}.length`,a),()=>n.assign(i.default.vErrors,null)))}e.resetErrorsCount=l;function u({gen:n,keyword:a,schemaValue:t,data:s,errsCount:f,it:y}){if(f===void 0)throw new Error("ajv implementation error");const h=n.name("err");n.forRange("i",f,i.default.errors,$=>{n.const(h,(0,r._)`${i.default.vErrors}[${$}]`),n.if((0,r._)`${h}.instancePath === undefined`,()=>n.assign((0,r._)`${h}.instancePath`,(0,r.strConcat)(i.default.instancePath,y.errorPath))),n.assign((0,r._)`${h}.schemaPath`,(0,r.str)`${y.errSchemaPath}/${a}`),y.opts.verbose&&(n.assign((0,r._)`${h}.schema`,t),n.assign((0,r._)`${h}.data`,s))})}e.extendErrors=u;function d(n,a){const t=n.const("err",a);n.if((0,r._)`${i.default.vErrors} === null`,()=>n.assign(i.default.vErrors,(0,r._)`[${t}]`),(0,r._)`${i.default.vErrors}.push(${t})`),n.code((0,r._)`${i.default.errors}++`)}function g(n,a){const{gen:t,validateName:s,schemaEnv:f}=n;f.$async?t.throw((0,r._)`new ${n.ValidationError}(${a})`):(t.assign((0,r._)`${s}.errors`,a),t.return(!1))}const _={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function E(n,a,t){const{createErrors:s}=n.it;return s===!1?(0,r._)`{}`:R(n,a,t)}function R(n,a,t={}){const{gen:s,it:f}=n,y=[P(f,t),m(n,t)];return b(n,a,y),s.object(...y)}function P({errorPath:n},{instancePath:a}){const t=a?(0,r.str)`${n}${(0,p.getErrorPath)(a,p.Type.Str)}`:n;return[i.default.instancePath,(0,r.strConcat)(i.default.instancePath,t)]}function m({keyword:n,it:{errSchemaPath:a}},{schemaPath:t,parentSchema:s}){let f=s?a:(0,r.str)`${a}/${n}`;return t&&(f=(0,r.str)`${f}${(0,p.getErrorPath)(t,p.Type.Str)}`),[_.schemaPath,f]}function b(n,{params:a,message:t},s){const{keyword:f,data:y,schemaValue:h,it:$}=n,{opts:j,propertyName:C,topSchemaRef:D,schemaPath:F}=$;s.push([_.keyword,f],[_.params,typeof a=="function"?a(n):a||(0,r._)`{}`]),j.messages&&s.push([_.message,typeof t=="function"?t(n):t]),j.verbose&&s.push([_.schema,h],[_.parentSchema,(0,r._)`${D}${F}`],[i.default.data,y]),C&&s.push([_.propertyName,C])}}(St)),St}var Zt;function Vn(){if(Zt)return ge;Zt=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.boolOrEmptySchema=ge.topBoolOrEmptySchema=void 0;const e=yt(),r=J(),p=ve(),i={message:"boolean schema is false"};function v(u){const{gen:d,schema:g,validateName:_}=u;g===!1?l(u,!1):typeof g=="object"&&g.$async===!0?d.return(p.default.data):(d.assign((0,r._)`${_}.errors`,null),d.return(!0))}ge.topBoolOrEmptySchema=v;function o(u,d){const{gen:g,schema:_}=u;_===!1?(g.var(d,!1),l(u)):g.var(d,!0)}ge.boolOrEmptySchema=o;function l(u,d){const{gen:g,data:_}=u,E={gen:g,keyword:"false schema",data:_,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,e.reportError)(E,i,void 0,d)}return ge}var re={},$e={},xt;function cn(){if(xt)return $e;xt=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.getRules=$e.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],r=new Set(e);function p(v){return typeof v=="string"&&r.has(v)}$e.isJSONType=p;function i(){const v={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...v,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},v.number,v.string,v.array,v.object],post:{rules:[]},all:{},keywords:{}}}return $e.getRules=i,$e}var pe={},er;function ln(){if(er)return pe;er=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.shouldUseRule=pe.shouldUseGroup=pe.schemaHasRulesForType=void 0;function e({schema:i,self:v},o){const l=v.RULES.types[o];return l&&l!==!0&&r(i,l)}pe.schemaHasRulesForType=e;function r(i,v){return v.rules.some(o=>p(i,o))}pe.shouldUseGroup=r;function p(i,v){var o;return i[v.keyword]!==void 0||((o=v.definition.implements)===null||o===void 0?void 0:o.some(l=>i[l]!==void 0))}return pe.shouldUseRule=p,pe}var tr;function mt(){if(tr)return re;tr=1,Object.defineProperty(re,"__esModule",{value:!0}),re.reportTypeError=re.checkDataTypes=re.checkDataType=re.coerceAndCheckDataType=re.getJSONTypes=re.getSchemaTypes=re.DataType=void 0;const e=cn(),r=ln(),p=yt(),i=J(),v=X();var o;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(o||(re.DataType=o={}));function l(t){const s=u(t.type);if(s.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!s.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&s.push("null")}return s}re.getSchemaTypes=l;function u(t){const s=Array.isArray(t)?t:t?[t]:[];if(s.every(e.isJSONType))return s;throw new Error("type must be JSONType or JSONType[]: "+s.join(","))}re.getJSONTypes=u;function d(t,s){const{gen:f,data:y,opts:h}=t,$=_(s,h.coerceTypes),j=s.length>0&&!($.length===0&&s.length===1&&(0,r.schemaHasRulesForType)(t,s[0]));if(j){const C=m(s,y,h.strictNumbers,o.Wrong);f.if(C,()=>{$.length?E(t,s,$):n(t)})}return j}re.coerceAndCheckDataType=d;const g=new Set(["string","number","integer","boolean","null"]);function _(t,s){return s?t.filter(f=>g.has(f)||s==="array"&&f==="array"):[]}function E(t,s,f){const{gen:y,data:h,opts:$}=t,j=y.let("dataType",(0,i._)`typeof ${h}`),C=y.let("coerced",(0,i._)`undefined`);$.coerceTypes==="array"&&y.if((0,i._)`${j} == 'object' && Array.isArray(${h}) && ${h}.length == 1`,()=>y.assign(h,(0,i._)`${h}[0]`).assign(j,(0,i._)`typeof ${h}`).if(m(s,h,$.strictNumbers),()=>y.assign(C,h))),y.if((0,i._)`${C} !== undefined`);for(const F of f)(g.has(F)||F==="array"&&$.coerceTypes==="array")&&D(F);y.else(),n(t),y.endIf(),y.if((0,i._)`${C} !== undefined`,()=>{y.assign(h,C),R(t,C)});function D(F){switch(F){case"string":y.elseIf((0,i._)`${j} == "number" || ${j} == "boolean"`).assign(C,(0,i._)`"" + ${h}`).elseIf((0,i._)`${h} === null`).assign(C,(0,i._)`""`);return;case"number":y.elseIf((0,i._)`${j} == "boolean" || ${h} === null
              || (${j} == "string" && ${h} && ${h} == +${h})`).assign(C,(0,i._)`+${h}`);return;case"integer":y.elseIf((0,i._)`${j} === "boolean" || ${h} === null
              || (${j} === "string" && ${h} && ${h} == +${h} && !(${h} % 1))`).assign(C,(0,i._)`+${h}`);return;case"boolean":y.elseIf((0,i._)`${h} === "false" || ${h} === 0 || ${h} === null`).assign(C,!1).elseIf((0,i._)`${h} === "true" || ${h} === 1`).assign(C,!0);return;case"null":y.elseIf((0,i._)`${h} === "" || ${h} === 0 || ${h} === false`),y.assign(C,null);return;case"array":y.elseIf((0,i._)`${j} === "string" || ${j} === "number"
              || ${j} === "boolean" || ${h} === null`).assign(C,(0,i._)`[${h}]`)}}}function R({gen:t,parentData:s,parentDataProperty:f},y){t.if((0,i._)`${s} !== undefined`,()=>t.assign((0,i._)`${s}[${f}]`,y))}function P(t,s,f,y=o.Correct){const h=y===o.Correct?i.operators.EQ:i.operators.NEQ;let $;switch(t){case"null":return(0,i._)`${s} ${h} null`;case"array":$=(0,i._)`Array.isArray(${s})`;break;case"object":$=(0,i._)`${s} && typeof ${s} == "object" && !Array.isArray(${s})`;break;case"integer":$=j((0,i._)`!(${s} % 1) && !isNaN(${s})`);break;case"number":$=j();break;default:return(0,i._)`typeof ${s} ${h} ${t}`}return y===o.Correct?$:(0,i.not)($);function j(C=i.nil){return(0,i.and)((0,i._)`typeof ${s} == "number"`,C,f?(0,i._)`isFinite(${s})`:i.nil)}}re.checkDataType=P;function m(t,s,f,y){if(t.length===1)return P(t[0],s,f,y);let h;const $=(0,v.toHash)(t);if($.array&&$.object){const j=(0,i._)`typeof ${s} != "object"`;h=$.null?j:(0,i._)`!${s} || ${j}`,delete $.null,delete $.array,delete $.object}else h=i.nil;$.number&&delete $.integer;for(const j in $)h=(0,i.and)(h,P(j,s,f,y));return h}re.checkDataTypes=m;const b={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:s})=>typeof t=="string"?(0,i._)`{type: ${t}}`:(0,i._)`{type: ${s}}`};function n(t){const s=a(t);(0,p.reportError)(s,b)}re.reportTypeError=n;function a(t){const{gen:s,data:f,schema:y}=t,h=(0,v.schemaRefOrVal)(t,y,"type");return{gen:s,keyword:"type",data:f,schema:y.type,schemaCode:h,schemaValue:h,parentSchema:y,params:{},it:t}}return re}var Re={},rr;function Fn(){if(rr)return Re;rr=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.assignDefaults=void 0;const e=J(),r=X();function p(v,o){const{properties:l,items:u}=v.schema;if(o==="object"&&l)for(const d in l)i(v,d,l[d].default);else o==="array"&&Array.isArray(u)&&u.forEach((d,g)=>i(v,g,d.default))}Re.assignDefaults=p;function i(v,o,l){const{gen:u,compositeRule:d,data:g,opts:_}=v;if(l===void 0)return;const E=(0,e._)`${g}${(0,e.getProperty)(o)}`;if(d){(0,r.checkStrictMode)(v,`default is ignored for: ${E}`);return}let R=(0,e._)`${E} === undefined`;_.useDefaults==="empty"&&(R=(0,e._)`${R} || ${E} === null || ${E} === ""`),u.if(R,(0,e._)`${E} = ${(0,e.stringify)(l)}`)}return Re}var ce={},Q={},nr;function le(){if(nr)return Q;nr=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.validateUnion=Q.validateArray=Q.usePattern=Q.callValidateCode=Q.schemaProperties=Q.allSchemaProperties=Q.noPropertyInData=Q.propertyInData=Q.isOwnProperty=Q.hasPropFunc=Q.reportMissingProp=Q.checkMissingProp=Q.checkReportMissingProp=void 0;const e=J(),r=X(),p=ve(),i=X();function v(t,s){const{gen:f,data:y,it:h}=t;f.if(_(f,y,s,h.opts.ownProperties),()=>{t.setParams({missingProperty:(0,e._)`${s}`},!0),t.error()})}Q.checkReportMissingProp=v;function o({gen:t,data:s,it:{opts:f}},y,h){return(0,e.or)(...y.map($=>(0,e.and)(_(t,s,$,f.ownProperties),(0,e._)`${h} = ${$}`)))}Q.checkMissingProp=o;function l(t,s){t.setParams({missingProperty:s},!0),t.error()}Q.reportMissingProp=l;function u(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Q.hasPropFunc=u;function d(t,s,f){return(0,e._)`${u(t)}.call(${s}, ${f})`}Q.isOwnProperty=d;function g(t,s,f,y){const h=(0,e._)`${s}${(0,e.getProperty)(f)} !== undefined`;return y?(0,e._)`${h} && ${d(t,s,f)}`:h}Q.propertyInData=g;function _(t,s,f,y){const h=(0,e._)`${s}${(0,e.getProperty)(f)} === undefined`;return y?(0,e.or)(h,(0,e.not)(d(t,s,f))):h}Q.noPropertyInData=_;function E(t){return t?Object.keys(t).filter(s=>s!=="__proto__"):[]}Q.allSchemaProperties=E;function R(t,s){return E(s).filter(f=>!(0,r.alwaysValidSchema)(t,s[f]))}Q.schemaProperties=R;function P({schemaCode:t,data:s,it:{gen:f,topSchemaRef:y,schemaPath:h,errorPath:$},it:j},C,D,F){const L=F?(0,e._)`${t}, ${s}, ${y}${h}`:s,K=[[p.default.instancePath,(0,e.strConcat)(p.default.instancePath,$)],[p.default.parentData,j.parentData],[p.default.parentDataProperty,j.parentDataProperty],[p.default.rootData,p.default.rootData]];j.opts.dynamicRef&&K.push([p.default.dynamicAnchors,p.default.dynamicAnchors]);const B=(0,e._)`${L}, ${f.object(...K)}`;return D!==e.nil?(0,e._)`${C}.call(${D}, ${B})`:(0,e._)`${C}(${B})`}Q.callValidateCode=P;const m=(0,e._)`new RegExp`;function b({gen:t,it:{opts:s}},f){const y=s.unicodeRegExp?"u":"",{regExp:h}=s.code,$=h(f,y);return t.scopeValue("pattern",{key:$.toString(),ref:$,code:(0,e._)`${h.code==="new RegExp"?m:(0,i.useFunc)(t,h)}(${f}, ${y})`})}Q.usePattern=b;function n(t){const{gen:s,data:f,keyword:y,it:h}=t,$=s.name("valid");if(h.allErrors){const C=s.let("valid",!0);return j(()=>s.assign(C,!1)),C}return s.var($,!0),j(()=>s.break()),$;function j(C){const D=s.const("len",(0,e._)`${f}.length`);s.forRange("i",0,D,F=>{t.subschema({keyword:y,dataProp:F,dataPropType:r.Type.Num},$),s.if((0,e.not)($),C)})}}Q.validateArray=n;function a(t){const{gen:s,schema:f,keyword:y,it:h}=t;if(!Array.isArray(f))throw new Error("ajv implementation error");if(f.some(D=>(0,r.alwaysValidSchema)(h,D))&&!h.opts.unevaluated)return;const j=s.let("valid",!1),C=s.name("_valid");s.block(()=>f.forEach((D,F)=>{const L=t.subschema({keyword:y,schemaProp:F,compositeRule:!0},C);s.assign(j,(0,e._)`${j} || ${C}`),t.mergeValidEvaluated(L,C)||s.if((0,e.not)(j))})),t.result(j,()=>t.reset(),()=>t.error(!0))}return Q.validateUnion=a,Q}var sr;function Un(){if(sr)return ce;sr=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.validateKeywordUsage=ce.validSchemaType=ce.funcKeywordCode=ce.macroKeywordCode=void 0;const e=J(),r=ve(),p=le(),i=yt();function v(R,P){const{gen:m,keyword:b,schema:n,parentSchema:a,it:t}=R,s=P.macro.call(t.self,n,a,t),f=g(m,b,s);t.opts.validateSchema!==!1&&t.self.validateSchema(s,!0);const y=m.name("valid");R.subschema({schema:s,schemaPath:e.nil,errSchemaPath:`${t.errSchemaPath}/${b}`,topSchemaRef:f,compositeRule:!0},y),R.pass(y,()=>R.error(!0))}ce.macroKeywordCode=v;function o(R,P){var m;const{gen:b,keyword:n,schema:a,parentSchema:t,$data:s,it:f}=R;d(f,P);const y=!s&&P.compile?P.compile.call(f.self,a,t,f):P.validate,h=g(b,n,y),$=b.let("valid");R.block$data($,j),R.ok((m=P.valid)!==null&&m!==void 0?m:$);function j(){if(P.errors===!1)F(),P.modifying&&l(R),L(()=>R.error());else{const K=P.async?C():D();P.modifying&&l(R),L(()=>u(R,K))}}function C(){const K=b.let("ruleErrs",null);return b.try(()=>F((0,e._)`await `),B=>b.assign($,!1).if((0,e._)`${B} instanceof ${f.ValidationError}`,()=>b.assign(K,(0,e._)`${B}.errors`),()=>b.throw(B))),K}function D(){const K=(0,e._)`${h}.errors`;return b.assign(K,null),F(e.nil),K}function F(K=P.async?(0,e._)`await `:e.nil){const B=f.opts.passContext?r.default.this:r.default.self,x=!("compile"in P&&!s||P.schema===!1);b.assign($,(0,e._)`${K}${(0,p.callValidateCode)(R,h,B,x)}`,P.modifying)}function L(K){var B;b.if((0,e.not)((B=P.valid)!==null&&B!==void 0?B:$),K)}}ce.funcKeywordCode=o;function l(R){const{gen:P,data:m,it:b}=R;P.if(b.parentData,()=>P.assign(m,(0,e._)`${b.parentData}[${b.parentDataProperty}]`))}function u(R,P){const{gen:m}=R;m.if((0,e._)`Array.isArray(${P})`,()=>{m.assign(r.default.vErrors,(0,e._)`${r.default.vErrors} === null ? ${P} : ${r.default.vErrors}.concat(${P})`).assign(r.default.errors,(0,e._)`${r.default.vErrors}.length`),(0,i.extendErrors)(R)},()=>R.error())}function d({schemaEnv:R},P){if(P.async&&!R.$async)throw new Error("async keyword in sync schema")}function g(R,P,m){if(m===void 0)throw new Error(`keyword "${P}" failed to compile`);return R.scopeValue("keyword",typeof m=="function"?{ref:m}:{ref:m,code:(0,e.stringify)(m)})}function _(R,P,m=!1){return!P.length||P.some(b=>b==="array"?Array.isArray(R):b==="object"?R&&typeof R=="object"&&!Array.isArray(R):typeof R==b||m&&typeof R>"u")}ce.validSchemaType=_;function E({schema:R,opts:P,self:m,errSchemaPath:b},n,a){if(Array.isArray(n.keyword)?!n.keyword.includes(a):n.keyword!==a)throw new Error("ajv implementation error");const t=n.dependencies;if(t?.some(s=>!Object.prototype.hasOwnProperty.call(R,s)))throw new Error(`parent schema must have dependencies of ${a}: ${t.join(",")}`);if(n.validateSchema&&!n.validateSchema(R[a])){const f=`keyword "${a}" value is invalid at path "${b}": `+m.errorsText(n.validateSchema.errors);if(P.validateSchema==="log")m.logger.error(f);else throw new Error(f)}}return ce.validateKeywordUsage=E,ce}var me={},ar;function zn(){if(ar)return me;ar=1,Object.defineProperty(me,"__esModule",{value:!0}),me.extendSubschemaMode=me.extendSubschemaData=me.getSubschema=void 0;const e=J(),r=X();function p(o,{keyword:l,schemaProp:u,schema:d,schemaPath:g,errSchemaPath:_,topSchemaRef:E}){if(l!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const R=o.schema[l];return u===void 0?{schema:R,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(l)}`,errSchemaPath:`${o.errSchemaPath}/${l}`}:{schema:R[u],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(l)}${(0,e.getProperty)(u)}`,errSchemaPath:`${o.errSchemaPath}/${l}/${(0,r.escapeFragment)(u)}`}}if(d!==void 0){if(g===void 0||_===void 0||E===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:g,topSchemaRef:E,errSchemaPath:_}}throw new Error('either "keyword" or "schema" must be passed')}me.getSubschema=p;function i(o,l,{dataProp:u,dataPropType:d,data:g,dataTypes:_,propertyName:E}){if(g!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:R}=l;if(u!==void 0){const{errorPath:m,dataPathArr:b,opts:n}=l,a=R.let("data",(0,e._)`${l.data}${(0,e.getProperty)(u)}`,!0);P(a),o.errorPath=(0,e.str)`${m}${(0,r.getErrorPath)(u,d,n.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${u}`,o.dataPathArr=[...b,o.parentDataProperty]}if(g!==void 0){const m=g instanceof e.Name?g:R.let("data",g,!0);P(m),E!==void 0&&(o.propertyName=E)}_&&(o.dataTypes=_);function P(m){o.data=m,o.dataLevel=l.dataLevel+1,o.dataTypes=[],l.definedProperties=new Set,o.parentData=l.data,o.dataNames=[...l.dataNames,m]}}me.extendSubschemaData=i;function v(o,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:d,createErrors:g,allErrors:_}){d!==void 0&&(o.compositeRule=d),g!==void 0&&(o.createErrors=g),_!==void 0&&(o.allErrors=_),o.jtdDiscriminator=l,o.jtdMetadata=u}return me.extendSubschemaMode=v,me}var ne={},Ot,or;function dn(){return or||(or=1,Ot=function e(r,p){if(r===p)return!0;if(r&&p&&typeof r=="object"&&typeof p=="object"){if(r.constructor!==p.constructor)return!1;var i,v,o;if(Array.isArray(r)){if(i=r.length,i!=p.length)return!1;for(v=i;v--!==0;)if(!e(r[v],p[v]))return!1;return!0}if(r.constructor===RegExp)return r.source===p.source&&r.flags===p.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===p.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===p.toString();if(o=Object.keys(r),i=o.length,i!==Object.keys(p).length)return!1;for(v=i;v--!==0;)if(!Object.prototype.hasOwnProperty.call(p,o[v]))return!1;for(v=i;v--!==0;){var l=o[v];if(!e(r[l],p[l]))return!1}return!0}return r!==r&&p!==p}),Ot}var kt={exports:{}},ir;function Kn(){if(ir)return kt.exports;ir=1;var e=kt.exports=function(i,v,o){typeof v=="function"&&(o=v,v={}),o=v.cb||o;var l=typeof o=="function"?o:o.pre||function(){},u=o.post||function(){};r(v,l,u,i,"",i)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function r(i,v,o,l,u,d,g,_,E,R){if(l&&typeof l=="object"&&!Array.isArray(l)){v(l,u,d,g,_,E,R);for(var P in l){var m=l[P];if(Array.isArray(m)){if(P in e.arrayKeywords)for(var b=0;b<m.length;b++)r(i,v,o,m[b],u+"/"+P+"/"+b,d,u,P,l,b)}else if(P in e.propsKeywords){if(m&&typeof m=="object")for(var n in m)r(i,v,o,m[n],u+"/"+P+"/"+p(n),d,u,P,l,n)}else(P in e.keywords||i.allKeys&&!(P in e.skipKeywords))&&r(i,v,o,m,u+"/"+P,d,u,P,l)}o(l,u,d,g,_,E,R)}}function p(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}return kt.exports}var ur;function _t(){if(ur)return ne;ur=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.getSchemaRefs=ne.resolveUrl=ne.normalizeId=ne._getFullPath=ne.getFullPath=ne.inlineRef=void 0;const e=X(),r=dn(),p=Kn(),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function v(b,n=!0){return typeof b=="boolean"?!0:n===!0?!l(b):n?u(b)<=n:!1}ne.inlineRef=v;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(b){for(const n in b){if(o.has(n))return!0;const a=b[n];if(Array.isArray(a)&&a.some(l)||typeof a=="object"&&l(a))return!0}return!1}function u(b){let n=0;for(const a in b){if(a==="$ref")return 1/0;if(n++,!i.has(a)&&(typeof b[a]=="object"&&(0,e.eachItem)(b[a],t=>n+=u(t)),n===1/0))return 1/0}return n}function d(b,n="",a){a!==!1&&(n=E(n));const t=b.parse(n);return g(b,t)}ne.getFullPath=d;function g(b,n){return b.serialize(n).split("#")[0]+"#"}ne._getFullPath=g;const _=/#\/?$/;function E(b){return b?b.replace(_,""):""}ne.normalizeId=E;function R(b,n,a){return a=E(a),b.resolve(n,a)}ne.resolveUrl=R;const P=/^[a-z_][-a-z0-9._]*$/i;function m(b,n){if(typeof b=="boolean")return{};const{schemaId:a,uriResolver:t}=this.opts,s=E(b[a]||n),f={"":s},y=d(t,s,!1),h={},$=new Set;return p(b,{allKeys:!0},(D,F,L,K)=>{if(K===void 0)return;const B=y+F;let x=f[K];typeof D[a]=="string"&&(x=de.call(this,D[a])),fe.call(this,D.$anchor),fe.call(this,D.$dynamicAnchor),f[F]=x;function de(Z){const ye=this.opts.uriResolver.resolve;if(Z=E(x?ye(x,Z):Z),$.has(Z))throw C(Z);$.add(Z);let A=this.refs[Z];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?j(D,A.schema,Z):Z!==E(B)&&(Z[0]==="#"?(j(D,h[Z],Z),h[Z]=D):this.refs[Z]=B),Z}function fe(Z){if(typeof Z=="string"){if(!P.test(Z))throw new Error(`invalid anchor "${Z}"`);de.call(this,`#${Z}`)}}}),h;function j(D,F,L){if(F!==void 0&&!r(D,F))throw C(L)}function C(D){return new Error(`reference "${D}" resolves to more than one schema`)}}return ne.getSchemaRefs=m,ne}var cr;function vt(){if(cr)return he;cr=1,Object.defineProperty(he,"__esModule",{value:!0}),he.getData=he.KeywordCxt=he.validateFunctionCode=void 0;const e=Vn(),r=mt(),p=ln(),i=mt(),v=Fn(),o=Un(),l=zn(),u=J(),d=ve(),g=_t(),_=X(),E=yt();function R(S){if(y(S)&&($(S),f(S))){n(S);return}P(S,()=>(0,e.topBoolOrEmptySchema)(S))}he.validateFunctionCode=R;function P({gen:S,validateName:O,schema:T,schemaEnv:M,opts:U},G){U.code.es5?S.func(O,(0,u._)`${d.default.data}, ${d.default.valCxt}`,M.$async,()=>{S.code((0,u._)`"use strict"; ${t(T,U)}`),b(S,U),S.code(G)}):S.func(O,(0,u._)`${d.default.data}, ${m(U)}`,M.$async,()=>S.code(t(T,U)).code(G))}function m(S){return(0,u._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${S.dynamicRef?(0,u._)`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}function b(S,O){S.if(d.default.valCxt,()=>{S.var(d.default.instancePath,(0,u._)`${d.default.valCxt}.${d.default.instancePath}`),S.var(d.default.parentData,(0,u._)`${d.default.valCxt}.${d.default.parentData}`),S.var(d.default.parentDataProperty,(0,u._)`${d.default.valCxt}.${d.default.parentDataProperty}`),S.var(d.default.rootData,(0,u._)`${d.default.valCxt}.${d.default.rootData}`),O.dynamicRef&&S.var(d.default.dynamicAnchors,(0,u._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{S.var(d.default.instancePath,(0,u._)`""`),S.var(d.default.parentData,(0,u._)`undefined`),S.var(d.default.parentDataProperty,(0,u._)`undefined`),S.var(d.default.rootData,d.default.data),O.dynamicRef&&S.var(d.default.dynamicAnchors,(0,u._)`{}`)})}function n(S){const{schema:O,opts:T,gen:M}=S;P(S,()=>{T.$comment&&O.$comment&&K(S),D(S),M.let(d.default.vErrors,null),M.let(d.default.errors,0),T.unevaluated&&a(S),j(S),B(S)})}function a(S){const{gen:O,validateName:T}=S;S.evaluated=O.const("evaluated",(0,u._)`${T}.evaluated`),O.if((0,u._)`${S.evaluated}.dynamicProps`,()=>O.assign((0,u._)`${S.evaluated}.props`,(0,u._)`undefined`)),O.if((0,u._)`${S.evaluated}.dynamicItems`,()=>O.assign((0,u._)`${S.evaluated}.items`,(0,u._)`undefined`))}function t(S,O){const T=typeof S=="object"&&S[O.schemaId];return T&&(O.code.source||O.code.process)?(0,u._)`/*# sourceURL=${T} */`:u.nil}function s(S,O){if(y(S)&&($(S),f(S))){h(S,O);return}(0,e.boolOrEmptySchema)(S,O)}function f({schema:S,self:O}){if(typeof S=="boolean")return!S;for(const T in S)if(O.RULES.all[T])return!0;return!1}function y(S){return typeof S.schema!="boolean"}function h(S,O){const{schema:T,gen:M,opts:U}=S;U.$comment&&T.$comment&&K(S),F(S),L(S);const G=M.const("_errs",d.default.errors);j(S,G),M.var(O,(0,u._)`${G} === ${d.default.errors}`)}function $(S){(0,_.checkUnknownRules)(S),C(S)}function j(S,O){if(S.opts.jtd)return de(S,[],!1,O);const T=(0,r.getSchemaTypes)(S.schema),M=(0,r.coerceAndCheckDataType)(S,T);de(S,T,!M,O)}function C(S){const{schema:O,errSchemaPath:T,opts:M,self:U}=S;O.$ref&&M.ignoreKeywordsWithRef&&(0,_.schemaHasRulesButRef)(O,U.RULES)&&U.logger.warn(`$ref: keywords ignored in schema at path "${T}"`)}function D(S){const{schema:O,opts:T}=S;O.default!==void 0&&T.useDefaults&&T.strictSchema&&(0,_.checkStrictMode)(S,"default is ignored in the schema root")}function F(S){const O=S.schema[S.opts.schemaId];O&&(S.baseId=(0,g.resolveUrl)(S.opts.uriResolver,S.baseId,O))}function L(S){if(S.schema.$async&&!S.schemaEnv.$async)throw new Error("async schema in sync schema")}function K({gen:S,schemaEnv:O,schema:T,errSchemaPath:M,opts:U}){const G=T.$comment;if(U.$comment===!0)S.code((0,u._)`${d.default.self}.logger.log(${G})`);else if(typeof U.$comment=="function"){const ee=(0,u.str)`${M}/$comment`,ue=S.scopeValue("root",{ref:O.root});S.code((0,u._)`${d.default.self}.opts.$comment(${G}, ${ee}, ${ue}.schema)`)}}function B(S){const{gen:O,schemaEnv:T,validateName:M,ValidationError:U,opts:G}=S;T.$async?O.if((0,u._)`${d.default.errors} === 0`,()=>O.return(d.default.data),()=>O.throw((0,u._)`new ${U}(${d.default.vErrors})`)):(O.assign((0,u._)`${M}.errors`,d.default.vErrors),G.unevaluated&&x(S),O.return((0,u._)`${d.default.errors} === 0`))}function x({gen:S,evaluated:O,props:T,items:M}){T instanceof u.Name&&S.assign((0,u._)`${O}.props`,T),M instanceof u.Name&&S.assign((0,u._)`${O}.items`,M)}function de(S,O,T,M){const{gen:U,schema:G,data:ee,allErrors:ue,opts:se,self:ae}=S,{RULES:te}=ae;if(G.$ref&&(se.ignoreKeywordsWithRef||!(0,_.schemaHasRulesButRef)(G,te))){U.block(()=>V(S,"$ref",te.all.$ref.definition));return}se.jtd||Z(S,O),U.block(()=>{for(const ie of te.rules)be(ie);be(te.post)});function be(ie){(0,p.shouldUseGroup)(G,ie)&&(ie.type?(U.if((0,i.checkDataType)(ie.type,ee,se.strictNumbers)),fe(S,ie),O.length===1&&O[0]===ie.type&&T&&(U.else(),(0,i.reportTypeError)(S)),U.endIf()):fe(S,ie),ue||U.if((0,u._)`${d.default.errors} === ${M||0}`))}}function fe(S,O){const{gen:T,schema:M,opts:{useDefaults:U}}=S;U&&(0,v.assignDefaults)(S,O.type),T.block(()=>{for(const G of O.rules)(0,p.shouldUseRule)(M,G)&&V(S,G.keyword,G.definition,O.type)})}function Z(S,O){S.schemaEnv.meta||!S.opts.strictTypes||(ye(S,O),S.opts.allowUnionTypes||A(S,O),N(S,S.dataTypes))}function ye(S,O){if(O.length){if(!S.dataTypes.length){S.dataTypes=O;return}O.forEach(T=>{k(S.dataTypes,T)||w(S,`type "${T}" not allowed by context "${S.dataTypes.join(",")}"`)}),c(S,O)}}function A(S,O){O.length>1&&!(O.length===2&&O.includes("null"))&&w(S,"use allowUnionTypes to allow union type keyword")}function N(S,O){const T=S.self.RULES.all;for(const M in T){const U=T[M];if(typeof U=="object"&&(0,p.shouldUseRule)(S.schema,U)){const{type:G}=U.definition;G.length&&!G.some(ee=>q(O,ee))&&w(S,`missing type "${G.join(",")}" for keyword "${M}"`)}}}function q(S,O){return S.includes(O)||O==="number"&&S.includes("integer")}function k(S,O){return S.includes(O)||O==="integer"&&S.includes("number")}function c(S,O){const T=[];for(const M of S.dataTypes)k(O,M)?T.push(M):O.includes("integer")&&M==="number"&&T.push("integer");S.dataTypes=T}function w(S,O){const T=S.schemaEnv.baseId+S.errSchemaPath;O+=` at "${T}" (strictTypes)`,(0,_.checkStrictMode)(S,O,S.opts.strictTypes)}class I{constructor(O,T,M){if((0,o.validateKeywordUsage)(O,T,M),this.gen=O.gen,this.allErrors=O.allErrors,this.keyword=M,this.data=O.data,this.schema=O.schema[M],this.$data=T.$data&&O.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,_.schemaRefOrVal)(O,this.schema,M,this.$data),this.schemaType=T.schemaType,this.parentSchema=O.schema,this.params={},this.it=O,this.def=T,this.$data)this.schemaCode=O.gen.const("vSchema",W(this.$data,O));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,T.schemaType,T.allowUndefined))throw new Error(`${M} value must be ${JSON.stringify(T.schemaType)}`);("code"in T?T.trackErrors:T.errors!==!1)&&(this.errsCount=O.gen.const("_errs",d.default.errors))}result(O,T,M){this.failResult((0,u.not)(O),T,M)}failResult(O,T,M){this.gen.if(O),M?M():this.error(),T?(this.gen.else(),T(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(O,T){this.failResult((0,u.not)(O),void 0,T)}fail(O){if(O===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(O),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(O){if(!this.$data)return this.fail(O);const{schemaCode:T}=this;this.fail((0,u._)`${T} !== undefined && (${(0,u.or)(this.invalid$data(),O)})`)}error(O,T,M){if(T){this.setParams(T),this._error(O,M),this.setParams({});return}this._error(O,M)}_error(O,T){(O?E.reportExtraError:E.reportError)(this,this.def.error,T)}$dataError(){(0,E.reportError)(this,this.def.$dataError||E.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,E.resetErrorsCount)(this.gen,this.errsCount)}ok(O){this.allErrors||this.gen.if(O)}setParams(O,T){T?Object.assign(this.params,O):this.params=O}block$data(O,T,M=u.nil){this.gen.block(()=>{this.check$data(O,M),T()})}check$data(O=u.nil,T=u.nil){if(!this.$data)return;const{gen:M,schemaCode:U,schemaType:G,def:ee}=this;M.if((0,u.or)((0,u._)`${U} === undefined`,T)),O!==u.nil&&M.assign(O,!0),(G.length||ee.validateSchema)&&(M.elseIf(this.invalid$data()),this.$dataError(),O!==u.nil&&M.assign(O,!1)),M.else()}invalid$data(){const{gen:O,schemaCode:T,schemaType:M,def:U,it:G}=this;return(0,u.or)(ee(),ue());function ee(){if(M.length){if(!(T instanceof u.Name))throw new Error("ajv implementation error");const se=Array.isArray(M)?M:[M];return(0,u._)`${(0,i.checkDataTypes)(se,T,G.opts.strictNumbers,i.DataType.Wrong)}`}return u.nil}function ue(){if(U.validateSchema){const se=O.scopeValue("validate$data",{ref:U.validateSchema});return(0,u._)`!${se}(${T})`}return u.nil}}subschema(O,T){const M=(0,l.getSubschema)(this.it,O);(0,l.extendSubschemaData)(M,this.it,O),(0,l.extendSubschemaMode)(M,O);const U={...this.it,...M,items:void 0,props:void 0};return s(U,T),U}mergeEvaluated(O,T){const{it:M,gen:U}=this;M.opts.unevaluated&&(M.props!==!0&&O.props!==void 0&&(M.props=_.mergeEvaluated.props(U,O.props,M.props,T)),M.items!==!0&&O.items!==void 0&&(M.items=_.mergeEvaluated.items(U,O.items,M.items,T)))}mergeValidEvaluated(O,T){const{it:M,gen:U}=this;if(M.opts.unevaluated&&(M.props!==!0||M.items!==!0))return U.if(T,()=>this.mergeEvaluated(O,u.Name)),!0}}he.KeywordCxt=I;function V(S,O,T,M){const U=new I(S,T,O);"code"in T?T.code(U,M):U.$data&&T.validate?(0,o.funcKeywordCode)(U,T):"macro"in T?(0,o.macroKeywordCode)(U,T):(T.compile||T.validate)&&(0,o.funcKeywordCode)(U,T)}const z=/^\/(?:[^~]|~0|~1)*$/,Y=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W(S,{dataLevel:O,dataNames:T,dataPathArr:M}){let U,G;if(S==="")return d.default.rootData;if(S[0]==="/"){if(!z.test(S))throw new Error(`Invalid JSON-pointer: ${S}`);U=S,G=d.default.rootData}else{const ae=Y.exec(S);if(!ae)throw new Error(`Invalid JSON-pointer: ${S}`);const te=+ae[1];if(U=ae[2],U==="#"){if(te>=O)throw new Error(se("property/index",te));return M[O-te]}if(te>O)throw new Error(se("data",te));if(G=T[O-te],!U)return G}let ee=G;const ue=U.split("/");for(const ae of ue)ae&&(G=(0,u._)`${G}${(0,u.getProperty)((0,_.unescapeJsonPointer)(ae))}`,ee=(0,u._)`${ee} && ${G}`);return ee;function se(ae,te){return`Cannot access ${ae} ${te} levels up, current level is ${O}`}}return he.getData=W,he}var Ie={},lr;function At(){if(lr)return Ie;lr=1,Object.defineProperty(Ie,"__esModule",{value:!0});class e extends Error{constructor(p){super("validation failed"),this.errors=p,this.ajv=this.validation=!0}}return Ie.default=e,Ie}var Te={},dr;function gt(){if(dr)return Te;dr=1,Object.defineProperty(Te,"__esModule",{value:!0});const e=_t();class r extends Error{constructor(i,v,o,l){super(l||`can't resolve reference ${o} from id ${v}`),this.missingRef=(0,e.resolveUrl)(i,v,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(i,this.missingRef))}}return Te.default=r,Te}var oe={},fr;function Mt(){if(fr)return oe;fr=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.resolveSchema=oe.getCompilingSchema=oe.resolveRef=oe.compileSchema=oe.SchemaEnv=void 0;const e=J(),r=At(),p=ve(),i=_t(),v=X(),o=vt();class l{constructor(a){var t;this.refs={},this.dynamicAnchors={};let s;typeof a.schema=="object"&&(s=a.schema),this.schema=a.schema,this.schemaId=a.schemaId,this.root=a.root||this,this.baseId=(t=a.baseId)!==null&&t!==void 0?t:(0,i.normalizeId)(s?.[a.schemaId||"$id"]),this.schemaPath=a.schemaPath,this.localRefs=a.localRefs,this.meta=a.meta,this.$async=s?.$async,this.refs={}}}oe.SchemaEnv=l;function u(n){const a=_.call(this,n);if(a)return a;const t=(0,i.getFullPath)(this.opts.uriResolver,n.root.baseId),{es5:s,lines:f}=this.opts.code,{ownProperties:y}=this.opts,h=new e.CodeGen(this.scope,{es5:s,lines:f,ownProperties:y});let $;n.$async&&($=h.scopeValue("Error",{ref:r.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const j=h.scopeName("validate");n.validateName=j;const C={gen:h,allErrors:this.opts.allErrors,data:p.default.data,parentData:p.default.parentData,parentDataProperty:p.default.parentDataProperty,dataNames:[p.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",this.opts.code.source===!0?{ref:n.schema,code:(0,e.stringify)(n.schema)}:{ref:n.schema}),validateName:j,ValidationError:$,schema:n.schema,schemaEnv:n,rootId:t,baseId:n.baseId||t,schemaPath:e.nil,errSchemaPath:n.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let D;try{this._compilations.add(n),(0,o.validateFunctionCode)(C),h.optimize(this.opts.code.optimize);const F=h.toString();D=`${h.scopeRefs(p.default.scope)}return ${F}`,this.opts.code.process&&(D=this.opts.code.process(D,n));const K=new Function(`${p.default.self}`,`${p.default.scope}`,D)(this,this.scope.get());if(this.scope.value(j,{ref:K}),K.errors=null,K.schema=n.schema,K.schemaEnv=n,n.$async&&(K.$async=!0),this.opts.code.source===!0&&(K.source={validateName:j,validateCode:F,scopeValues:h._values}),this.opts.unevaluated){const{props:B,items:x}=C;K.evaluated={props:B instanceof e.Name?void 0:B,items:x instanceof e.Name?void 0:x,dynamicProps:B instanceof e.Name,dynamicItems:x instanceof e.Name},K.source&&(K.source.evaluated=(0,e.stringify)(K.evaluated))}return n.validate=K,n}catch(F){throw delete n.validate,delete n.validateName,D&&this.logger.error("Error compiling schema, function code:",D),F}finally{this._compilations.delete(n)}}oe.compileSchema=u;function d(n,a,t){var s;t=(0,i.resolveUrl)(this.opts.uriResolver,a,t);const f=n.refs[t];if(f)return f;let y=R.call(this,n,t);if(y===void 0){const h=(s=n.localRefs)===null||s===void 0?void 0:s[t],{schemaId:$}=this.opts;h&&(y=new l({schema:h,schemaId:$,root:n,baseId:a}))}if(y!==void 0)return n.refs[t]=g.call(this,y)}oe.resolveRef=d;function g(n){return(0,i.inlineRef)(n.schema,this.opts.inlineRefs)?n.schema:n.validate?n:u.call(this,n)}function _(n){for(const a of this._compilations)if(E(a,n))return a}oe.getCompilingSchema=_;function E(n,a){return n.schema===a.schema&&n.root===a.root&&n.baseId===a.baseId}function R(n,a){let t;for(;typeof(t=this.refs[a])=="string";)a=t;return t||this.schemas[a]||P.call(this,n,a)}function P(n,a){const t=this.opts.uriResolver.parse(a),s=(0,i._getFullPath)(this.opts.uriResolver,t);let f=(0,i.getFullPath)(this.opts.uriResolver,n.baseId,void 0);if(Object.keys(n.schema).length>0&&s===f)return b.call(this,t,n);const y=(0,i.normalizeId)(s),h=this.refs[y]||this.schemas[y];if(typeof h=="string"){const $=P.call(this,n,h);return typeof $?.schema!="object"?void 0:b.call(this,t,$)}if(typeof h?.schema=="object"){if(h.validate||u.call(this,h),y===(0,i.normalizeId)(a)){const{schema:$}=h,{schemaId:j}=this.opts,C=$[j];return C&&(f=(0,i.resolveUrl)(this.opts.uriResolver,f,C)),new l({schema:$,schemaId:j,root:n,baseId:f})}return b.call(this,t,h)}}oe.resolveSchema=P;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b(n,{baseId:a,schema:t,root:s}){var f;if(((f=n.fragment)===null||f===void 0?void 0:f[0])!=="/")return;for(const $ of n.fragment.slice(1).split("/")){if(typeof t=="boolean")return;const j=t[(0,v.unescapeFragment)($)];if(j===void 0)return;t=j;const C=typeof t=="object"&&t[this.opts.schemaId];!m.has($)&&C&&(a=(0,i.resolveUrl)(this.opts.uriResolver,a,C))}let y;if(typeof t!="boolean"&&t.$ref&&!(0,v.schemaHasRulesButRef)(t,this.RULES)){const $=(0,i.resolveUrl)(this.opts.uriResolver,a,t.$ref);y=P.call(this,s,$)}const{schemaId:h}=this.opts;if(y=y||new l({schema:t,schemaId:h,root:s,baseId:a}),y.schema!==y.root.schema)return y}return oe}const Ln="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Hn="Meta-schema for $data reference (JSON AnySchema extension proposal)",Gn="object",Jn=["$data"],Wn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Bn=!1,Xn={$id:Ln,description:Hn,type:Gn,required:Jn,properties:Wn,additionalProperties:Bn};var qe={},Ne={exports:{}},jt,hr;function Yn(){return hr||(hr=1,jt={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),jt}var It,pr;function Qn(){if(pr)return It;pr=1;const{HEX:e}=Yn();function r(m){if(l(m,".")<3)return{host:m,isIPV4:!1};const b=m.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[n]=b;return n?{host:o(n,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function p(m,b=!1){let n="",a=!0;for(const t of m){if(e[t]===void 0)return;t!=="0"&&a===!0&&(a=!1),a||(n+=t)}return b&&n.length===0&&(n="0"),n}function i(m){let b=0;const n={error:!1,address:"",zone:""},a=[],t=[];let s=!1,f=!1,y=!1;function h(){if(t.length){if(s===!1){const $=p(t);if($!==void 0)a.push($);else return n.error=!0,!1}t.length=0}return!0}for(let $=0;$<m.length;$++){const j=m[$];if(!(j==="["||j==="]"))if(j===":"){if(f===!0&&(y=!0),!h())break;if(b++,a.push(":"),b>7){n.error=!0;break}$-1>=0&&m[$-1]===":"&&(f=!0);continue}else if(j==="%"){if(!h())break;s=!0}else{t.push(j);continue}}return t.length&&(s?n.zone=t.join(""):y?a.push(t.join("")):a.push(p(t))),n.address=a.join(""),n}function v(m,b={}){if(l(m,":")<2)return{host:m,isIPV6:!1};const n=i(m);if(n.error)return{host:m,isIPV6:!1};{let a=n.address,t=n.address;return n.zone&&(a+="%"+n.zone,t+="%25"+n.zone),{host:a,escapedHost:t,isIPV6:!0}}}function o(m,b){let n="",a=!0;const t=m.length;for(let s=0;s<t;s++){const f=m[s];f==="0"&&a?(s+1<=t&&m[s+1]===b||s+1===t)&&(n+=f,a=!1):(f===b?a=!0:a=!1,n+=f)}return n}function l(m,b){let n=0;for(let a=0;a<m.length;a++)m[a]===b&&n++;return n}const u=/^\.\.?\//u,d=/^\/\.(?:\/|$)/u,g=/^\/\.\.(?:\/|$)/u,_=/^\/?(?:.|\n)*?(?=\/|$)/u;function E(m){const b=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(d))m=m.replace(d,"/");else if(m.match(g))m=m.replace(g,"/"),b.pop();else if(m==="."||m==="..")m="";else{const n=m.match(_);if(n){const a=n[0];m=m.slice(a.length),b.push(a)}else throw new Error("Unexpected dot segment condition")}return b.join("")}function R(m,b){const n=b!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=n(m.scheme)),m.userinfo!==void 0&&(m.userinfo=n(m.userinfo)),m.host!==void 0&&(m.host=n(m.host)),m.path!==void 0&&(m.path=n(m.path)),m.query!==void 0&&(m.query=n(m.query)),m.fragment!==void 0&&(m.fragment=n(m.fragment)),m}function P(m,b){const n=[];if(m.userinfo!==void 0&&(n.push(m.userinfo),n.push("@")),m.host!==void 0){let a=unescape(m.host);const t=r(a);if(t.isIPV4)a=t.host;else{const s=v(t.host,{});s.isIPV6===!0?a=`[${s.escapedHost}]`:a=m.host}n.push(a)}return(typeof m.port=="number"||typeof m.port=="string")&&(n.push(":"),n.push(String(m.port))),n.length?n.join(""):void 0}return It={recomposeAuthority:P,normalizeComponentEncoding:R,removeDotSegments:E,normalizeIPv4:r,normalizeIPv6:v,stringArrayToHexStripped:p},It}var Tt,mr;function Zn(){if(mr)return Tt;mr=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,r=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function p(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function i(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function v(t){const s=String(t.scheme).toLowerCase()==="https";return(t.port===(s?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function o(t){return t.secure=p(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function l(t){if((t.port===(p(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[s,f]=t.resourceName.split("?");t.path=s&&s!=="/"?s:void 0,t.query=f,t.resourceName=void 0}return t.fragment=void 0,t}function u(t,s){if(!t.path)return t.error="URN can not be parsed",t;const f=t.path.match(r);if(f){const y=s.scheme||t.scheme||"urn";t.nid=f[1].toLowerCase(),t.nss=f[2];const h=`${y}:${s.nid||t.nid}`,$=a[h];t.path=void 0,$&&(t=$.parse(t,s))}else t.error=t.error||"URN can not be parsed.";return t}function d(t,s){const f=s.scheme||t.scheme||"urn",y=t.nid.toLowerCase(),h=`${f}:${s.nid||y}`,$=a[h];$&&(t=$.serialize(t,s));const j=t,C=t.nss;return j.path=`${y||s.nid}:${C}`,s.skipEscape=!0,j}function g(t,s){const f=t;return f.uuid=f.nss,f.nss=void 0,!s.tolerant&&(!f.uuid||!e.test(f.uuid))&&(f.error=f.error||"UUID is not valid."),f}function _(t){const s=t;return s.nss=(t.uuid||"").toLowerCase(),s}const E={scheme:"http",domainHost:!0,parse:i,serialize:v},R={scheme:"https",domainHost:E.domainHost,parse:i,serialize:v},P={scheme:"ws",domainHost:!0,parse:o,serialize:l},m={scheme:"wss",domainHost:P.domainHost,parse:P.parse,serialize:P.serialize},a={http:E,https:R,ws:P,wss:m,urn:{scheme:"urn",parse:u,serialize:d,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:g,serialize:_,skipNormalize:!0}};return Tt=a,Tt}var yr;function xn(){if(yr)return Ne.exports;yr=1;const{normalizeIPv6:e,normalizeIPv4:r,removeDotSegments:p,recomposeAuthority:i,normalizeComponentEncoding:v}=Qn(),o=Zn();function l(n,a){return typeof n=="string"?n=_(m(n,a),a):typeof n=="object"&&(n=m(_(n,a),a)),n}function u(n,a,t){const s=Object.assign({scheme:"null"},t),f=d(m(n,s),m(a,s),s,!0);return _(f,{...s,skipEscape:!0})}function d(n,a,t,s){const f={};return s||(n=m(_(n,t),t),a=m(_(a,t),t)),t=t||{},!t.tolerant&&a.scheme?(f.scheme=a.scheme,f.userinfo=a.userinfo,f.host=a.host,f.port=a.port,f.path=p(a.path||""),f.query=a.query):(a.userinfo!==void 0||a.host!==void 0||a.port!==void 0?(f.userinfo=a.userinfo,f.host=a.host,f.port=a.port,f.path=p(a.path||""),f.query=a.query):(a.path?(a.path.charAt(0)==="/"?f.path=p(a.path):((n.userinfo!==void 0||n.host!==void 0||n.port!==void 0)&&!n.path?f.path="/"+a.path:n.path?f.path=n.path.slice(0,n.path.lastIndexOf("/")+1)+a.path:f.path=a.path,f.path=p(f.path)),f.query=a.query):(f.path=n.path,a.query!==void 0?f.query=a.query:f.query=n.query),f.userinfo=n.userinfo,f.host=n.host,f.port=n.port),f.scheme=n.scheme),f.fragment=a.fragment,f}function g(n,a,t){return typeof n=="string"?(n=unescape(n),n=_(v(m(n,t),!0),{...t,skipEscape:!0})):typeof n=="object"&&(n=_(v(n,!0),{...t,skipEscape:!0})),typeof a=="string"?(a=unescape(a),a=_(v(m(a,t),!0),{...t,skipEscape:!0})):typeof a=="object"&&(a=_(v(a,!0),{...t,skipEscape:!0})),n.toLowerCase()===a.toLowerCase()}function _(n,a){const t={host:n.host,scheme:n.scheme,userinfo:n.userinfo,port:n.port,path:n.path,query:n.query,nid:n.nid,nss:n.nss,uuid:n.uuid,fragment:n.fragment,reference:n.reference,resourceName:n.resourceName,secure:n.secure,error:""},s=Object.assign({},a),f=[],y=o[(s.scheme||t.scheme||"").toLowerCase()];y&&y.serialize&&y.serialize(t,s),t.path!==void 0&&(s.skipEscape?t.path=unescape(t.path):(t.path=escape(t.path),t.scheme!==void 0&&(t.path=t.path.split("%3A").join(":")))),s.reference!=="suffix"&&t.scheme&&f.push(t.scheme,":");const h=i(t,s);if(h!==void 0&&(s.reference!=="suffix"&&f.push("//"),f.push(h),t.path&&t.path.charAt(0)!=="/"&&f.push("/")),t.path!==void 0){let $=t.path;!s.absolutePath&&(!y||!y.absolutePath)&&($=p($)),h===void 0&&($=$.replace(/^\/\//u,"/%2F")),f.push($)}return t.query!==void 0&&f.push("?",t.query),t.fragment!==void 0&&f.push("#",t.fragment),f.join("")}const E=Array.from({length:127},(n,a)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(a)));function R(n){let a=0;for(let t=0,s=n.length;t<s;++t)if(a=n.charCodeAt(t),a>126||E[a])return!0;return!1}const P=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(n,a){const t=Object.assign({},a),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},f=n.indexOf("%")!==-1;let y=!1;t.reference==="suffix"&&(n=(t.scheme?t.scheme+":":"")+"//"+n);const h=n.match(P);if(h){if(s.scheme=h[1],s.userinfo=h[3],s.host=h[4],s.port=parseInt(h[5],10),s.path=h[6]||"",s.query=h[7],s.fragment=h[8],isNaN(s.port)&&(s.port=h[5]),s.host){const j=r(s.host);if(j.isIPV4===!1){const C=e(j.host,{isIPV4:!1});s.host=C.host.toLowerCase(),y=C.isIPV6}else s.host=j.host,y=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&!s.path&&s.query===void 0?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",t.reference&&t.reference!=="suffix"&&t.reference!==s.reference&&(s.error=s.error||"URI is not a "+t.reference+" reference.");const $=o[(t.scheme||s.scheme||"").toLowerCase()];if(!t.unicodeSupport&&(!$||!$.unicodeSupport)&&s.host&&(t.domainHost||$&&$.domainHost)&&y===!1&&R(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(j){s.error=s.error||"Host's domain name can not be converted to ASCII: "+j}(!$||$&&!$.skipNormalize)&&(f&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),f&&s.host!==void 0&&(s.host=unescape(s.host)),s.path!==void 0&&s.path.length&&(s.path=escape(unescape(s.path))),s.fragment!==void 0&&s.fragment.length&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),$&&$.parse&&$.parse(s,t)}else s.error=s.error||"URI can not be parsed.";return s}const b={SCHEMES:o,normalize:l,resolve:u,resolveComponents:d,equal:g,serialize:_,parse:m};return Ne.exports=b,Ne.exports.default=b,Ne.exports.fastUri=b,Ne.exports}var _r;function es(){if(_r)return qe;_r=1,Object.defineProperty(qe,"__esModule",{value:!0});const e=xn();return e.code='require("ajv/dist/runtime/uri").default',qe.default=e,qe}var vr;function ts(){return vr||(vr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var r=vt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var p=J();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});const i=At(),v=gt(),o=cn(),l=Mt(),u=J(),d=_t(),g=mt(),_=X(),E=Xn,R=es(),P=(A,N)=>new RegExp(A,N);P.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),n={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},a={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},t=200;function s(A){var N,q,k,c,w,I,V,z,Y,W,S,O,T,M,U,G,ee,ue,se,ae,te,be,ie,$t,wt;const Pe=A.strict,bt=(N=A.code)===null||N===void 0?void 0:N.optimize,Ft=bt===!0||bt===void 0?1:bt||0,Ut=(k=(q=A.code)===null||q===void 0?void 0:q.regExp)!==null&&k!==void 0?k:P,bn=(c=A.uriResolver)!==null&&c!==void 0?c:R.default;return{strictSchema:(I=(w=A.strictSchema)!==null&&w!==void 0?w:Pe)!==null&&I!==void 0?I:!0,strictNumbers:(z=(V=A.strictNumbers)!==null&&V!==void 0?V:Pe)!==null&&z!==void 0?z:!0,strictTypes:(W=(Y=A.strictTypes)!==null&&Y!==void 0?Y:Pe)!==null&&W!==void 0?W:"log",strictTuples:(O=(S=A.strictTuples)!==null&&S!==void 0?S:Pe)!==null&&O!==void 0?O:"log",strictRequired:(M=(T=A.strictRequired)!==null&&T!==void 0?T:Pe)!==null&&M!==void 0?M:!1,code:A.code?{...A.code,optimize:Ft,regExp:Ut}:{optimize:Ft,regExp:Ut},loopRequired:(U=A.loopRequired)!==null&&U!==void 0?U:t,loopEnum:(G=A.loopEnum)!==null&&G!==void 0?G:t,meta:(ee=A.meta)!==null&&ee!==void 0?ee:!0,messages:(ue=A.messages)!==null&&ue!==void 0?ue:!0,inlineRefs:(se=A.inlineRefs)!==null&&se!==void 0?se:!0,schemaId:(ae=A.schemaId)!==null&&ae!==void 0?ae:"$id",addUsedSchema:(te=A.addUsedSchema)!==null&&te!==void 0?te:!0,validateSchema:(be=A.validateSchema)!==null&&be!==void 0?be:!0,validateFormats:(ie=A.validateFormats)!==null&&ie!==void 0?ie:!0,unicodeRegExp:($t=A.unicodeRegExp)!==null&&$t!==void 0?$t:!0,int32range:(wt=A.int32range)!==null&&wt!==void 0?wt:!0,uriResolver:bn}}class f{constructor(N={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,N=this.opts={...N,...s(N)};const{es5:q,lines:k}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:b,es5:q,lines:k}),this.logger=L(N.logger);const c=N.validateFormats;N.validateFormats=!1,this.RULES=(0,o.getRules)(),y.call(this,n,N,"NOT SUPPORTED"),y.call(this,a,N,"DEPRECATED","warn"),this._metaOpts=D.call(this),N.formats&&j.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),N.keywords&&C.call(this,N.keywords),typeof N.meta=="object"&&this.addMetaSchema(N.meta),$.call(this),N.validateFormats=c}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:N,meta:q,schemaId:k}=this.opts;let c=E;k==="id"&&(c={...E},c.id=c.$id,delete c.$id),q&&N&&this.addMetaSchema(c,c[k],!1)}defaultMeta(){const{meta:N,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof N=="object"?N[q]||N:void 0}validate(N,q){let k;if(typeof N=="string"){if(k=this.getSchema(N),!k)throw new Error(`no schema with key or ref "${N}"`)}else k=this.compile(N);const c=k(q);return"$async"in k||(this.errors=k.errors),c}compile(N,q){const k=this._addSchema(N,q);return k.validate||this._compileSchemaEnv(k)}compileAsync(N,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:k}=this.opts;return c.call(this,N,q);async function c(W,S){await w.call(this,W.$schema);const O=this._addSchema(W,S);return O.validate||I.call(this,O)}async function w(W){W&&!this.getSchema(W)&&await c.call(this,{$ref:W},!0)}async function I(W){try{return this._compileSchemaEnv(W)}catch(S){if(!(S instanceof v.default))throw S;return V.call(this,S),await z.call(this,S.missingSchema),I.call(this,W)}}function V({missingSchema:W,missingRef:S}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${S} cannot be resolved`)}async function z(W){const S=await Y.call(this,W);this.refs[W]||await w.call(this,S.$schema),this.refs[W]||this.addSchema(S,W,q)}async function Y(W){const S=this._loading[W];if(S)return S;try{return await(this._loading[W]=k(W))}finally{delete this._loading[W]}}}addSchema(N,q,k,c=this.opts.validateSchema){if(Array.isArray(N)){for(const I of N)this.addSchema(I,void 0,k,c);return this}let w;if(typeof N=="object"){const{schemaId:I}=this.opts;if(w=N[I],w!==void 0&&typeof w!="string")throw new Error(`schema ${I} must be string`)}return q=(0,d.normalizeId)(q||w),this._checkUnique(q),this.schemas[q]=this._addSchema(N,k,q,c,!0),this}addMetaSchema(N,q,k=this.opts.validateSchema){return this.addSchema(N,q,!0,k),this}validateSchema(N,q){if(typeof N=="boolean")return!0;let k;if(k=N.$schema,k!==void 0&&typeof k!="string")throw new Error("$schema must be a string");if(k=k||this.opts.defaultMeta||this.defaultMeta(),!k)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const c=this.validate(k,N);if(!c&&q){const w="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(w);else throw new Error(w)}return c}getSchema(N){let q;for(;typeof(q=h.call(this,N))=="string";)N=q;if(q===void 0){const{schemaId:k}=this.opts,c=new l.SchemaEnv({schema:{},schemaId:k});if(q=l.resolveSchema.call(this,c,N),!q)return;this.refs[N]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(N){if(N instanceof RegExp)return this._removeAllSchemas(this.schemas,N),this._removeAllSchemas(this.refs,N),this;switch(typeof N){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=h.call(this,N);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[N],delete this.refs[N],this}case"object":{const q=N;this._cache.delete(q);let k=N[this.opts.schemaId];return k&&(k=(0,d.normalizeId)(k),delete this.schemas[k],delete this.refs[k]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(N){for(const q of N)this.addKeyword(q);return this}addKeyword(N,q){let k;if(typeof N=="string")k=N,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=k);else if(typeof N=="object"&&q===void 0){if(q=N,k=q.keyword,Array.isArray(k)&&!k.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,k,q),!q)return(0,_.eachItem)(k,w=>x.call(this,w)),this;fe.call(this,q);const c={...q,type:(0,g.getJSONTypes)(q.type),schemaType:(0,g.getJSONTypes)(q.schemaType)};return(0,_.eachItem)(k,c.type.length===0?w=>x.call(this,w,c):w=>c.type.forEach(I=>x.call(this,w,c,I))),this}getKeyword(N){const q=this.RULES.all[N];return typeof q=="object"?q.definition:!!q}removeKeyword(N){const{RULES:q}=this;delete q.keywords[N],delete q.all[N];for(const k of q.rules){const c=k.rules.findIndex(w=>w.keyword===N);c>=0&&k.rules.splice(c,1)}return this}addFormat(N,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[N]=q,this}errorsText(N=this.errors,{separator:q=", ",dataVar:k="data"}={}){return!N||N.length===0?"No errors":N.map(c=>`${k}${c.instancePath} ${c.message}`).reduce((c,w)=>c+q+w)}$dataMetaSchema(N,q){const k=this.RULES.all;N=JSON.parse(JSON.stringify(N));for(const c of q){const w=c.split("/").slice(1);let I=N;for(const V of w)I=I[V];for(const V in k){const z=k[V];if(typeof z!="object")continue;const{$data:Y}=z.definition,W=I[V];Y&&W&&(I[V]=ye(W))}}return N}_removeAllSchemas(N,q){for(const k in N){const c=N[k];(!q||q.test(k))&&(typeof c=="string"?delete N[k]:c&&!c.meta&&(this._cache.delete(c.schema),delete N[k]))}}_addSchema(N,q,k,c=this.opts.validateSchema,w=this.opts.addUsedSchema){let I;const{schemaId:V}=this.opts;if(typeof N=="object")I=N[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof N!="boolean")throw new Error("schema must be object or boolean")}let z=this._cache.get(N);if(z!==void 0)return z;k=(0,d.normalizeId)(I||k);const Y=d.getSchemaRefs.call(this,N,k);return z=new l.SchemaEnv({schema:N,schemaId:V,meta:q,baseId:k,localRefs:Y}),this._cache.set(z.schema,z),w&&!k.startsWith("#")&&(k&&this._checkUnique(k),this.refs[k]=z),c&&this.validateSchema(N,!0),z}_checkUnique(N){if(this.schemas[N]||this.refs[N])throw new Error(`schema with key or id "${N}" already exists`)}_compileSchemaEnv(N){if(N.meta?this._compileMetaSchema(N):l.compileSchema.call(this,N),!N.validate)throw new Error("ajv implementation error");return N.validate}_compileMetaSchema(N){const q=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,N)}finally{this.opts=q}}}f.ValidationError=i.default,f.MissingRefError=v.default,e.default=f;function y(A,N,q,k="error"){for(const c in A){const w=c;w in N&&this.logger[k](`${q}: option ${c}. ${A[w]}`)}}function h(A){return A=(0,d.normalizeId)(A),this.schemas[A]||this.refs[A]}function $(){const A=this.opts.schemas;if(A)if(Array.isArray(A))this.addSchema(A);else for(const N in A)this.addSchema(A[N],N)}function j(){for(const A in this.opts.formats){const N=this.opts.formats[A];N&&this.addFormat(A,N)}}function C(A){if(Array.isArray(A)){this.addVocabulary(A);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const N in A){const q=A[N];q.keyword||(q.keyword=N),this.addKeyword(q)}}function D(){const A={...this.opts};for(const N of m)delete A[N];return A}const F={log(){},warn(){},error(){}};function L(A){if(A===!1)return F;if(A===void 0)return console;if(A.log&&A.warn&&A.error)return A;throw new Error("logger must implement log, warn and error methods")}const K=/^[a-z_$][a-z0-9_$:-]*$/i;function B(A,N){const{RULES:q}=this;if((0,_.eachItem)(A,k=>{if(q.keywords[k])throw new Error(`Keyword ${k} is already defined`);if(!K.test(k))throw new Error(`Keyword ${k} has invalid name`)}),!!N&&N.$data&&!("code"in N||"validate"in N))throw new Error('$data keyword must have "code" or "validate" function')}function x(A,N,q){var k;const c=N?.post;if(q&&c)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:w}=this;let I=c?w.post:w.rules.find(({type:z})=>z===q);if(I||(I={type:q,rules:[]},w.rules.push(I)),w.keywords[A]=!0,!N)return;const V={keyword:A,definition:{...N,type:(0,g.getJSONTypes)(N.type),schemaType:(0,g.getJSONTypes)(N.schemaType)}};N.before?de.call(this,I,V,N.before):I.rules.push(V),w.all[A]=V,(k=N.implements)===null||k===void 0||k.forEach(z=>this.addKeyword(z))}function de(A,N,q){const k=A.rules.findIndex(c=>c.keyword===q);k>=0?A.rules.splice(k,0,N):(A.rules.push(N),this.logger.warn(`rule ${q} is not defined`))}function fe(A){let{metaSchema:N}=A;N!==void 0&&(A.$data&&this.opts.$data&&(N=ye(N)),A.validateSchema=this.compile(N,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ye(A){return{anyOf:[A,Z]}}}(Et)),Et}var Ce={},Ae={},Me={},gr;function rs(){if(gr)return Me;gr=1,Object.defineProperty(Me,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return Me.default=e,Me}var _e={},$r;function ns(){if($r)return _e;$r=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.callRef=_e.getValidate=void 0;const e=gt(),r=le(),p=J(),i=ve(),v=Mt(),o=X(),l={keyword:"$ref",schemaType:"string",code(g){const{gen:_,schema:E,it:R}=g,{baseId:P,schemaEnv:m,validateName:b,opts:n,self:a}=R,{root:t}=m;if((E==="#"||E==="#/")&&P===t.baseId)return f();const s=v.resolveRef.call(a,t,P,E);if(s===void 0)throw new e.default(R.opts.uriResolver,P,E);if(s instanceof v.SchemaEnv)return y(s);return h(s);function f(){if(m===t)return d(g,b,m,m.$async);const $=_.scopeValue("root",{ref:t});return d(g,(0,p._)`${$}.validate`,t,t.$async)}function y($){const j=u(g,$);d(g,j,$,$.$async)}function h($){const j=_.scopeValue("schema",n.code.source===!0?{ref:$,code:(0,p.stringify)($)}:{ref:$}),C=_.name("valid"),D=g.subschema({schema:$,dataTypes:[],schemaPath:p.nil,topSchemaRef:j,errSchemaPath:E},C);g.mergeEvaluated(D),g.ok(C)}}};function u(g,_){const{gen:E}=g;return _.validate?E.scopeValue("validate",{ref:_.validate}):(0,p._)`${E.scopeValue("wrapper",{ref:_})}.validate`}_e.getValidate=u;function d(g,_,E,R){const{gen:P,it:m}=g,{allErrors:b,schemaEnv:n,opts:a}=m,t=a.passContext?i.default.this:p.nil;R?s():f();function s(){if(!n.$async)throw new Error("async schema referenced by sync schema");const $=P.let("valid");P.try(()=>{P.code((0,p._)`await ${(0,r.callValidateCode)(g,_,t)}`),h(_),b||P.assign($,!0)},j=>{P.if((0,p._)`!(${j} instanceof ${m.ValidationError})`,()=>P.throw(j)),y(j),b||P.assign($,!1)}),g.ok($)}function f(){g.result((0,r.callValidateCode)(g,_,t),()=>h(_),()=>y(_))}function y($){const j=(0,p._)`${$}.errors`;P.assign(i.default.vErrors,(0,p._)`${i.default.vErrors} === null ? ${j} : ${i.default.vErrors}.concat(${j})`),P.assign(i.default.errors,(0,p._)`${i.default.vErrors}.length`)}function h($){var j;if(!m.opts.unevaluated)return;const C=(j=E?.validate)===null||j===void 0?void 0:j.evaluated;if(m.props!==!0)if(C&&!C.dynamicProps)C.props!==void 0&&(m.props=o.mergeEvaluated.props(P,C.props,m.props));else{const D=P.var("props",(0,p._)`${$}.evaluated.props`);m.props=o.mergeEvaluated.props(P,D,m.props,p.Name)}if(m.items!==!0)if(C&&!C.dynamicItems)C.items!==void 0&&(m.items=o.mergeEvaluated.items(P,C.items,m.items));else{const D=P.var("items",(0,p._)`${$}.evaluated.items`);m.items=o.mergeEvaluated.items(P,D,m.items,p.Name)}}}return _e.callRef=d,_e.default=l,_e}var wr;function ss(){if(wr)return Ae;wr=1,Object.defineProperty(Ae,"__esModule",{value:!0});const e=rs(),r=ns(),p=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,r.default];return Ae.default=p,Ae}var De={},Ve={},br;function as(){if(br)return Ve;br=1,Object.defineProperty(Ve,"__esModule",{value:!0});const e=J(),r=e.operators,p={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:o,schemaCode:l})=>(0,e.str)`must be ${p[o].okStr} ${l}`,params:({keyword:o,schemaCode:l})=>(0,e._)`{comparison: ${p[o].okStr}, limit: ${l}}`},v={keyword:Object.keys(p),type:"number",schemaType:"number",$data:!0,error:i,code(o){const{keyword:l,data:u,schemaCode:d}=o;o.fail$data((0,e._)`${u} ${p[l].fail} ${d} || isNaN(${u})`)}};return Ve.default=v,Ve}var Fe={},Er;function os(){if(Er)return Fe;Er=1,Object.defineProperty(Fe,"__esModule",{value:!0});const e=J(),p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:i})=>(0,e.str)`must be multiple of ${i}`,params:({schemaCode:i})=>(0,e._)`{multipleOf: ${i}}`},code(i){const{gen:v,data:o,schemaCode:l,it:u}=i,d=u.opts.multipleOfPrecision,g=v.let("res"),_=d?(0,e._)`Math.abs(Math.round(${g}) - ${g}) > 1e-${d}`:(0,e._)`${g} !== parseInt(${g})`;i.fail$data((0,e._)`(${l} === 0 || (${g} = ${o}/${l}, ${_}))`)}};return Fe.default=p,Fe}var Ue={},ze={},Sr;function is(){if(Sr)return ze;Sr=1,Object.defineProperty(ze,"__esModule",{value:!0});function e(r){const p=r.length;let i=0,v=0,o;for(;v<p;)i++,o=r.charCodeAt(v++),o>=55296&&o<=56319&&v<p&&(o=r.charCodeAt(v),(o&64512)===56320&&v++);return i}return ze.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',ze}var Pr;function us(){if(Pr)return Ue;Pr=1,Object.defineProperty(Ue,"__esModule",{value:!0});const e=J(),r=X(),p=is(),v={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:l}){const u=o==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${u} than ${l} characters`},params:({schemaCode:o})=>(0,e._)`{limit: ${o}}`},code(o){const{keyword:l,data:u,schemaCode:d,it:g}=o,_=l==="maxLength"?e.operators.GT:e.operators.LT,E=g.opts.unicode===!1?(0,e._)`${u}.length`:(0,e._)`${(0,r.useFunc)(o.gen,p.default)}(${u})`;o.fail$data((0,e._)`${E} ${_} ${d}`)}};return Ue.default=v,Ue}var Ke={},Rr;function cs(){if(Rr)return Ke;Rr=1,Object.defineProperty(Ke,"__esModule",{value:!0});const e=le(),r=J(),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:v})=>(0,r.str)`must match pattern "${v}"`,params:({schemaCode:v})=>(0,r._)`{pattern: ${v}}`},code(v){const{data:o,$data:l,schema:u,schemaCode:d,it:g}=v,_=g.opts.unicodeRegExp?"u":"",E=l?(0,r._)`(new RegExp(${d}, ${_}))`:(0,e.usePattern)(v,u);v.fail$data((0,r._)`!${E}.test(${o})`)}};return Ke.default=i,Ke}var Le={},Nr;function ls(){if(Nr)return Le;Nr=1,Object.defineProperty(Le,"__esModule",{value:!0});const e=J(),p={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:v}){const o=i==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${v} properties`},params:({schemaCode:i})=>(0,e._)`{limit: ${i}}`},code(i){const{keyword:v,data:o,schemaCode:l}=i,u=v==="maxProperties"?e.operators.GT:e.operators.LT;i.fail$data((0,e._)`Object.keys(${o}).length ${u} ${l}`)}};return Le.default=p,Le}var He={},Or;function ds(){if(Or)return He;Or=1,Object.defineProperty(He,"__esModule",{value:!0});const e=le(),r=J(),p=X(),v={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,r.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,r._)`{missingProperty: ${o}}`},code(o){const{gen:l,schema:u,schemaCode:d,data:g,$data:_,it:E}=o,{opts:R}=E;if(!_&&u.length===0)return;const P=u.length>=R.loopRequired;if(E.allErrors?m():b(),R.strictRequired){const t=o.parentSchema.properties,{definedProperties:s}=o.it;for(const f of u)if(t?.[f]===void 0&&!s.has(f)){const y=E.schemaEnv.baseId+E.errSchemaPath,h=`required property "${f}" is not defined at "${y}" (strictRequired)`;(0,p.checkStrictMode)(E,h,E.opts.strictRequired)}}function m(){if(P||_)o.block$data(r.nil,n);else for(const t of u)(0,e.checkReportMissingProp)(o,t)}function b(){const t=l.let("missing");if(P||_){const s=l.let("valid",!0);o.block$data(s,()=>a(t,s)),o.ok(s)}else l.if((0,e.checkMissingProp)(o,u,t)),(0,e.reportMissingProp)(o,t),l.else()}function n(){l.forOf("prop",d,t=>{o.setParams({missingProperty:t}),l.if((0,e.noPropertyInData)(l,g,t,R.ownProperties),()=>o.error())})}function a(t,s){o.setParams({missingProperty:t}),l.forOf(t,d,()=>{l.assign(s,(0,e.propertyInData)(l,g,t,R.ownProperties)),l.if((0,r.not)(s),()=>{o.error(),l.break()})},r.nil)}}};return He.default=v,He}var Ge={},kr;function fs(){if(kr)return Ge;kr=1,Object.defineProperty(Ge,"__esModule",{value:!0});const e=J(),p={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:v}){const o=i==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${v} items`},params:({schemaCode:i})=>(0,e._)`{limit: ${i}}`},code(i){const{keyword:v,data:o,schemaCode:l}=i,u=v==="maxItems"?e.operators.GT:e.operators.LT;i.fail$data((0,e._)`${o}.length ${u} ${l}`)}};return Ge.default=p,Ge}var Je={},We={},jr;function Dt(){if(jr)return We;jr=1,Object.defineProperty(We,"__esModule",{value:!0});const e=dn();return e.code='require("ajv/dist/runtime/equal").default',We.default=e,We}var Ir;function hs(){if(Ir)return Je;Ir=1,Object.defineProperty(Je,"__esModule",{value:!0});const e=mt(),r=J(),p=X(),i=Dt(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:l,j:u}})=>(0,r.str)`must NOT have duplicate items (items ## ${u} and ${l} are identical)`,params:({params:{i:l,j:u}})=>(0,r._)`{i: ${l}, j: ${u}}`},code(l){const{gen:u,data:d,$data:g,schema:_,parentSchema:E,schemaCode:R,it:P}=l;if(!g&&!_)return;const m=u.let("valid"),b=E.items?(0,e.getSchemaTypes)(E.items):[];l.block$data(m,n,(0,r._)`${R} === false`),l.ok(m);function n(){const f=u.let("i",(0,r._)`${d}.length`),y=u.let("j");l.setParams({i:f,j:y}),u.assign(m,!0),u.if((0,r._)`${f} > 1`,()=>(a()?t:s)(f,y))}function a(){return b.length>0&&!b.some(f=>f==="object"||f==="array")}function t(f,y){const h=u.name("item"),$=(0,e.checkDataTypes)(b,h,P.opts.strictNumbers,e.DataType.Wrong),j=u.const("indices",(0,r._)`{}`);u.for((0,r._)`;${f}--;`,()=>{u.let(h,(0,r._)`${d}[${f}]`),u.if($,(0,r._)`continue`),b.length>1&&u.if((0,r._)`typeof ${h} == "string"`,(0,r._)`${h} += "_"`),u.if((0,r._)`typeof ${j}[${h}] == "number"`,()=>{u.assign(y,(0,r._)`${j}[${h}]`),l.error(),u.assign(m,!1).break()}).code((0,r._)`${j}[${h}] = ${f}`)})}function s(f,y){const h=(0,p.useFunc)(u,i.default),$=u.name("outer");u.label($).for((0,r._)`;${f}--;`,()=>u.for((0,r._)`${y} = ${f}; ${y}--;`,()=>u.if((0,r._)`${h}(${d}[${f}], ${d}[${y}])`,()=>{l.error(),u.assign(m,!1).break($)})))}}};return Je.default=o,Je}var Be={},Tr;function ps(){if(Tr)return Be;Tr=1,Object.defineProperty(Be,"__esModule",{value:!0});const e=J(),r=X(),p=Dt(),v={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,e._)`{allowedValue: ${o}}`},code(o){const{gen:l,data:u,$data:d,schemaCode:g,schema:_}=o;d||_&&typeof _=="object"?o.fail$data((0,e._)`!${(0,r.useFunc)(l,p.default)}(${u}, ${g})`):o.fail((0,e._)`${_} !== ${u}`)}};return Be.default=v,Be}var Xe={},qr;function ms(){if(qr)return Xe;qr=1,Object.defineProperty(Xe,"__esModule",{value:!0});const e=J(),r=X(),p=Dt(),v={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,e._)`{allowedValues: ${o}}`},code(o){const{gen:l,data:u,$data:d,schema:g,schemaCode:_,it:E}=o;if(!d&&g.length===0)throw new Error("enum must have non-empty array");const R=g.length>=E.opts.loopEnum;let P;const m=()=>P??(P=(0,r.useFunc)(l,p.default));let b;if(R||d)b=l.let("valid"),o.block$data(b,n);else{if(!Array.isArray(g))throw new Error("ajv implementation error");const t=l.const("vSchema",_);b=(0,e.or)(...g.map((s,f)=>a(t,f)))}o.pass(b);function n(){l.assign(b,!1),l.forOf("v",_,t=>l.if((0,e._)`${m()}(${u}, ${t})`,()=>l.assign(b,!0).break()))}function a(t,s){const f=g[s];return typeof f=="object"&&f!==null?(0,e._)`${m()}(${u}, ${t}[${s}])`:(0,e._)`${u} === ${f}`}}};return Xe.default=v,Xe}var Cr;function ys(){if(Cr)return De;Cr=1,Object.defineProperty(De,"__esModule",{value:!0});const e=as(),r=os(),p=us(),i=cs(),v=ls(),o=ds(),l=fs(),u=hs(),d=ps(),g=ms(),_=[e.default,r.default,p.default,i.default,v.default,o.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,g.default];return De.default=_,De}var Ye={},Ee={},Ar;function fn(){if(Ar)return Ee;Ar=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.validateAdditionalItems=void 0;const e=J(),r=X(),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{parentSchema:l,it:u}=o,{items:d}=l;if(!Array.isArray(d)){(0,r.checkStrictMode)(u,'"additionalItems" is ignored when "items" is not an array of schemas');return}v(o,d)}};function v(o,l){const{gen:u,schema:d,data:g,keyword:_,it:E}=o;E.items=!0;const R=u.const("len",(0,e._)`${g}.length`);if(d===!1)o.setParams({len:l.length}),o.pass((0,e._)`${R} <= ${l.length}`);else if(typeof d=="object"&&!(0,r.alwaysValidSchema)(E,d)){const m=u.var("valid",(0,e._)`${R} <= ${l.length}`);u.if((0,e.not)(m),()=>P(m)),o.ok(m)}function P(m){u.forRange("i",l.length,R,b=>{o.subschema({keyword:_,dataProp:b,dataPropType:r.Type.Num},m),E.allErrors||u.if((0,e.not)(m),()=>u.break())})}}return Ee.validateAdditionalItems=v,Ee.default=i,Ee}var Qe={},Se={},Mr;function hn(){if(Mr)return Se;Mr=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.validateTuple=void 0;const e=J(),r=X(),p=le(),i={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:l,it:u}=o;if(Array.isArray(l))return v(o,"additionalItems",l);u.items=!0,!(0,r.alwaysValidSchema)(u,l)&&o.ok((0,p.validateArray)(o))}};function v(o,l,u=o.schema){const{gen:d,parentSchema:g,data:_,keyword:E,it:R}=o;b(g),R.opts.unevaluated&&u.length&&R.items!==!0&&(R.items=r.mergeEvaluated.items(d,u.length,R.items));const P=d.name("valid"),m=d.const("len",(0,e._)`${_}.length`);u.forEach((n,a)=>{(0,r.alwaysValidSchema)(R,n)||(d.if((0,e._)`${m} > ${a}`,()=>o.subschema({keyword:E,schemaProp:a,dataProp:a},P)),o.ok(P))});function b(n){const{opts:a,errSchemaPath:t}=R,s=u.length,f=s===n.minItems&&(s===n.maxItems||n[l]===!1);if(a.strictTuples&&!f){const y=`"${E}" is ${s}-tuple, but minItems or maxItems/${l} are not specified or different at path "${t}"`;(0,r.checkStrictMode)(R,y,a.strictTuples)}}}return Se.validateTuple=v,Se.default=i,Se}var Dr;function _s(){if(Dr)return Qe;Dr=1,Object.defineProperty(Qe,"__esModule",{value:!0});const e=hn(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:p=>(0,e.validateTuple)(p,"items")};return Qe.default=r,Qe}var Ze={},Vr;function vs(){if(Vr)return Ze;Vr=1,Object.defineProperty(Ze,"__esModule",{value:!0});const e=J(),r=X(),p=le(),i=fn(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,e.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,e._)`{limit: ${l}}`},code(l){const{schema:u,parentSchema:d,it:g}=l,{prefixItems:_}=d;g.items=!0,!(0,r.alwaysValidSchema)(g,u)&&(_?(0,i.validateAdditionalItems)(l,_):l.ok((0,p.validateArray)(l)))}};return Ze.default=o,Ze}var xe={},Fr;function gs(){if(Fr)return xe;Fr=1,Object.defineProperty(xe,"__esModule",{value:!0});const e=J(),r=X(),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:v,max:o}})=>o===void 0?(0,e.str)`must contain at least ${v} valid item(s)`:(0,e.str)`must contain at least ${v} and no more than ${o} valid item(s)`,params:({params:{min:v,max:o}})=>o===void 0?(0,e._)`{minContains: ${v}}`:(0,e._)`{minContains: ${v}, maxContains: ${o}}`},code(v){const{gen:o,schema:l,parentSchema:u,data:d,it:g}=v;let _,E;const{minContains:R,maxContains:P}=u;g.opts.next?(_=R===void 0?1:R,E=P):_=1;const m=o.const("len",(0,e._)`${d}.length`);if(v.setParams({min:_,max:E}),E===void 0&&_===0){(0,r.checkStrictMode)(g,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(E!==void 0&&_>E){(0,r.checkStrictMode)(g,'"minContains" > "maxContains" is always invalid'),v.fail();return}if((0,r.alwaysValidSchema)(g,l)){let s=(0,e._)`${m} >= ${_}`;E!==void 0&&(s=(0,e._)`${s} && ${m} <= ${E}`),v.pass(s);return}g.items=!0;const b=o.name("valid");E===void 0&&_===1?a(b,()=>o.if(b,()=>o.break())):_===0?(o.let(b,!0),E!==void 0&&o.if((0,e._)`${d}.length > 0`,n)):(o.let(b,!1),n()),v.result(b,()=>v.reset());function n(){const s=o.name("_valid"),f=o.let("count",0);a(s,()=>o.if(s,()=>t(f)))}function a(s,f){o.forRange("i",0,m,y=>{v.subschema({keyword:"contains",dataProp:y,dataPropType:r.Type.Num,compositeRule:!0},s),f()})}function t(s){o.code((0,e._)`${s}++`),E===void 0?o.if((0,e._)`${s} >= ${_}`,()=>o.assign(b,!0).break()):(o.if((0,e._)`${s} > ${E}`,()=>o.assign(b,!1).break()),_===1?o.assign(b,!0):o.if((0,e._)`${s} >= ${_}`,()=>o.assign(b,!0)))}}};return xe.default=i,xe}var qt={},Ur;function $s(){return Ur||(Ur=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const r=J(),p=X(),i=le();e.error={message:({params:{property:d,depsCount:g,deps:_}})=>{const E=g===1?"property":"properties";return(0,r.str)`must have ${E} ${_} when property ${d} is present`},params:({params:{property:d,depsCount:g,deps:_,missingProperty:E}})=>(0,r._)`{property: ${d},
    missingProperty: ${E},
    depsCount: ${g},
    deps: ${_}}`};const v={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(d){const[g,_]=o(d);l(d,g),u(d,_)}};function o({schema:d}){const g={},_={};for(const E in d){if(E==="__proto__")continue;const R=Array.isArray(d[E])?g:_;R[E]=d[E]}return[g,_]}function l(d,g=d.schema){const{gen:_,data:E,it:R}=d;if(Object.keys(g).length===0)return;const P=_.let("missing");for(const m in g){const b=g[m];if(b.length===0)continue;const n=(0,i.propertyInData)(_,E,m,R.opts.ownProperties);d.setParams({property:m,depsCount:b.length,deps:b.join(", ")}),R.allErrors?_.if(n,()=>{for(const a of b)(0,i.checkReportMissingProp)(d,a)}):(_.if((0,r._)`${n} && (${(0,i.checkMissingProp)(d,b,P)})`),(0,i.reportMissingProp)(d,P),_.else())}}e.validatePropertyDeps=l;function u(d,g=d.schema){const{gen:_,data:E,keyword:R,it:P}=d,m=_.name("valid");for(const b in g)(0,p.alwaysValidSchema)(P,g[b])||(_.if((0,i.propertyInData)(_,E,b,P.opts.ownProperties),()=>{const n=d.subschema({keyword:R,schemaProp:b},m);d.mergeValidEvaluated(n,m)},()=>_.var(m,!0)),d.ok(m))}e.validateSchemaDeps=u,e.default=v}(qt)),qt}var et={},zr;function ws(){if(zr)return et;zr=1,Object.defineProperty(et,"__esModule",{value:!0});const e=J(),r=X(),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:v})=>(0,e._)`{propertyName: ${v.propertyName}}`},code(v){const{gen:o,schema:l,data:u,it:d}=v;if((0,r.alwaysValidSchema)(d,l))return;const g=o.name("valid");o.forIn("key",u,_=>{v.setParams({propertyName:_}),v.subschema({keyword:"propertyNames",data:_,dataTypes:["string"],propertyName:_,compositeRule:!0},g),o.if((0,e.not)(g),()=>{v.error(!0),d.allErrors||o.break()})}),v.ok(g)}};return et.default=i,et}var tt={},Kr;function pn(){if(Kr)return tt;Kr=1,Object.defineProperty(tt,"__esModule",{value:!0});const e=le(),r=J(),p=ve(),i=X(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:l})=>(0,r._)`{additionalProperty: ${l.additionalProperty}}`},code(l){const{gen:u,schema:d,parentSchema:g,data:_,errsCount:E,it:R}=l;if(!E)throw new Error("ajv implementation error");const{allErrors:P,opts:m}=R;if(R.props=!0,m.removeAdditional!=="all"&&(0,i.alwaysValidSchema)(R,d))return;const b=(0,e.allSchemaProperties)(g.properties),n=(0,e.allSchemaProperties)(g.patternProperties);a(),l.ok((0,r._)`${E} === ${p.default.errors}`);function a(){u.forIn("key",_,h=>{!b.length&&!n.length?f(h):u.if(t(h),()=>f(h))})}function t(h){let $;if(b.length>8){const j=(0,i.schemaRefOrVal)(R,g.properties,"properties");$=(0,e.isOwnProperty)(u,j,h)}else b.length?$=(0,r.or)(...b.map(j=>(0,r._)`${h} === ${j}`)):$=r.nil;return n.length&&($=(0,r.or)($,...n.map(j=>(0,r._)`${(0,e.usePattern)(l,j)}.test(${h})`))),(0,r.not)($)}function s(h){u.code((0,r._)`delete ${_}[${h}]`)}function f(h){if(m.removeAdditional==="all"||m.removeAdditional&&d===!1){s(h);return}if(d===!1){l.setParams({additionalProperty:h}),l.error(),P||u.break();return}if(typeof d=="object"&&!(0,i.alwaysValidSchema)(R,d)){const $=u.name("valid");m.removeAdditional==="failing"?(y(h,$,!1),u.if((0,r.not)($),()=>{l.reset(),s(h)})):(y(h,$),P||u.if((0,r.not)($),()=>u.break()))}}function y(h,$,j){const C={keyword:"additionalProperties",dataProp:h,dataPropType:i.Type.Str};j===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),l.subschema(C,$)}}};return tt.default=o,tt}var rt={},Lr;function bs(){if(Lr)return rt;Lr=1,Object.defineProperty(rt,"__esModule",{value:!0});const e=vt(),r=le(),p=X(),i=pn(),v={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:l,schema:u,parentSchema:d,data:g,it:_}=o;_.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&i.default.code(new e.KeywordCxt(_,i.default,"additionalProperties"));const E=(0,r.allSchemaProperties)(u);for(const n of E)_.definedProperties.add(n);_.opts.unevaluated&&E.length&&_.props!==!0&&(_.props=p.mergeEvaluated.props(l,(0,p.toHash)(E),_.props));const R=E.filter(n=>!(0,p.alwaysValidSchema)(_,u[n]));if(R.length===0)return;const P=l.name("valid");for(const n of R)m(n)?b(n):(l.if((0,r.propertyInData)(l,g,n,_.opts.ownProperties)),b(n),_.allErrors||l.else().var(P,!0),l.endIf()),o.it.definedProperties.add(n),o.ok(P);function m(n){return _.opts.useDefaults&&!_.compositeRule&&u[n].default!==void 0}function b(n){o.subschema({keyword:"properties",schemaProp:n,dataProp:n},P)}}};return rt.default=v,rt}var nt={},Hr;function Es(){if(Hr)return nt;Hr=1,Object.defineProperty(nt,"__esModule",{value:!0});const e=le(),r=J(),p=X(),i=X(),v={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:l,schema:u,data:d,parentSchema:g,it:_}=o,{opts:E}=_,R=(0,e.allSchemaProperties)(u),P=R.filter(f=>(0,p.alwaysValidSchema)(_,u[f]));if(R.length===0||P.length===R.length&&(!_.opts.unevaluated||_.props===!0))return;const m=E.strictSchema&&!E.allowMatchingProperties&&g.properties,b=l.name("valid");_.props!==!0&&!(_.props instanceof r.Name)&&(_.props=(0,i.evaluatedPropsToName)(l,_.props));const{props:n}=_;a();function a(){for(const f of R)m&&t(f),_.allErrors?s(f):(l.var(b,!0),s(f),l.if(b))}function t(f){for(const y in m)new RegExp(f).test(y)&&(0,p.checkStrictMode)(_,`property ${y} matches pattern ${f} (use allowMatchingProperties)`)}function s(f){l.forIn("key",d,y=>{l.if((0,r._)`${(0,e.usePattern)(o,f)}.test(${y})`,()=>{const h=P.includes(f);h||o.subschema({keyword:"patternProperties",schemaProp:f,dataProp:y,dataPropType:i.Type.Str},b),_.opts.unevaluated&&n!==!0?l.assign((0,r._)`${n}[${y}]`,!0):!h&&!_.allErrors&&l.if((0,r.not)(b),()=>l.break())})})}}};return nt.default=v,nt}var st={},Gr;function Ss(){if(Gr)return st;Gr=1,Object.defineProperty(st,"__esModule",{value:!0});const e=X(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(p){const{gen:i,schema:v,it:o}=p;if((0,e.alwaysValidSchema)(o,v)){p.fail();return}const l=i.name("valid");p.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},l),p.failResult(l,()=>p.reset(),()=>p.error())},error:{message:"must NOT be valid"}};return st.default=r,st}var at={},Jr;function Ps(){if(Jr)return at;Jr=1,Object.defineProperty(at,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:le().validateUnion,error:{message:"must match a schema in anyOf"}};return at.default=r,at}var ot={},Wr;function Rs(){if(Wr)return ot;Wr=1,Object.defineProperty(ot,"__esModule",{value:!0});const e=J(),r=X(),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:v})=>(0,e._)`{passingSchemas: ${v.passing}}`},code(v){const{gen:o,schema:l,parentSchema:u,it:d}=v;if(!Array.isArray(l))throw new Error("ajv implementation error");if(d.opts.discriminator&&u.discriminator)return;const g=l,_=o.let("valid",!1),E=o.let("passing",null),R=o.name("_valid");v.setParams({passing:E}),o.block(P),v.result(_,()=>v.reset(),()=>v.error(!0));function P(){g.forEach((m,b)=>{let n;(0,r.alwaysValidSchema)(d,m)?o.var(R,!0):n=v.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},R),b>0&&o.if((0,e._)`${R} && ${_}`).assign(_,!1).assign(E,(0,e._)`[${E}, ${b}]`).else(),o.if(R,()=>{o.assign(_,!0),o.assign(E,b),n&&v.mergeEvaluated(n,e.Name)})})}}};return ot.default=i,ot}var it={},Br;function Ns(){if(Br)return it;Br=1,Object.defineProperty(it,"__esModule",{value:!0});const e=X(),r={keyword:"allOf",schemaType:"array",code(p){const{gen:i,schema:v,it:o}=p;if(!Array.isArray(v))throw new Error("ajv implementation error");const l=i.name("valid");v.forEach((u,d)=>{if((0,e.alwaysValidSchema)(o,u))return;const g=p.subschema({keyword:"allOf",schemaProp:d},l);p.ok(l),p.mergeEvaluated(g)})}};return it.default=r,it}var ut={},Xr;function Os(){if(Xr)return ut;Xr=1,Object.defineProperty(ut,"__esModule",{value:!0});const e=J(),r=X(),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,e.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,e._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:l,parentSchema:u,it:d}=o;u.then===void 0&&u.else===void 0&&(0,r.checkStrictMode)(d,'"if" without "then" and "else" is ignored');const g=v(d,"then"),_=v(d,"else");if(!g&&!_)return;const E=l.let("valid",!0),R=l.name("_valid");if(P(),o.reset(),g&&_){const b=l.let("ifClause");o.setParams({ifClause:b}),l.if(R,m("then",b),m("else",b))}else g?l.if(R,m("then")):l.if((0,e.not)(R),m("else"));o.pass(E,()=>o.error(!0));function P(){const b=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},R);o.mergeEvaluated(b)}function m(b,n){return()=>{const a=o.subschema({keyword:b},R);l.assign(E,R),o.mergeValidEvaluated(a,E),n?l.assign(n,(0,e._)`${b}`):o.setParams({ifClause:b})}}}};function v(o,l){const u=o.schema[l];return u!==void 0&&!(0,r.alwaysValidSchema)(o,u)}return ut.default=i,ut}var ct={},Yr;function ks(){if(Yr)return ct;Yr=1,Object.defineProperty(ct,"__esModule",{value:!0});const e=X(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:p,parentSchema:i,it:v}){i.if===void 0&&(0,e.checkStrictMode)(v,`"${p}" without "if" is ignored`)}};return ct.default=r,ct}var Qr;function js(){if(Qr)return Ye;Qr=1,Object.defineProperty(Ye,"__esModule",{value:!0});const e=fn(),r=_s(),p=hn(),i=vs(),v=gs(),o=$s(),l=ws(),u=pn(),d=bs(),g=Es(),_=Ss(),E=Ps(),R=Rs(),P=Ns(),m=Os(),b=ks();function n(a=!1){const t=[_.default,E.default,R.default,P.default,m.default,b.default,l.default,u.default,o.default,d.default,g.default];return a?t.push(r.default,i.default):t.push(e.default,p.default),t.push(v.default),t}return Ye.default=n,Ye}var lt={},dt={},Zr;function Is(){if(Zr)return dt;Zr=1,Object.defineProperty(dt,"__esModule",{value:!0});const e=J(),p={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,e.str)`must match format "${i}"`,params:({schemaCode:i})=>(0,e._)`{format: ${i}}`},code(i,v){const{gen:o,data:l,$data:u,schema:d,schemaCode:g,it:_}=i,{opts:E,errSchemaPath:R,schemaEnv:P,self:m}=_;if(!E.validateFormats)return;u?b():n();function b(){const a=o.scopeValue("formats",{ref:m.formats,code:E.code.formats}),t=o.const("fDef",(0,e._)`${a}[${g}]`),s=o.let("fType"),f=o.let("format");o.if((0,e._)`typeof ${t} == "object" && !(${t} instanceof RegExp)`,()=>o.assign(s,(0,e._)`${t}.type || "string"`).assign(f,(0,e._)`${t}.validate`),()=>o.assign(s,(0,e._)`"string"`).assign(f,t)),i.fail$data((0,e.or)(y(),h()));function y(){return E.strictSchema===!1?e.nil:(0,e._)`${g} && !${f}`}function h(){const $=P.$async?(0,e._)`(${t}.async ? await ${f}(${l}) : ${f}(${l}))`:(0,e._)`${f}(${l})`,j=(0,e._)`(typeof ${f} == "function" ? ${$} : ${f}.test(${l}))`;return(0,e._)`${f} && ${f} !== true && ${s} === ${v} && !${j}`}}function n(){const a=m.formats[d];if(!a){y();return}if(a===!0)return;const[t,s,f]=h(a);t===v&&i.pass($());function y(){if(E.strictSchema===!1){m.logger.warn(j());return}throw new Error(j());function j(){return`unknown format "${d}" ignored in schema at path "${R}"`}}function h(j){const C=j instanceof RegExp?(0,e.regexpCode)(j):E.code.formats?(0,e._)`${E.code.formats}${(0,e.getProperty)(d)}`:void 0,D=o.scopeValue("formats",{key:d,ref:j,code:C});return typeof j=="object"&&!(j instanceof RegExp)?[j.type||"string",j.validate,(0,e._)`${D}.validate`]:["string",j,D]}function $(){if(typeof a=="object"&&!(a instanceof RegExp)&&a.async){if(!P.$async)throw new Error("async format in sync schema");return(0,e._)`await ${f}(${l})`}return typeof s=="function"?(0,e._)`${f}(${l})`:(0,e._)`${f}.test(${l})`}}}};return dt.default=p,dt}var xr;function Ts(){if(xr)return lt;xr=1,Object.defineProperty(lt,"__esModule",{value:!0});const r=[Is().default];return lt.default=r,lt}var we={},en;function qs(){return en||(en=1,Object.defineProperty(we,"__esModule",{value:!0}),we.contentVocabulary=we.metadataVocabulary=void 0,we.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],we.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),we}var tn;function Cs(){if(tn)return Ce;tn=1,Object.defineProperty(Ce,"__esModule",{value:!0});const e=ss(),r=ys(),p=js(),i=Ts(),v=qs(),o=[e.default,r.default,(0,p.default)(),i.default,v.metadataVocabulary,v.contentVocabulary];return Ce.default=o,Ce}var ft={},Oe={},rn;function As(){if(rn)return Oe;rn=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.DiscrError=void 0;var e;return function(r){r.Tag="tag",r.Mapping="mapping"}(e||(Oe.DiscrError=e={})),Oe}var nn;function Ms(){if(nn)return ft;nn=1,Object.defineProperty(ft,"__esModule",{value:!0});const e=J(),r=As(),p=Mt(),i=gt(),v=X(),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:d}})=>u===r.DiscrError.Tag?`tag "${d}" must be string`:`value of tag "${d}" must be in oneOf`,params:({params:{discrError:u,tag:d,tagName:g}})=>(0,e._)`{error: ${u}, tag: ${g}, tagValue: ${d}}`},code(u){const{gen:d,data:g,schema:_,parentSchema:E,it:R}=u,{oneOf:P}=E;if(!R.opts.discriminator)throw new Error("discriminator: requires discriminator option");const m=_.propertyName;if(typeof m!="string")throw new Error("discriminator: requires propertyName");if(_.mapping)throw new Error("discriminator: mapping is not supported");if(!P)throw new Error("discriminator: requires oneOf keyword");const b=d.let("valid",!1),n=d.const("tag",(0,e._)`${g}${(0,e.getProperty)(m)}`);d.if((0,e._)`typeof ${n} == "string"`,()=>a(),()=>u.error(!1,{discrError:r.DiscrError.Tag,tag:n,tagName:m})),u.ok(b);function a(){const f=s();d.if(!1);for(const y in f)d.elseIf((0,e._)`${n} === ${y}`),d.assign(b,t(f[y]));d.else(),u.error(!1,{discrError:r.DiscrError.Mapping,tag:n,tagName:m}),d.endIf()}function t(f){const y=d.name("valid"),h=u.subschema({keyword:"oneOf",schemaProp:f},y);return u.mergeEvaluated(h,e.Name),y}function s(){var f;const y={},h=j(E);let $=!0;for(let F=0;F<P.length;F++){let L=P[F];if(L?.$ref&&!(0,v.schemaHasRulesButRef)(L,R.self.RULES)){const B=L.$ref;if(L=p.resolveRef.call(R.self,R.schemaEnv.root,R.baseId,B),L instanceof p.SchemaEnv&&(L=L.schema),L===void 0)throw new i.default(R.opts.uriResolver,R.baseId,B)}const K=(f=L?.properties)===null||f===void 0?void 0:f[m];if(typeof K!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);$=$&&(h||j(L)),C(K,F)}if(!$)throw new Error(`discriminator: "${m}" must be required`);return y;function j({required:F}){return Array.isArray(F)&&F.includes(m)}function C(F,L){if(F.const)D(F.const,L);else if(F.enum)for(const K of F.enum)D(K,L);else throw new Error(`discriminator: "properties/${m}" must have "const" or "enum"`)}function D(F,L){if(typeof F!="string"||F in y)throw new Error(`discriminator: "${m}" values must be unique strings`);y[F]=L}}}};return ft.default=l,ft}const Ds="http://json-schema.org/draft-07/schema#",Vs="http://json-schema.org/draft-07/schema#",Fs="Core schema meta-schema",Us={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zs=["object","boolean"],Ks={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ls={$schema:Ds,$id:Vs,title:Fs,definitions:Us,type:zs,properties:Ks,default:!0};var sn;function Hs(){return sn||(sn=1,function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MissingRefError=r.ValidationError=r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=r.Ajv=void 0;const p=ts(),i=Cs(),v=Ms(),o=Ls,l=["/properties"],u="http://json-schema.org/draft-07/schema";class d extends p.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(v.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(o,l):o;this.addMetaSchema(m,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}r.Ajv=d,e.exports=r=d,e.exports.Ajv=d,Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var g=vt();Object.defineProperty(r,"KeywordCxt",{enumerable:!0,get:function(){return g.KeywordCxt}});var _=J();Object.defineProperty(r,"_",{enumerable:!0,get:function(){return _._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return _.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return _.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return _.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return _.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return _.CodeGen}});var E=At();Object.defineProperty(r,"ValidationError",{enumerable:!0,get:function(){return E.default}});var R=gt();Object.defineProperty(r,"MissingRefError",{enumerable:!0,get:function(){return R.default}})}(ke,ke.exports)),ke.exports}var Vt=Hs();const Zs=En(Vt);function mn({params:{missingProperty:e},parentSchema:r,message:p},i){if(!p)return"";if(e===void 0)return p;const v=i(e,r);return v===void 0?p:p.replace(e,v)}function yn(e){const r=({params:{missingProperty:p,propertyName:i},propertyName:v=i},o)=>{let l=kn(o,e);return l=p!==void 0?Ht(l,p,e):l,l=v!==void 0?jn(Ht(l,v,e),"key-input",e):l,l};return p=>p.map(i=>{let v=i.instancePath.split("/");return v[0]===""&&(v=v.slice(1)),{instanceId:r(i,v),propertyTitle:Lt(e.uiSchema??{},v)??i.parentSchema?.title??v.join("."),message:mn(i,(o,l)=>{const u=Lt(e.uiSchema??{},v.concat(o));if(u!==void 0)return u;const d=l?.properties?.[o];if(typeof d=="object")return d.title}),error:i}})}function _n(e){return e.instancePath===""}function Gs(e){return _n(e)&&e.keyword!=="type"}function vn(e){return r=>r.filter(e.required?_n:Gs).map(p=>({instanceId:e.id,propertyTitle:e.title,message:mn(p,()=>e.title),error:p}))}function gn(e,r,p){e(r);const i=e.errors;return e.errors=null,i?p(i):[]}async function $n(e,r,p){try{await e(r)}catch(i){if(!(i instanceof Vt.Ajv.ValidationError))throw i;return p(i.errors)}finally{e.errors=null}return[]}function wn({compileSchema:e}){return{isValid(r,p,i){if(typeof r=="boolean")return r;const v=e(r,p);try{return v(i)}catch(o){return console.warn("Failed to validate",o),!1}}}}function Js(e){const r=yn(e);return{validateFormValue(p,i){return gn(e.compileSchema(p,p),i,r)}}}function Ws({compileFieldSchema:e}){return{validateFieldValue(r,p){return gn(e(r),p,vn(r))}}}function Bs(e){const r=yn(e);return{async validateFormValueAsync(p,i,v){return $n(e.compileAsyncSchema(i,i),v,r)}}}function Xs({compileAsyncFieldSchema:e}){return{async validateFieldValueAsync(r,p,i){return $n(e(p),i,vn(p))}}}function xs({ajvOptions:e=Tn,ajvPlugins:r=Dn,ajv:p=r(new Vt.Ajv(e)),compileSchema:i=Ct(p),compileFieldSchema:v=un(p,!1),...o}={}){const l={...o,compileSchema:i,compileFieldSchema:v};return Object.assign(wn(l),Js(l),Ws(l))}function ea({ajv:e,compileSchema:r=Ct(e),compileAsyncSchema:p=Ct(e),compileAsyncFieldSchema:i=un(e,!0),...v}){const o={...v,compileSchema:r,compileAsyncSchema:p,compileAsyncFieldSchema:i};return Object.assign(wn(o),Bs(o),Xs(o))}export{Zs as A,Dn as a,ea as b,xs as c,yn as d,vn as e,In as p,gn as v};
