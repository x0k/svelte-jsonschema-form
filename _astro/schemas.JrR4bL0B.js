import{p as h,n as k,$ as B,a7 as D,a8 as P,q as A,a0 as H,z as E,a3 as z,a4 as M,s as U,r as W,a5 as F,ab as X,O as R,e as V}from"./definitions.BpXZrVlp.js";import"./each.0Sggf4I3.js";import{p as T,m as p,e as y,b as v,a as L,g as c,u as g,n as G}from"./render.DWbcC03b.js";import{a as K}from"./assert.CXP8fmtO.js";import{s as J}from"./snippet.aAPlOa3D.js";import{d as Q,f as Y}from"./file.1_d8oDoM.js";import{a as Z}from"./file-include.3fzcF_3h.js";const $="filesField";function I(t,e){T(e,!0);const l=n=>{var r=p(),i=y(r);J(i,()=>c(_)??G,()=>a,()=>e.config,()=>({get current(){return s()},set current(f){s(f)}}),()=>c(m)),v(n,r)};let s=h(e,"value",15);const a=k(),o=g(()=>E(a,"fieldTemplate",e.config)),u="fileWidget",j=g(()=>E(a,u,e.config)),N=B(a,()=>e.config,()=>H(a,e.config,s())),d=Q({initialOutput:void 0,getInput:()=>s(),setInput:n=>s(n),isEqual:(n,r)=>n===void 0&&r===void 0||Array.isArray(n)&&Array.isArray(r)&&n.length===r.length&&n.every((i,f)=>i===r[f]),async toOutput(n,r){const i=new DataTransfer;return r&&await Z(a,n,i,r),i.files},async toInput(n,r){if(r===void 0)return;const i=Array.from(r);if(!await D(n,a,e.config,r))throw new P;return Promise.all(i.map(f=>Y(n,f)))}}),m=g(()=>z(a,e.config.path)),_=g(()=>M(a,e.config,$));var b=p(),w=y(b);{let n=g(()=>c(_)&&l);A(w,()=>c(o),(r,i)=>{i(r,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:u,get value(){return s()},get config(){return e.config},get errors(){return c(m)},get action(){return c(n)},children:(f,oe)=>{var O=p(),C=y(O);A(C,()=>c(j),(S,q)=>{q(S,{type:"widget",get processing(){return d.inputProcessing},get loading(){return d.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return N},get errors(){return c(m)},get config(){return e.config},multiple:!0,get value(){return d.current},set value(x){d.current=x}})}),v(f,O)},$$slots:{default:!0}})})}v(t,b),L()}function ee(t,e){T(e,!0);let l=h(e,"value",15),s=W(e,["$$slots","$$events","$$legacy","value"]);var a=()=>(K(l()),l()),o=u=>{l(u)};I(t,U(()=>s,{get value(){return a()},set value(u){o(u)}})),L()}F.arrayFilesField=ee;F.filesField=I;const te=t=>({type:"object",properties:{default:t,error:t},required:["default"]}),pe={type:"boolean"},re={type:"string",enum:["foo","bar","fuzz","qux"]},ye={type:"array",items:re,uniqueItems:!0},ne={type:"string",format:"data-url"},ve={type:"array",items:ne},_e={type:"number"},be={type:"string"},Oe=t=>({type:"object",properties:{start:t,end:t}}),ae=t=>({default:t,error:t}),se=t=>t.map(e=>({path:[e,"error"],message:`${e} error`})),ie={[V]:"oninput",[R]:"onchange",[X]:"onblur"};Object.keys(ie).map(Number);const Ae="switch",Ee="checkbox";function he(t){const e=Object.keys(t),l={type:"object",properties:Object.fromEntries(e.map(o=>[o,te(t[o][0])]))},s=Object.fromEntries(e.flatMap(o=>{const u=t[o][1];return Object.keys(u).length>0?[[o,ae(u)]]:[]})),a=se(e);return{schema:l,uiSchema:s,initialErrors:a}}export{Ee as C,Ae as S,ne as a,pe as b,he as c,re as e,ve as f,_e as n,Oe as r,be as t,ye as u};
