import"./_commonjsHelpers.CfDrMh7n.js";import"./legacy.CdTcDNTu.js";import{p as A,l as q,h as y,b as p,a as I,g as e,u as i,f as O,s as j,c as N,a2 as U,r as D}from"./render.BlF0Lqgg.js";import{c as E,b as K,e as M}from"./index.Bso7A38C.js";import{i as z}from"./lifecycle.CF09amqG.js";import{s as G,i as H,n as J,j as Q,w as V,x as W,o as X,u as Y,l as Z,y as $,m as ee,b as te}from"./definitions.Dwc_MNg1.js";import{s as re}from"./snippet.C29JTvhZ.js";import{g as F}from"./path.Ckw8hJvo.js";import{d as ne}from"./form-defaults.BD3BjOsv.js";import"./function.Dj0BPgxZ.js";import"./file-include.D_JKUHoN.js";import"./textarea-include.BPj8NzC0.js";import"./validator.16qUXsr0.js";import"./ajv.DkVtFaOA.js";var ae=O("; <!>",1);function P(v,o){A(o,!0);const r=o.form.context,n=i(()=>o.name===""?[]:o.name.split(".")),u=i(()=>te(e(n),r)),l=i(()=>{if(e(n).length===0)return r;let t=r.value,a=-1;const s=e(n).length-1;for(;V(t)&&++a<s;)t=t[e(n)[a]];if(a!==s)throw console.error("Current form state",W(r.value)),new Error(`Path "${o.name}" is not populated or invalid, check current form state`);const c=e(n)[s];return{get value(){return t[c]},set value(m){t[c]=m}}}),h=i(()=>{if(e(n).length<2)return r.schema;const a=F(r.schema,r.schema,e(n).slice(0,-1));return a===void 0||typeof a=="boolean"?{}:a}),f=i(()=>{if(e(n).length===0)return r.schema;const t=F(r.schema,e(h),e(n).slice(-1));return t===void 0||typeof t=="boolean"?{}:t}),g=i(()=>ee(r,e(f),e(l).value)),b=i(()=>o.uiSchema??$(r.uiSchemaRoot,r.uiSchema,e(n))??{}),C=i(()=>{if(o.required!==void 0)return o.required;if(e(n).length===0)return!1;const t=e(n)[e(n).length-1],{required:a,items:s,minItems:c}=e(h);if(Array.isArray(a))return a.includes(t);const m=Number(t);if(Number.isInteger(m)&&m>=0){if(c!==void 0)return m<c;if(Array.isArray(s))return m<s.length}return!1}),d=i(()=>({id:e(u),title:Y(r,e(b))??e(g).title??"",schema:e(g),uiSchema:e(b),required:e(C)})),_=i(()=>X(r,e(d))),S=t=>J(r,e(d),t),x=i(()=>o.render??o.children);G(r);var w=q(),L=y(w);{var R=t=>{var a=q(),s=y(a);re(s,()=>e(x),()=>({type:"field",config:e(d),translate:e(_),uiOption:S,valueRef:e(l)})),p(t,a)},T=t=>{var a=ae();const s=i(()=>Z(r,e(d)));var c=j(y(a));Q(c,()=>e(s),(m,k)=>{k(m,{type:"field",get config(){return e(d)},uiOption:S,get translate(){return e(_)},get value(){return e(l).value},set value(B){e(l).value=B}})}),p(t,a)};H(L,t=>{e(x)?t(R):t(T,!1)})}p(v,w),I()}var oe=O('<form novalidate="" style="display: flex; flex-direction: column; gap: 1rem;"><!> <!> <button type="submit">Submit</button></form>');function _e(v,o){A(o,!1);const n=E({...ne,schema:{type:"object",properties:{login:{title:"Login",type:"string",minLength:3},password:{title:"Password",type:"string",minLength:6}},required:["login","password"],additionalProperties:!1},onSubmit(f){console.log(f)}});z();var u=oe(),l=N(u);P(l,{get form(){return n},name:"login"});var h=j(l,2);P(h,{get form(){return n},name:"password",uiSchema:{"ui:options":{text:{type:"password"}}}}),U(2),D(u),K(u,(f,g)=>M?.(f,g),()=>n.context),p(v,u),I()}export{_e as default};
