import"./_commonjsHelpers.nvgNgv2Y.js";import"./legacy.DB2kUx4h.js";import{p as Pe,f as Re,a as Ee,t as Se,b as ze,c as Te,s as Ne,j as je,i as Me,e as Ae,r as Ve}from"./render.C4_AKZiv.js";import{i as qe}from"./lifecycle.njOs7FTq.js";import{Z as Fe,_ as Ue,$ as _e,y as he,d as Je,e as Ke,h as De,O as He,a as Be,b as Ye}from"./definitions.lsr2n3tz.js";import{c as Ge}from"./index.C-YzB9Jc.js";import{B as We}from"./basic-form.DZEP-p-g.js";import{p as Ze}from"./validator.NNDxiZ0A.js";import{r as we}from"./path.Cj_IUnIg.js";import{g as Xe}from"./model.gez8mf4I.js";import{d as Qe}from"./form-defaults.BQFhvR76.js";import{i as Ce,s as Le,u as ge}from"./index.BPQVTpeN.js";import"./function.CS4J6_bl.js";import"./snippet.CQu7JagD.js";import"./form.Dv1Q890s.js";import"./content.BPy435S3.js";import"./submit-button.DZhyrA_2.js";import"./file-include.Cpuu75vI.js";import"./textarea-include.D_Tgi80b.js";function N(e,d){const t=typeof e;if(t!==typeof d)return!1;if(Array.isArray(e)){if(!Array.isArray(d))return!1;const o=e.length;if(o!==d.length)return!1;for(let f=0;f<o;f++)if(!N(e[f],d[f]))return!1;return!0}if(t==="object"){if(!e||!d)return e===d;const o=Object.keys(e),f=Object.keys(d);if(o.length!==f.length)return!1;for(const r of o)if(!N(e[r],d[r]))return!1;return!0}return e===d}function _(e){return encodeURI(er(e))}function er(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const rr={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},tr={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},dr={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let fr=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function P(e,d=Object.create(null),t=fr,o=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const s=e.$id||e.id;if(s){const r=new URL(s,t.href);r.hash.length>1?d[r.href]=e:(r.hash="",o===""?t=r:P(e,d,t))}}else if(e!==!0&&e!==!1)return d;const f=t.href+(o?"#"+o:"");if(d[f]!==void 0)throw new Error(`Duplicate schema URI "${f}".`);if(d[f]=e,e===!0||e===!1)return d;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:f}),e.$ref&&e.__absolute_ref__===void 0){const s=new URL(e.$ref,t.href);s.hash=s.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:s.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const s=new URL(e.$recursiveRef,t.href);s.hash=s.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:s.href})}if(e.$anchor){const s=new URL("#"+e.$anchor,t.href);d[s.href]=e}for(let s in e){if(dr[s])continue;const r=`${o}/${_(s)}`,i=e[s];if(Array.isArray(i)){if(rr[s]){const h=i.length;for(let x=0;x<h;x++)P(i[x],d,t,`${r}/${x}`)}}else if(tr[s])for(let h in i)P(i[h],d,t,`${r}/${_(h)}`);else P(i,d,t,r)}return d}const or=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,sr=[0,31,28,31,30,31,30,31,31,30,31,30,31],nr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,ir=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ar=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ur=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,lr=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,mr=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,$r=/^(?:\/(?:[^~/]|~0|~1)*)*$/,yr=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,pr=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,hr=e=>{if(e[0]==='"')return!1;const[d,t,...o]=e.split("@");return!d||!t||o.length!==0||d.length>64||t.length>253||d[0]==="."||d.endsWith(".")||d.includes("..")||!/^[a-z0-9.-]+$/i.test(t)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(d)?!1:t.split(".").every(f=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(f))},wr=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,gr=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,kr=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function c(e){return e.test.bind(e)}const ke={date:Ie,time:ce.bind(void 0,!1),"date-time":cr,duration:kr,uri:Or,"uri-reference":c(ar),"uri-template":c(ur),url:c(lr),email:hr,hostname:c(ir),ipv4:c(wr),ipv6:c(gr),regex:Pr,uuid:c(mr),"json-pointer":c($r),"json-pointer-uri-fragment":c(yr),"relative-json-pointer":c(pr)};function _r(e){return e%4===0&&(e%100!==0||e%400===0)}function Ie(e){const d=e.match(or);if(!d)return!1;const t=+d[1],o=+d[2],f=+d[3];return o>=1&&o<=12&&f>=1&&f<=(o==2&&_r(t)?29:sr[o])}function ce(e,d){const t=d.match(nr);if(!t)return!1;const o=+t[1],f=+t[2],s=+t[3],r=!!t[5];return(o<=23&&f<=59&&s<=59||o==23&&f==59&&s==60)&&(!e||r)}const Ir=/t|\s/i;function cr(e){const d=e.split(Ir);return d.length==2&&Ie(d[0])&&ce(!0,d[1])}const br=/\/|:/,xr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Or(e){return br.test(e)&&xr.test(e)}const vr=/[^\\]\\Z/;function Pr(e){if(vr.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function Rr(e){let d=0,t=e.length,o=0,f;for(;o<t;)d++,f=e.charCodeAt(o++),f>=55296&&f<=56319&&o<t&&(f=e.charCodeAt(o),(f&64512)==56320&&o++);return d}function w(e,d,t="2019-09",o=P(d),f=!0,s=null,r="#",i="#",h=Object.create(null)){if(d===!0)return{valid:!0,errors:[]};if(d===!1)return{valid:!1,errors:[{instanceLocation:r,keyword:"false",keywordLocation:r,error:"False boolean schema."}]};const x=typeof e;let g;switch(x){case"boolean":case"number":case"string":g=x;break;case"object":e===null?g="null":Array.isArray(e)?g="array":g="object";break;default:throw new Error(`Instances of "${x}" type are not supported.`)}const{$ref:j,$recursiveRef:xe,$recursiveAnchor:M,type:I,const:R,enum:E,required:re,not:te,anyOf:D,allOf:H,oneOf:de,if:fe,then:oe,else:se,format:A,properties:B,patternProperties:Y,additionalProperties:ne,unevaluatedProperties:ie,minProperties:G,maxProperties:W,propertyNames:ae,dependentRequired:Z,dependentSchemas:X,dependencies:Q,prefixItems:C,items:S,additionalItems:ue,unevaluatedItems:le,contains:me,minContains:b,maxContains:V,minItems:L,maxItems:ee,uniqueItems:Oe,minimum:O,maximum:v,exclusiveMinimum:z,exclusiveMaximum:T,multipleOf:q,minLength:F,maxLength:U,pattern:$e,__absolute_ref__:J,__absolute_recursive_ref__:ve}=d,a=[];if(M===!0&&s===null&&(s=d),xe==="#"){const m=s===null?o[ve]:s,l=`${i}/$recursiveRef`,p=w(e,s===null?d:s,t,o,f,m,r,l,h);p.valid||a.push({instanceLocation:r,keyword:"$recursiveRef",keywordLocation:l,error:"A subschema had errors."},...p.errors)}if(j!==void 0){const l=o[J||j];if(l===void 0){let n=`Unresolved $ref "${j}".`;throw J&&J!==j&&(n+=`  Absolute URI "${J}".`),n+=`
Known schemas:
- ${Object.keys(o).join(`
- `)}`,new Error(n)}const p=`${i}/$ref`,u=w(e,l,t,o,f,s,r,p,h);if(u.valid||a.push({instanceLocation:r,keyword:"$ref",keywordLocation:p,error:"A subschema had errors."},...u.errors),t==="4"||t==="7")return{valid:a.length===0,errors:a}}if(Array.isArray(I)){let m=I.length,l=!1;for(let p=0;p<m;p++)if(g===I[p]||I[p]==="integer"&&g==="number"&&e%1===0&&e===e){l=!0;break}l||a.push({instanceLocation:r,keyword:"type",keywordLocation:`${i}/type`,error:`Instance type "${g}" is invalid. Expected "${I.join('", "')}".`})}else I==="integer"?(g!=="number"||e%1||e!==e)&&a.push({instanceLocation:r,keyword:"type",keywordLocation:`${i}/type`,error:`Instance type "${g}" is invalid. Expected "${I}".`}):I!==void 0&&g!==I&&a.push({instanceLocation:r,keyword:"type",keywordLocation:`${i}/type`,error:`Instance type "${g}" is invalid. Expected "${I}".`});if(R!==void 0&&(g==="object"||g==="array"?N(e,R)||a.push({instanceLocation:r,keyword:"const",keywordLocation:`${i}/const`,error:`Instance does not match ${JSON.stringify(R)}.`}):e!==R&&a.push({instanceLocation:r,keyword:"const",keywordLocation:`${i}/const`,error:`Instance does not match ${JSON.stringify(R)}.`})),E!==void 0&&(g==="object"||g==="array"?E.some(m=>N(e,m))||a.push({instanceLocation:r,keyword:"enum",keywordLocation:`${i}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`}):E.some(m=>e===m)||a.push({instanceLocation:r,keyword:"enum",keywordLocation:`${i}/enum`,error:`Instance does not match any of ${JSON.stringify(E)}.`})),te!==void 0){const m=`${i}/not`;w(e,te,t,o,f,s,r,m).valid&&a.push({instanceLocation:r,keyword:"not",keywordLocation:m,error:'Instance matched "not" schema.'})}let K=[];if(D!==void 0){const m=`${i}/anyOf`,l=a.length;let p=!1;for(let u=0;u<D.length;u++){const n=D[u],y=Object.create(h),$=w(e,n,t,o,f,M===!0?s:null,r,`${m}/${u}`,y);a.push(...$.errors),p=p||$.valid,$.valid&&K.push(y)}p?a.length=l:a.splice(l,0,{instanceLocation:r,keyword:"anyOf",keywordLocation:m,error:"Instance does not match any subschemas."})}if(H!==void 0){const m=`${i}/allOf`,l=a.length;let p=!0;for(let u=0;u<H.length;u++){const n=H[u],y=Object.create(h),$=w(e,n,t,o,f,M===!0?s:null,r,`${m}/${u}`,y);a.push(...$.errors),p=p&&$.valid,$.valid&&K.push(y)}p?a.length=l:a.splice(l,0,{instanceLocation:r,keyword:"allOf",keywordLocation:m,error:"Instance does not match every subschema."})}if(de!==void 0){const m=`${i}/oneOf`,l=a.length,p=de.filter((u,n)=>{const y=Object.create(h),$=w(e,u,t,o,f,M===!0?s:null,r,`${m}/${n}`,y);return a.push(...$.errors),$.valid&&K.push(y),$.valid}).length;p===1?a.length=l:a.splice(l,0,{instanceLocation:r,keyword:"oneOf",keywordLocation:m,error:`Instance does not match exactly one subschema (${p} matches).`})}if((g==="object"||g==="array")&&Object.assign(h,...K),fe!==void 0){const m=`${i}/if`;if(w(e,fe,t,o,f,s,r,m,h).valid){if(oe!==void 0){const p=w(e,oe,t,o,f,s,r,`${i}/then`,h);p.valid||a.push({instanceLocation:r,keyword:"if",keywordLocation:m,error:'Instance does not match "then" schema.'},...p.errors)}}else if(se!==void 0){const p=w(e,se,t,o,f,s,r,`${i}/else`,h);p.valid||a.push({instanceLocation:r,keyword:"if",keywordLocation:m,error:'Instance does not match "else" schema.'},...p.errors)}}if(g==="object"){if(re!==void 0)for(const u of re)u in e||a.push({instanceLocation:r,keyword:"required",keywordLocation:`${i}/required`,error:`Instance does not have required property "${u}".`});const m=Object.keys(e);if(G!==void 0&&m.length<G&&a.push({instanceLocation:r,keyword:"minProperties",keywordLocation:`${i}/minProperties`,error:`Instance does not have at least ${G} properties.`}),W!==void 0&&m.length>W&&a.push({instanceLocation:r,keyword:"maxProperties",keywordLocation:`${i}/maxProperties`,error:`Instance does not have at least ${W} properties.`}),ae!==void 0){const u=`${i}/propertyNames`;for(const n in e){const y=`${r}/${_(n)}`,$=w(n,ae,t,o,f,s,y,u);$.valid||a.push({instanceLocation:r,keyword:"propertyNames",keywordLocation:u,error:`Property name "${n}" does not match schema.`},...$.errors)}}if(Z!==void 0){const u=`${i}/dependantRequired`;for(const n in Z)if(n in e){const y=Z[n];for(const $ of y)$ in e||a.push({instanceLocation:r,keyword:"dependentRequired",keywordLocation:u,error:`Instance has "${n}" but does not have "${$}".`})}}if(X!==void 0)for(const u in X){const n=`${i}/dependentSchemas`;if(u in e){const y=w(e,X[u],t,o,f,s,r,`${n}/${_(u)}`,h);y.valid||a.push({instanceLocation:r,keyword:"dependentSchemas",keywordLocation:n,error:`Instance has "${u}" but does not match dependant schema.`},...y.errors)}}if(Q!==void 0){const u=`${i}/dependencies`;for(const n in Q)if(n in e){const y=Q[n];if(Array.isArray(y))for(const $ of y)$ in e||a.push({instanceLocation:r,keyword:"dependencies",keywordLocation:u,error:`Instance has "${n}" but does not have "${$}".`});else{const $=w(e,y,t,o,f,s,r,`${u}/${_(n)}`);$.valid||a.push({instanceLocation:r,keyword:"dependencies",keywordLocation:u,error:`Instance has "${n}" but does not match dependant schema.`},...$.errors)}}}const l=Object.create(null);let p=!1;if(B!==void 0){const u=`${i}/properties`;for(const n in B){if(!(n in e))continue;const y=`${r}/${_(n)}`,$=w(e[n],B[n],t,o,f,s,y,`${u}/${_(n)}`);if($.valid)h[n]=l[n]=!0;else if(p=f,a.push({instanceLocation:r,keyword:"properties",keywordLocation:u,error:`Property "${n}" does not match schema.`},...$.errors),p)break}}if(!p&&Y!==void 0){const u=`${i}/patternProperties`;for(const n in Y){const y=new RegExp(n,"u"),$=Y[n];for(const k in e){if(!y.test(k))continue;const ye=`${r}/${_(k)}`,pe=w(e[k],$,t,o,f,s,ye,`${u}/${_(n)}`);pe.valid?h[k]=l[k]=!0:(p=f,a.push({instanceLocation:r,keyword:"patternProperties",keywordLocation:u,error:`Property "${k}" matches pattern "${n}" but does not match associated schema.`},...pe.errors))}}}if(!p&&ne!==void 0){const u=`${i}/additionalProperties`;for(const n in e){if(l[n])continue;const y=`${r}/${_(n)}`,$=w(e[n],ne,t,o,f,s,y,u);$.valid?h[n]=!0:(p=f,a.push({instanceLocation:r,keyword:"additionalProperties",keywordLocation:u,error:`Property "${n}" does not match additional properties schema.`},...$.errors))}}else if(!p&&ie!==void 0){const u=`${i}/unevaluatedProperties`;for(const n in e)if(!h[n]){const y=`${r}/${_(n)}`,$=w(e[n],ie,t,o,f,s,y,u);$.valid?h[n]=!0:a.push({instanceLocation:r,keyword:"unevaluatedProperties",keywordLocation:u,error:`Property "${n}" does not match unevaluated properties schema.`},...$.errors)}}}else if(g==="array"){ee!==void 0&&e.length>ee&&a.push({instanceLocation:r,keyword:"maxItems",keywordLocation:`${i}/maxItems`,error:`Array has too many items (${e.length} > ${ee}).`}),L!==void 0&&e.length<L&&a.push({instanceLocation:r,keyword:"minItems",keywordLocation:`${i}/minItems`,error:`Array has too few items (${e.length} < ${L}).`});const m=e.length;let l=0,p=!1;if(C!==void 0){const u=`${i}/prefixItems`,n=Math.min(C.length,m);for(;l<n;l++){const y=w(e[l],C[l],t,o,f,s,`${r}/${l}`,`${u}/${l}`);if(h[l]=!0,!y.valid&&(p=f,a.push({instanceLocation:r,keyword:"prefixItems",keywordLocation:u,error:"Items did not match schema."},...y.errors),p))break}}if(S!==void 0){const u=`${i}/items`;if(Array.isArray(S)){const n=Math.min(S.length,m);for(;l<n;l++){const y=w(e[l],S[l],t,o,f,s,`${r}/${l}`,`${u}/${l}`);if(h[l]=!0,!y.valid&&(p=f,a.push({instanceLocation:r,keyword:"items",keywordLocation:u,error:"Items did not match schema."},...y.errors),p))break}}else for(;l<m;l++){const n=w(e[l],S,t,o,f,s,`${r}/${l}`,u);if(h[l]=!0,!n.valid&&(p=f,a.push({instanceLocation:r,keyword:"items",keywordLocation:u,error:"Items did not match schema."},...n.errors),p))break}if(!p&&ue!==void 0){const n=`${i}/additionalItems`;for(;l<m;l++){const y=w(e[l],ue,t,o,f,s,`${r}/${l}`,n);h[l]=!0,y.valid||(p=f,a.push({instanceLocation:r,keyword:"additionalItems",keywordLocation:n,error:"Items did not match additional items schema."},...y.errors))}}}if(me!==void 0)if(m===0&&b===void 0)a.push({instanceLocation:r,keyword:"contains",keywordLocation:`${i}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(b!==void 0&&m<b)a.push({instanceLocation:r,keyword:"minContains",keywordLocation:`${i}/minContains`,error:`Array has less items (${m}) than minContains (${b}).`});else{const u=`${i}/contains`,n=a.length;let y=0;for(let $=0;$<m;$++){const k=w(e[$],me,t,o,f,s,`${r}/${$}`,u);k.valid?(h[$]=!0,y++):a.push(...k.errors)}y>=(b||0)&&(a.length=n),b===void 0&&V===void 0&&y===0?a.splice(n,0,{instanceLocation:r,keyword:"contains",keywordLocation:u,error:"Array does not contain item matching schema."}):b!==void 0&&y<b?a.push({instanceLocation:r,keyword:"minContains",keywordLocation:`${i}/minContains`,error:`Array must contain at least ${b} items matching schema. Only ${y} items were found.`}):V!==void 0&&y>V&&a.push({instanceLocation:r,keyword:"maxContains",keywordLocation:`${i}/maxContains`,error:`Array may contain at most ${V} items matching schema. ${y} items were found.`})}if(!p&&le!==void 0){const u=`${i}/unevaluatedItems`;for(l;l<m;l++){if(h[l])continue;const n=w(e[l],le,t,o,f,s,`${r}/${l}`,u);h[l]=!0,n.valid||a.push({instanceLocation:r,keyword:"unevaluatedItems",keywordLocation:u,error:"Items did not match unevaluated items schema."},...n.errors)}}if(Oe)for(let u=0;u<m;u++){const n=e[u],y=typeof n=="object"&&n!==null;for(let $=0;$<m;$++){if(u===$)continue;const k=e[$];(n===k||y&&(typeof k=="object"&&k!==null)&&N(n,k))&&(a.push({instanceLocation:r,keyword:"uniqueItems",keywordLocation:`${i}/uniqueItems`,error:`Duplicate items at indexes ${u} and ${$}.`}),u=Number.MAX_SAFE_INTEGER,$=Number.MAX_SAFE_INTEGER)}}}else if(g==="number"){if(t==="4"?(O!==void 0&&(z===!0&&e<=O||e<O)&&a.push({instanceLocation:r,keyword:"minimum",keywordLocation:`${i}/minimum`,error:`${e} is less than ${z?"or equal to ":""} ${O}.`}),v!==void 0&&(T===!0&&e>=v||e>v)&&a.push({instanceLocation:r,keyword:"maximum",keywordLocation:`${i}/maximum`,error:`${e} is greater than ${T?"or equal to ":""} ${v}.`})):(O!==void 0&&e<O&&a.push({instanceLocation:r,keyword:"minimum",keywordLocation:`${i}/minimum`,error:`${e} is less than ${O}.`}),v!==void 0&&e>v&&a.push({instanceLocation:r,keyword:"maximum",keywordLocation:`${i}/maximum`,error:`${e} is greater than ${v}.`}),z!==void 0&&e<=z&&a.push({instanceLocation:r,keyword:"exclusiveMinimum",keywordLocation:`${i}/exclusiveMinimum`,error:`${e} is less than ${z}.`}),T!==void 0&&e>=T&&a.push({instanceLocation:r,keyword:"exclusiveMaximum",keywordLocation:`${i}/exclusiveMaximum`,error:`${e} is greater than or equal to ${T}.`})),q!==void 0){const m=e%q;Math.abs(0-m)>=11920929e-14&&Math.abs(q-m)>=11920929e-14&&a.push({instanceLocation:r,keyword:"multipleOf",keywordLocation:`${i}/multipleOf`,error:`${e} is not a multiple of ${q}.`})}}else if(g==="string"){const m=F===void 0&&U===void 0?0:Rr(e);F!==void 0&&m<F&&a.push({instanceLocation:r,keyword:"minLength",keywordLocation:`${i}/minLength`,error:`String is too short (${m} < ${F}).`}),U!==void 0&&m>U&&a.push({instanceLocation:r,keyword:"maxLength",keywordLocation:`${i}/maxLength`,error:`String is too long (${m} > ${U}).`}),$e!==void 0&&!new RegExp($e,"u").test(e)&&a.push({instanceLocation:r,keyword:"pattern",keywordLocation:`${i}/pattern`,error:"String does not match pattern."}),A!==void 0&&ke[A]&&!ke[A](e)&&a.push({instanceLocation:r,keyword:"format",keywordLocation:`${i}/format`,error:`String does not match format "${A}".`})}return{valid:a.length===0,errors:a}}class Er{schema;draft;shortCircuit;lookup;constructor(d,t="2019-09",o=!0){this.schema=d,this.draft=t,this.shortCircuit=o,this.lookup=P(d)}validate(d){return w(d,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(d,t){t&&(d={...d,$id:t}),P(d,this.lookup)}}function Sr(e){let d="",t=!1,o=new WeakRef({});const s=_e(new WeakMap,r=>{const i=he(r);return e(t?Ze(i,d):i)});return(r,i)=>{d=i[Ue]??Fe,t=r!==i;const h=s(r);return t&&o.deref()!==i&&(o=new WeakRef(i),h.addSchema(he(i),d)),h}}function zr(e){const t=_e(new WeakMap,e);return o=>t(o.schema)}function Tr({createSchemaValidator:e,valueToJSON:d}){return{isValid(t,o,f){return typeof t=="boolean"?t:e(t,o).validate(d(f)).valid}}}function Nr(e){const d=(t,o,f,s)=>{const r=Ke(e.uiSchema??{},f);if(r!==void 0)return r;const i=we(t.keywordLocation).slice(0,-1),h=De(o,i);return h&&typeof h=="object"&&"title"in h&&typeof h.title=="string"?h.title:Xe(o,f)??f[f.length-1]?.toString()??s};return(t,o)=>o.map(f=>{const s=we(f.instanceLocation),r=Je(s,e);return{instanceId:r,propertyTitle:d(f,t,s,r),message:f.error,error:f}})}function jr(e){const d=Nr(e);return{validateFormValue(t,o){const f=e.createSchemaValidator(t,t);return d(t,f.validate(e.valueToJSON(o)).errors)}}}function be(e){return e.instanceLocation==="#"}function Mr(e){return be(e)&&e.keyword!=="type"}function Ar({createFieldSchemaValidator:e,valueToJSON:d}){return{validateFieldValue(t,o){return e(t).validate(d(o)).errors.filter(t.required?be:Mr).map(r=>({instanceId:t.id,propertyTitle:t.title,message:r.error,error:r}))}}}function Vr({factory:e=s=>new Er(s,"7",!1),createSchemaValidator:d=Sr(e),createFieldSchemaValidator:t=zr(e),valueToJSON:o=s=>s==null?null:typeof s=="object"?JSON.parse(JSON.stringify(s)):s,...f}={}){const s={...f,valueToJSON:o,createSchemaValidator:d,createFieldSchemaValidator:t};return Object.assign(Tr(s),jr(s),Ar(s))}var qr=Re("<!> <pre> </pre>",1);function ft(e,d){Pe(d,!1);const t=Vr({uiSchema:ge}),o=Ge({...Qe,schema:Le,uiSchema:ge,validator:t,fieldsValidationMode:He|Be|Ye,initialValue:Ce});qe();var f=qr(),s=Ee(f);We(s,{get form(){return o},novalidate:!0});var r=Ne(s,2),i=Ae(r,!0);Ve(r),Se(h=>Me(i,h),[()=>JSON.stringify(o.value,null,2)],je),ze(e,f),Te()}export{ft as default};
