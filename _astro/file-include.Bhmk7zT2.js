import{C as I,Z as k,_ as H,p as S,m as C,M as U,n as h,N as V,o as p,Q as W,R as L,X as M,Y as Q}from"./definitions.CxtJfqPD.js";import"./_commonjsHelpers.aYOyWGRt.js";import{p as N,l as b,e as w,b as T,a as A,g as d,u as f}from"./render.rETKdxi5.js";async function B(r,e,n,t){const{name:s,blob:i}=await r.dataUrlToBlob(e,t);n.items.add(new File([i],s,{type:i.type}))}function J(r,e,n,t){const s=[];for(const i of t)s.push(B(r,e,n,i));return Promise.all(s)}function X(r,e){return r.anyOf?[r.anyOf,e.anyOf]:[r.oneOf,e.oneOf]}function Y(r,e,n,t){const s=t.enum,i=new Set(n("disabledEnumValues"));if(s){const a=n("enumNames");return s.map((o,u)=>{const g=a?.[u]??String(o);return{id:I(e.id,u,r),label:g,value:o,disabled:i.has(o)}})}const[m,y]=X(t,e.uiSchema);return m&&m.map((a,o)=>{if(typeof a=="boolean")throw new Error(`Invalid enum definition in anyOf ${o}`);const u=k(a),g=H(r,y?.[o])["ui:options"]?.title??a.title??String(u);return{id:I(e.id,o,r),schema:a,label:g,value:u,disabled:i.has(u)}})}function Z(r,e){N(e,!0);let n=S(e,"value",15);const t=C(),s=f(()=>p(t,"fieldTemplate",e.config)),i="selectWidget",m=f(()=>p(t,i,e.config)),y=U(t,()=>V(t,e.config,n())),a=f(()=>Y(t,e.config,e.uiOption,e.config.schema)??[]),o=f(()=>W(t,e.config.id));var u=b(),g=w(u);h(g,()=>d(s),(c,l)=>{l(c,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return n()},get config(){return e.config},get errors(){return d(o)},children:(v,R)=>{var O=b(),F=w(O);h(F,()=>d(m),(_,P)=>{P(_,{type:"widget",get handlers(){return y},get config(){return e.config},get errors(){return d(o)},get uiOption(){return e.uiOption},get options(){return d(a)},get value(){return n()},set value(E){n(E)}})}),T(v,O)},$$slots:{default:!0}})}),T(r,u),A()}L.enumField=Z;function j(r,e){N(e,!0);let n=S(e,"value",15);const t=C(),s=f(()=>p(t,"fieldTemplate",e.config)),i="fileWidget",m=f(()=>p(t,i,e.config)),y=U(t,()=>V(t,e.config,n())),a=M({initialOutput:void 0,getInput:()=>n(),setInput:c=>n(c),async toOutput(c,l){const v=new DataTransfer;return l!==void 0&&await B(t,c,v,l),v.files},async toInput(c,l){return l===void 0||l.length===0?void 0:Q(c,l[0])}}),o=f(()=>W(t,e.config.id));var u=b(),g=w(u);h(g,()=>d(s),(c,l)=>{l(c,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return n()},get config(){return e.config},get errors(){return d(o)},children:(v,R)=>{var O=b(),F=w(O);h(F,()=>d(m),(_,P)=>{P(_,{type:"widget",get processing(){return a.inputProcessing},get loading(){return a.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return y},get errors(){return d(o)},get config(){return e.config},multiple:!1,get value(){return a.current},set value(E){a.current=E}})}),T(v,O)},$$slots:{default:!0}})}),T(r,u),A()}L.fileField=j;export{J as a,Y as c};
