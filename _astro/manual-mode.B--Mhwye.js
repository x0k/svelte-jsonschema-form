import"./_commonjsHelpers.aYOyWGRt.js";import{p as P,l as v,e as y,b as h,a as A,g as e,u as o,f as L,c as N,s as j,X as E,r as M}from"./render.rETKdxi5.js";import{x as U,i as X,m as z,k as D,y as H,z as K,n as G,u as J,o as Q,A as V,q as W,d as Y,B as Z}from"./definitions.BBLJSby-.js";import{s as $,c as ee,f as te}from"./en.Ep8hNeva.js";import{s as re}from"./snippet.QEy_2lEM.js";import{g as F}from"./path.B4o4Wj4E.js";import{d as ne}from"./form-defaults.Bfv-NRWS.js";import"./function.BB_gY1-Q.js";import"./file-include.DuaLYoqr.js";import"./file-include.CpMA62Rr.js";import"./validator.DqHQHK6y.js";function O(g,i){P(i,!0);const r=i.form[U],n=o(()=>i.name===""?[]:i.name.split(".")),c=o(()=>Y(e(n),r)),l=o(()=>{if(e(n).length===0)return r;let t=r.value,a=-1;const s=e(n).length-1;for(;H(t)&&++a<s;)t=t[e(n)[a]];if(a!==s)throw console.error("Current form state",K(r.value)),new Error(`Path "${i.name}" is not populated or invalid, check current form state`);const u=e(n)[s];return{get value(){return t[u]},set value(m){t[u]=m}}}),d=o(()=>{if(e(n).length<2)return r.schema;const a=F(r.schema,r.schema,e(n).slice(0,-1));return a===void 0||typeof a=="boolean"?{}:a}),p=o(()=>{if(e(n).length===0)return r.schema;const t=F(r.schema,e(d),e(n).slice(-1));return t===void 0||typeof t=="boolean"?{}:t}),b=o(()=>W(r,e(p),e(l).value)),_=o(()=>i.uiSchema??V(r.uiSchemaRoot,r.uiSchema,e(n))??{}),T=o(()=>{if(i.required!==void 0)return i.required;if(e(n).length===0)return!1;const t=e(n)[e(n).length-1],{required:a,items:s,minItems:u}=e(d);if(Array.isArray(a))return a.includes(t);const m=Number(t);if(Number.isInteger(m)&&m>=0){if(u!==void 0)return m<u;if(Array.isArray(s))return m<s.length}return!1}),f=o(()=>({id:e(c),title:J(r,e(_))??e(b).title??"",schema:e(b),uiSchema:e(_),required:e(T)})),S=o(()=>G(r,e(f))),x=t=>z(r,e(f),t),w=o(()=>i.render??i.children);$(i.form);var q=v(),C=y(q);{var I=t=>{var a=v(),s=y(a);re(s,()=>e(w),()=>({type:"field",config:e(f),translate:e(S),uiOption:x,valueRef:e(l)})),h(t,a)},R=t=>{const a=o(()=>Q(r,e(f)));var s=v(),u=y(s);D(u,()=>e(a),(m,k)=>{k(m,{type:"field",get config(){return e(f)},uiOption:x,get translate(){return e(S)},get value(){return e(l).value},set value(B){e(l).value=B}})}),h(t,s)};X(C,t=>{e(w)?t(I):t(R,!1)})}h(g,q),A()}var ae=L('<form novalidate="" style="display: flex; flex-direction: column; gap: 1rem;"><!> <!> <button type="submit">Submit</button></form>');function pe(g,i){P(i,!0);const n=ee({...ne,schema:{type:"object",properties:{login:{title:"Login",type:"string",minLength:3},password:{title:"Password",type:"string",minLength:6}},required:["login","password"],additionalProperties:!1},onSubmit(p){console.log(p)}});var c=ae(),l=N(c);O(l,{get form(){return n},name:"login"});var d=j(l,2);O(d,{get form(){return n},name:"password",uiSchema:{"ui:options":{text:{type:"password"}}}}),E(2),M(c),Z(c,()=>te(n)),h(g,c),A()}export{pe as default};
