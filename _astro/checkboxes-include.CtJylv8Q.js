import{b as H,c as oe}from"./assert.BVeiipos.js";import{ab as F,aj as se,ak as ce,al as ue,am as N,an as le,ao as fe,ap as de,aq as U,M as me,ar as pe,as as ge,at as be,au as ve,ac as ye,ad as W,ae as G,P as _e,av as Ae,p as S,l as C,Y as he,m as B,Z as Fe,_ as Se,$ as Oe,w as Y,a0 as Ee,a1 as Re,s as Te,r as xe,a2 as ke}from"./definitions.Aq_eQFNs.js";import{e as we}from"./each.DVoDcEZv.js";import{p as O,j as k,h as w,b as A,a as E,g as p,u as _,Y as Ve,f as D,a_ as Ce,c as Me,s as Pe,r as je,t as De,i as Le}from"./render.xW19JsgD.js";import{s as Ie}from"./snippet.BQCjbj1G.js";import{c as Ne,g as Ue,b as L}from"./file.eVFeK278.js";import{j as We,u as Be,g as I,x as Ye,i as K,e as He,m as Ge,f as Ke}from"./en.CyIh5Cpt.js";function V(e,t,r={type:"root",path:[]}){if(!F(e))return t(e,r);const a={...e};for(const i of se){const c=e[i];if(c===void 0||!Array.isArray(c))continue;const o={type:"array",parent:e,key:i,index:0,path:r.path.concat(i,0)};a[i]=c.map((f,u)=>(o.index=u,o.path[o.path.length-1]=u,V(f,t,o)))}const n=new Map;for(const i of ce){const c=e[i];if(c===void 0)continue;const o={type:"record",parent:e,key:i,property:"",path:r.path.concat(i,"")},f=Object.keys(c),u=f.length;for(let d=0;d<u;d++){const m=f[d],g=c[m];if(Array.isArray(g)){n.set(m,g);continue}o.property=m,o.path[o.path.length-1]=m,n.set(m,V(g,t,o))}a[i]=Object.fromEntries(n),n.clear()}const s={type:"sub",parent:e,key:"items",path:r.path.concat("")};for(const i of ue){const c=e[i];c===void 0||Array.isArray(c)||(s.key=i,s.path[s.path.length-1]=i,a[i]=V(c,t,s))}return t(a,r)}function qe(e,t){return V(e,r=>{if(!F(r))return r;const a=r[N];return a!==void 0&&a.startsWith("#")&&(r[N]=`${t}${a}`),r})}function q(e){return e.split("/").slice(1).map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function St(e){if(e==="#")return[];const t=q(e);let r=!1;return t.map(a=>{if(r){const n=Number(a);if(Number.isInteger(n)&&n>=0)return r=!1,n}return r=le.has(a),a})}function ze(e,t){const r=[];if(e==="")return r;const a=q(e);let n=t;for(const s of a)if(Array.isArray(n)&&/^\d+$/.test(s)){const i=Number(s);r.push(i),n=n[i]}else r.push(s),n=n?.[s];return r}function Ot(e,t,r,a,n,s){function i(o,f,u,d){const m=o.map(v=>typeof v=="boolean"?v?{}:{not:{}}:v),g=pe(e,t,r,d,m,-1,ge(f)),b=c(m[g],u,d);if(b!==void 0)return b;let l;for(const v of m){if(!F(v))continue;const y=c(v,u,d);if(y!==void 0){if(F(y))return y;l=y}}return l}function c(o,f,u){for(let d=0;d<f.length;d++){if(o===void 0||!F(o))return;if(o.$ref)return c(fe(o.$ref,r),f.slice(d),u);if(o.allOf){const l=t.mergeAllOf(o);if(!l.allOf)return c(l,f.slice(d),u)}const m=o.anyOf??o.oneOf??o.allOf;if(m){const l=i(m,o,f.slice(d),u);if(l!==void 0)return l}const g=f[d],b=typeof g;if(b==="number"){const{items:l,additionalItems:v}=o;o=(Array.isArray(l)?l[g]:l)??v,u=de(u)?u[g]:void 0;continue}if(b==="string"){const{properties:l,patternProperties:v,additionalProperties:y,dependencies:M,then:h,else:R}=o;o=(l&&l[g])??(v&&Object.entries(v).find(([P])=>new RegExp(P).test(g))?.[1])??y??(M&&i(Object.values(M).filter(U),o,f.slice(d),u))??((h||R)&&i([h,R].filter(U),o,f.slice(d),u)),u=me(u)?u[g]:void 0;continue}return}return o}return c(a,n,s)}const Xe={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!0},Je=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,Ze=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function Qe(e){return e.addFormat("color",Je),e.addFormat(ve,Ze),e}function $e(e){return e.addKeyword(be),e}function et(e){return $e(Qe(e))}function j(e,t){let r="",a=!1;const n=new WeakMap,s=G(n,i=>{let c=i;return a&&(c=qe(i,r),delete c[W]),e.compile(c)});return(i,c)=>{r=c[W]??ye;let o=e.getSchema(r)?.schema;return o!==void 0&&o!==c&&(e.removeSchema(r),n.delete(i),o=void 0),o===void 0&&e.addSchema(c,r),a=i!==c,s(i)}}function z(e,t){const a=G(new WeakMap,n=>e.compile({...n,$async:t}));return n=>a(n.schema)}function tt({params:{missingProperty:e,propertyName:t},propertyName:r=t},a){let n=a;return n=e!==void 0?a.concat(e):n,n=r!==void 0?a.concat(r,_e("key-input")):n,n}function X({params:{missingProperty:e},parentSchema:t,message:r},a){if(!r)return"";if(e===void 0)return r;const n=a(e,t);return n===void 0?r:r.replace(e,n)}function J({uiSchema:e={}}){return(t,r)=>({value:r,errors:t.map(a=>{const n=ze(a.instancePath,r);return{path:tt(a,n),message:X(a,(s,i)=>{const c=Ae(e,n.concat(s));if(c!==void 0)return c;const o=i?.properties?.[s];if(typeof o=="object")return o.title})}})})}function Z(e){return e.instancePath===""}function rt(e){return Z(e)&&e.keyword!=="type"}function Q(e){return t=>t.filter(e.required?Z:rt).map(r=>X(r,()=>e.title))}function $(e,t,r,a){e(t);const n=e.errors;return e.errors=null,n?a(n,t):r(t)}async function ee(e,t,r,a){try{await e(t)}catch(n){if(!(n instanceof H.Ajv.ValidationError))throw n;return a(n.errors,t)}finally{e.errors=null}return r(t)}const te=e=>({value:e}),re=()=>[];function ne({compileSchema:e}){return{isValid(t,r,a){if(typeof t=="boolean")return t;const n=e(t,r);try{return n(a)}catch(s){return console.warn("Failed to validate",s),!1}}}}function nt(e){const t=J(e);return{validateFormValue(r,a){return $(e.compileSchema(r,r),a,te,t)}}}function at({compileFieldSchema:e}){return{validateFieldValue(t,r){return $(e(t),r,re,Q(t))}}}function it(e){const t=J(e);return{async validateFormValueAsync(r,a,n){return ee(e.compileAsyncSchema(a,a),n,te,t)}}}function ot({compileAsyncFieldSchema:e}){return{async validateFieldValueAsync(t,r,a){return ee(e(r),a,re,Q(r))}}}function Et({ajvOptions:e=Xe,ajvPlugins:t=et,ajv:r=t(new H.Ajv(e)),compileSchema:a=j(r),compileFieldSchema:n=z(r,!1),...s}={}){const i={...s,compileSchema:a,compileFieldSchema:n};return Object.assign(ne(i),nt(i),at(i))}function Rt({ajv:e,compileSchema:t=j(e),compileAsyncSchema:r=j(e),compileAsyncFieldSchema:a=z(e,!0),...n}){const s={...n,compileSchema:t,compileAsyncSchema:r,compileAsyncFieldSchema:a};return Object.assign(ne(s),it(s),ot(s))}const st="nativeFileField";function ct(e,t){O(t,!0);const r=b=>{var l=k(),v=w(l);Ie(v,()=>p(d)??Ve,()=>n,()=>t.config,()=>({get current(){return a()},set current(y){a(y)}}),()=>p(f)),A(b,l)};let a=S(t,"value",15);const n=C(),s=_(()=>Y(n,"fieldTemplate",t.config)),i="fileWidget",c=_(()=>Y(n,i,t.config)),o=he(n,()=>t.config,()=>Fe(n,t.config,a())),f=_(()=>Ee(n,t.config.path)),u=Ne({combinator:Ue,async execute(b,l){if(!(l===void 0||l.length===0)){if(!await Se(b,n,t.config,l))throw new Oe;return l[0]}},onSuccess(b){a(b)}}),d=_(()=>Re(n,t.config,st));var m=k(),g=w(m);{let b=_(()=>p(d)&&r);B(g,()=>p(s),(l,v)=>{v(l,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return t.uiOption},widgetType:i,get value(){return a()},get config(){return t.config},get errors(){return p(f)},get action(){return p(b)},children:(y,M)=>{var h=k(),R=w(h),P=()=>{const T=a(),x=new DataTransfer;return T&&x.items.add(T),x.files},ae=u.run;B(R,()=>p(c),(T,x)=>{x(T,{type:"widget",get value(){return P()},set value(ie){ae(ie)},get processing(){return u.isProcessed},loading:!1,get uiOption(){return t.uiOption},get handlers(){return o},get errors(){return p(f)},get config(){return t.config},multiple:!1})}),A(y,h)},$$slots:{default:!0}})})}A(e,m),E()}function ut(e,t){O(t,!0);let r=S(t,"value",15),a=xe(t,["$$slots","$$events","$$legacy","value"]);var n=()=>(oe(r()),r()),s=i=>{r(i)};ct(e,Te({get value(){return n()},set value(i){s(i)}},()=>a)),E()}ke.unknownNativeFileField=ut;var lt=D("<textarea></textarea>");function ft(e,t){O(t,!0);let r=S(t,"value",15);const a=C(),n=_(()=>Be(a,t.config,"textarea",t.handlers,{class:"sjsf-textarea"}));var s=lt();Ce(s),L(s,()=>({...p(n)})),We(s,r),A(e,s),E()}I.textareaWidget=ft;var dt=D("<input/>");function mt(e,t){O(t,!0);let r=S(t,"value",15);const a=C(),n=_(()=>K(a,t.config,"file",t.handlers,{multiple:t.multiple,class:"sjsf-file","data-loading":t.loading,"data-processing":t.processing}));var s=dt();L(s,()=>({type:"file",...p(n)}),void 0,void 0,void 0,void 0,!0),Ye(s,r),A(e,s),E()}I.fileWidget=mt;var pt=D('<label class="sjsf-checkboxes"><input/> </label>');function gt(e,t){O(t,!0);const r=[];let a=S(t,"value",15);const n=C(),s=_(()=>K(n,t.config,"checkboxes",t.handlers,{type:"checkbox"})),i=Ge({mapper:()=>Ke(t.options),value:()=>a(),update:f=>a(f)});var c=k(),o=w(c);we(o,17,()=>t.options,f=>f.id,(f,u)=>{var d=pt(),m=Me(d);L(m,()=>({value:p(u).id,...p(s),id:p(u).id,disabled:p(u).disabled||p(s).disabled}),void 0,void 0,void 0,void 0,!0);var g=Pe(m);je(d),De(()=>Le(g,` ${p(u).label??""}`)),He(r,[],m,()=>(p(u).id,i.value),b=>i.value=b),A(f,d)}),A(e,c),E()}I.checkboxesWidget=gt;export{te as C,re as N,et as a,Rt as b,Et as c,St as d,J as e,Q as f,Ot as g,qe as h,ze as p,$ as v};
