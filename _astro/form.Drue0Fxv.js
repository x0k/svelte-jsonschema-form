import"./_commonjsHelpers.aYOyWGRt.js";import{p as Y,f as Q,e as X,t as ee,b as te,a as ne,s as ae,h as re,c as ie,r as se}from"./render.rETKdxi5.js";import{d as oe,e as ue,a1 as D,as as le,O as pe,a as ce,b as de}from"./definitions.CKNeqcEd.js";import{c as fe}from"./en.Daw1EwGa.js";import{B as me}from"./basic-form.BtF7jWA3.js";import{B as ye,D as ge,E as he,I as be,N as ve,O as Oe,P as Pe,Z,a as Ae,b as $e,d as Ze,f as Te,g as ke,h as _e,i as ze,j as je,k as Se,l as j,m as Ne,n as Me,o as l,p as xe,q as we,r as De,s as Ie,t as Ee,u as Fe,v as Re,w as Le,x as Ve,y as Ce,z as Je,A as Ue,C as Be,F as qe,G as Ke,H as We,J as He,K as Ge,L as Ye,M as Qe,Q as Xe,R as et,S as tt,T as nt,U as at,V as rt,W as it,X as st,Y as ot,_,$ as ut,a0 as I,a1 as lt,c as pt,a2 as ct,a3 as dt,a4 as ft,a5 as mt,a6 as S,e as E,a7 as yt,a8 as gt,a9 as ht,aa as bt,ab as vt,ac as Ot,ad as Pt,ae as At,af as $t,ag as Zt,ah as Tt,ai as kt,aj as _t,ak as zt,al as jt,am as St,an as Nt,ao as Mt,ap as xt,aq as wt,ar as F,as as Dt,at as It,au as Et,av as Ft,aw as Rt,ax as Lt,ay as Vt,az as Ct,aA as Jt,aB as Ut,aC as Bt,aD as qt,aE as Kt,aF as z,aG as Wt,aH as Ht,aI as Gt,aJ as Yt,aK as Qt,aL as Xt,aM as en}from"./types.C5pYuFRO.js";import{g as tn}from"./model.BEqPVdcR.js";import{d as nn}from"./form-defaults.Ca1nV__r.js";import{i as an,u as N}from"./index.BPQVTpeN.js";import"./function.BB_gY1-Q.js";import"./snippet.QEy_2lEM.js";import"./form.EdM3ODPW.js";import"./content.T9slZfj9.js";import"./submit-button.CTrGr_W9.js";import"./path.BS1oztn3.js";import"./file-include.CcUxzdeP.js";import"./file-include.DHjZ99v8.js";import"./validator.LBsOPoKy.js";const rn=Object.freeze(Object.defineProperty({__proto__:null,BRAND:ye,DIRTY:ge,EMPTY_PATH:he,INVALID:be,NEVER:ve,OK:Oe,ParseStatus:Pe,Schema:Z,ZodAny:Ae,ZodArray:$e,ZodBigInt:Ze,ZodBoolean:Te,ZodBranded:ke,ZodCatch:_e,ZodDate:ze,ZodDefault:je,ZodDiscriminatedUnion:Se,ZodEffects:j,ZodEnum:Ne,ZodError:Me,get ZodFirstPartyTypeKind(){return l},ZodFunction:xe,ZodIntersection:we,ZodIssueCode:De,ZodLazy:Ie,ZodLiteral:Ee,ZodMap:Fe,ZodNaN:Re,ZodNativeEnum:Le,ZodNever:Ve,ZodNull:Ce,ZodNullable:Je,ZodNumber:Ue,ZodObject:Be,ZodOptional:qe,ZodParsedType:Ke,ZodPipeline:We,ZodPromise:He,ZodReadonly:Ge,ZodRecord:Ye,ZodSchema:Z,ZodSet:Qe,ZodString:Xe,ZodSymbol:et,ZodTransformer:j,ZodTuple:tt,ZodType:Z,ZodUndefined:nt,ZodUnion:at,ZodUnknown:rt,ZodVoid:it,addIssueToContext:st,any:ot,array:_,bigint:ut,boolean:I,coerce:lt,custom:pt,date:ct,datetimeRegex:dt,defaultErrorMap:ft,discriminatedUnion:mt,effect:S,enum:E,function:yt,getErrorMap:gt,getParsedType:ht,instanceof:bt,intersection:vt,isAborted:Ot,isAsync:Pt,isDirty:At,isValid:$t,late:Zt,lazy:Tt,literal:kt,makeIssue:_t,map:zt,nan:jt,nativeEnum:St,never:Nt,null:Mt,nullable:xt,number:wt,object:F,get objectUtil(){return Dt},oboolean:It,onumber:Et,optional:Ft,ostring:Rt,pipeline:Lt,preprocess:Vt,promise:Ct,quotelessJson:Jt,record:Ut,set:Bt,setErrorMap:qt,strictObject:Kt,string:z,symbol:Wt,transformer:S,tuple:Ht,undefined:Gt,union:Yt,unknown:Qt,get util(){return Xt},void:en},Symbol.toStringTag,{value:"Module"})),R=(e,t)=>e.anyOf.length?e.anyOf.length===1?m(e.anyOf[0],{...t,path:[...t.path,"anyOf",0]}):`z.union([${e.anyOf.map((n,a)=>m(n,{...t,path:[...t.path,"anyOf",a]})).join(", ")}])`:"z.any()",sn=e=>"z.boolean()",on=e=>"z.any()",un=(e,t)=>`z.union([${e.type.map(n=>m({...e,type:n},{...t,withoutDefaults:!0})).join(", ")}])`,ln=(e,t)=>`z.any().refine((value) => !${m(e.not,{...t,path:[...t.path,"not"]})}.safeParse(value).success, "Invalid input: Should NOT be valid against schema")`,pn=e=>"z.null()",cn=e=>[e.slice(0,e.length/2),e.slice(e.length/2)],P=Symbol("Original index"),dn=e=>{let t=[];for(let n=0;n<e.length;n++){const a=e[n];if(typeof a=="boolean")t.push(a?{[P]:n}:{[P]:n,not:{}});else{if(P in a)return e;t.push({...a,[P]:n})}}return t};function A(e,t){if(e.allOf.length===0)return"z.never()";if(e.allOf.length===1){const n=e.allOf[0];return m(n,{...t,path:[...t.path,"allOf",n[P]]})}else{const[n,a]=cn(dn(e.allOf));return`z.intersection(${A({allOf:n},t)}, ${A({allOf:a},t)})`}}function f(e,t,n){const a=e[t];let r="";if(a!==void 0){const s=n({value:a,json:JSON.stringify(a)});if(s){const i=s[0],o=s.length===3?s[1]:"",u=s.length===3?s[2]:s[1];r+=i,e.errorMessage?.[t]!==void 0&&(r+=o+JSON.stringify(e.errorMessage[t])),r+=u}}return r}const fn=(e,t)=>{if(Array.isArray(e.items))return`z.tuple([${e.items.map((a,r)=>m(a,{...t,path:[...t.path,"items",r]}))}])`;let n=e.items?`z.array(${m(e.items,{...t,path:[...t.path,"items"]})})`:"z.array(z.any())";return n+=f(e,"minItems",({json:a})=>[`.min(${a}`,", ",")"]),n+=f(e,"maxItems",({json:a})=>[`.max(${a}`,", ",")"]),n},mn=e=>`z.literal(${JSON.stringify(e.const)})`,yn=e=>e.enum.length===0?"z.never()":e.enum.length===1?`z.literal(${JSON.stringify(e.enum[0])})`:e.enum.every(t=>typeof t=="string")?`z.enum([${e.enum.map(t=>JSON.stringify(t))}])`:`z.union([${e.enum.map(t=>`z.literal(${JSON.stringify(t)})`).join(", ")}])`,gn=(e,t)=>{const n=m(e.if,{...t,path:[...t.path,"if"]}),a=m(e.then,{...t,path:[...t.path,"then"]}),r=m(e.else,{...t,path:[...t.path,"else"]});return`z.union([${a}, ${r}]).superRefine((value,ctx) => {
  const result = ${n}.safeParse(value).success
    ? ${a}.safeParse(value)
    : ${r}.safeParse(value);
  if (!result.success) {
    result.error.errors.forEach((error) => ctx.addIssue(error))
  }
})`},hn=e=>{let t="z.number()";return e.type==="integer"?t+=f(e,"type",()=>[".int(",")"]):t+=f(e,"format",({value:n})=>{if(n==="int64")return[".int(",")"]}),t+=f(e,"multipleOf",({value:n,json:a})=>n===1?t.startsWith("z.number().int(")?void 0:[".int(",")"]:[`.multipleOf(${a}`,", ",")"]),typeof e.minimum=="number"?e.exclusiveMinimum===!0?t+=f(e,"minimum",({json:n})=>[`.gt(${n}`,", ",")"]):t+=f(e,"minimum",({json:n})=>[`.gte(${n}`,", ",")"]):typeof e.exclusiveMinimum=="number"&&(t+=f(e,"exclusiveMinimum",({json:n})=>[`.gt(${n}`,", ",")"])),typeof e.maximum=="number"?e.exclusiveMaximum===!0?t+=f(e,"maximum",({json:n})=>[`.lt(${n}`,", ",")"]):t+=f(e,"maximum",({json:n})=>[`.lte(${n}`,", ",")"]):typeof e.exclusiveMaximum=="number"&&(t+=f(e,"exclusiveMaximum",({json:n})=>[`.lt(${n}`,", ",")"])),t},L=(e,t)=>e.oneOf.length?e.oneOf.length===1?m(e.oneOf[0],{...t,path:[...t.path,"oneOf",0]}):`z.any().superRefine((x, ctx) => {
    const schemas = [${e.oneOf.map((n,a)=>m(n,{...t,path:[...t.path,"oneOf",a]})).join(", ")}];
    const errors = schemas.reduce<z.ZodError[]>(
      (errors, schema) =>
        ((result) =>
          result.error ? [...errors, result.error] : errors)(
          schema.safeParse(x),
        ),
      [],
    );
    if (schemas.length - errors.length !== 1) {
      ctx.addIssue({
        path: ctx.path,
        code: "invalid_union",
        unionErrors: errors,
        message: "Invalid input: Should pass single schema",
      });
    }
  })`:"z.any()",V=e=>{const t=e.split(`
`);return`/**${t.length===1?t[0]:`
${t.map(a=>`* ${a}`).join(`
`)}
`}*/
`},bn=(e,t)=>{const n=e.description;return n?`
${V(n)}${t}`:t};function vn(e,t){let n;e.properties&&(Object.keys(e.properties).length?(n="z.object({ ",n+=Object.keys(e.properties).map(i=>{const o=e.properties[i];let u=`${JSON.stringify(i)}: ${m(o,{...t,path:[...t.path,"properties",i]})}`;t.withJsdocs&&typeof o=="object"&&(u=bn(o,u));const v=typeof o=="object"&&o.default!==void 0,O=Array.isArray(e.required)?e.required.includes(i):typeof o=="object"&&o.required===!0;return!v&&!O?`${u}.optional()`:u}).join(", "),n+=" })"):n="z.object({})");const a=e.additionalProperties!==void 0?m(e.additionalProperties,{...t,path:[...t.path,"additionalProperties"]}):void 0;let r;if(e.patternProperties){const i=Object.fromEntries(Object.entries(e.patternProperties).map(([o,u])=>[o,m(u,{...t,path:[...t.path,"patternProperties",o]})],{}));r="",n?a?r+=`.catchall(z.union([${[...Object.values(i),a].join(", ")}]))`:Object.keys(i).length>1?r+=`.catchall(z.union([${Object.values(i).join(", ")}]))`:r+=`.catchall(${Object.values(i)})`:a?r+=`z.record(z.union([${[...Object.values(i),a].join(", ")}]))`:Object.keys(i).length>1?r+=`z.record(z.union([${Object.values(i).join(", ")}]))`:r+=`z.record(${Object.values(i)})`,r+=`.superRefine((value, ctx) => {
`,r+=`for (const key in value) {
`,a&&(e.properties?r+=`let evaluated = [${Object.keys(e.properties).map(o=>JSON.stringify(o)).join(", ")}].includes(key)
`:r+=`let evaluated = false
`);for(const o in e.patternProperties)r+="if (key.match(new RegExp("+JSON.stringify(o)+`))) {
`,a&&(r+=`evaluated = true
`),r+="const result = "+i[o]+`.safeParse(value[key])
`,r+=`if (!result.success) {
`,r+=`ctx.addIssue({
          path: [...ctx.path, key],
          code: 'custom',
          message: \`Invalid input: Key matching regex /\${key}/ must match schema\`,
          params: {
            issues: result.error.issues
          }
        })
`,r+=`}
`,r+=`}
`;a&&(r+=`if (!evaluated) {
`,r+="const result = "+a+`.safeParse(value[key])
`,r+=`if (!result.success) {
`,r+=`ctx.addIssue({
          path: [...ctx.path, key],
          code: 'custom',
          message: \`Invalid input: must match catchall schema\`,
          params: {
            issues: result.error.issues
          }
        })
`,r+=`}
`,r+=`}
`),r+=`}
`,r+="})"}let s=n?r?n+r:a?a==="z.never()"?n+".strict()":n+`.catchall(${a})`:n:r||(a?`z.record(${a})`:"z.record(z.any())");return d.an.anyOf(e)&&(s+=`.and(${R({...e,anyOf:e.anyOf.map(i=>typeof i=="object"&&!i.type&&(i.properties||i.additionalProperties||i.patternProperties)?{...i,type:"object"}:i)},t)})`),d.a.oneOf(e)&&(s+=`.and(${L({...e,oneOf:e.oneOf.map(i=>typeof i=="object"&&!i.type&&(i.properties||i.additionalProperties||i.patternProperties)?{...i,type:"object"}:i)},t)})`),d.an.allOf(e)&&(s+=`.and(${A({...e,allOf:e.allOf.map(i=>typeof i=="object"&&!i.type&&(i.properties||i.additionalProperties||i.patternProperties)?{...i,type:"object"}:i)},t)})`),s}const On=e=>{let t="z.string()";t+=f(e,"format",({value:a})=>{switch(a){case"email":return[".email(",")"];case"ip":return[".ip(",")"];case"ipv4":return['.ip({ version: "v4"',", message: "," })"];case"ipv6":return['.ip({ version: "v6"',", message: "," })"];case"uri":return[".url(",")"];case"uuid":return[".uuid(",")"];case"date-time":return[".datetime({ offset: true",", message: "," })"];case"time":return[".time(",")"];case"date":return[".date(",")"];case"binary":return[".base64(",")"];case"duration":return[".duration(",")"]}}),t+=f(e,"pattern",({json:a})=>[`.regex(new RegExp(${a})`,", ",")"]),t+=f(e,"minLength",({json:a})=>[`.min(${a}`,", ",")"]),t+=f(e,"maxLength",({json:a})=>[`.max(${a}`,", ",")"]),t+=f(e,"contentEncoding",({value:a})=>{if(a==="base64")return[".base64(",")"]});const n=f(e,"contentMediaType",({value:a})=>{if(a==="application/json")return['.transform((str, ctx) => { try { return JSON.parse(str); } catch (err) { ctx.addIssue({ code: "custom", message: "Invalid JSON" }); }}',", ",")"]});return n!=""&&(t+=n,t+=f(e,"contentSchema",({value:a})=>{if(a&&a instanceof Object)return[`.pipe(${m(a)}`,", ",")"]})),t},Pn=(e,...t)=>Object.keys(e).reduce((n,a)=>(t.includes(a)||(n[a]=e[a]),n),{}),An=(e,t)=>`${m(Pn(e,"nullable"),t,!0)}.nullable()`,m=(e,t={seen:new Map,path:[]},n)=>{if(typeof e!="object")return e?"z.any()":"z.never()";if(t.parserOverride){const s=t.parserOverride(e,t);if(typeof s=="string")return s}let a=t.seen.get(e);if(a){if(a.r!==void 0)return a.r;if(t.depth===void 0||a.n>=t.depth)return"z.any()";a.n+=1}else a={r:void 0,n:0},t.seen.set(e,a);let r=kn(e,t);return n||(t.withoutDescribes||(r=$n(e,r)),t.withoutDefaults||(r=Zn(e,r)),r=Tn(e,r)),a.r=r,r},$n=(e,t)=>(e.description&&(t+=`.describe(${JSON.stringify(e.description)})`),t),Zn=(e,t)=>(e.default!==void 0&&(t+=`.default(${JSON.stringify(e.default)})`),t),Tn=(e,t)=>(e.readOnly&&(t+=".readonly()"),t),kn=(e,t)=>d.a.nullable(e)?An(e,t):d.an.object(e)?vn(e,t):d.an.array(e)?fn(e,t):d.an.anyOf(e)?R(e,t):d.an.allOf(e)?A(e,t):d.a.oneOf(e)?L(e,t):d.a.not(e)?ln(e,t):d.an.enum(e)?yn(e):d.a.const(e)?mn(e):d.a.multipleType(e)?un(e,t):d.a.primitive(e,"string")?On(e):d.a.primitive(e,"number")||d.a.primitive(e,"integer")?hn(e):d.a.primitive(e,"boolean")?sn():d.a.primitive(e,"null")?pn():d.a.conditional(e)?gn(e,t):on(),d={an:{object:e=>e.type==="object",array:e=>e.type==="array",anyOf:e=>e.anyOf!==void 0,allOf:e=>e.allOf!==void 0,enum:e=>e.enum!==void 0},a:{nullable:e=>e.nullable===!0,multipleType:e=>Array.isArray(e.type),not:e=>e.not!==void 0,const:e=>e.const!==void 0,primitive:(e,t)=>e.type===t,conditional:e=>!!("if"in e&&e.if&&"then"in e&&"else"in e&&e.then&&e.else),oneOf:e=>e.oneOf!==void 0}},_n=(e,{module:t,name:n,type:a,noImport:r,...s}={})=>{if(a&&(!n||t!=="esm"))throw new Error("Option `type` requires `name` to be set and `module` to be `esm`");let i=m(e,{module:t,name:n,path:[],seen:new Map,...s});const o=s.withJsdocs&&typeof e!="boolean"&&e.description?V(e.description):"";if(t==="cjs"?(i=`${o}module.exports = ${n?`{ ${JSON.stringify(n)}: ${i} }`:i}
`,r||(i=`${o}const { z } = require("zod")

${i}`)):t==="esm"?(i=`${o}export ${n?`const ${n} =`:"default"} ${i}
`,r||(i=`import { z } from "zod"

${i}`)):n&&(i=`${o}const ${n} = ${i}`),a&&n){let u=typeof a=="string"?a:`${n[0].toUpperCase()}${n.substring(1)}`;i+=`export type ${u} = z.infer<typeof ${n}>
`}return i};function C(e){return(t,n)=>t.success?[]:t.error.issues.map(a=>{const r=oe(a.path,e),s=ue(e.uiSchema??{},a.path)??tn(n,a.path)??a.path[a.path.length-1]??r;return{instanceId:r,propertyTitle:String(s),message:a.message,error:a}})}function zn(e){return e.code!=="invalid_type"}function J(e,t){if(t.success)return[];const{issues:n}=t.error;return(e.required?n:n.filter(zn)).map(a=>({instanceId:e.id,propertyTitle:e.title,message:a.message,error:a}))}function U(e){return new Function("z",`return ${_n(e)}`)(rn)}function jn(){const e=new WeakMap;let t;const n=D(e,a=>U(le(a,t)));return(a,r)=>(t!==r&&(t=r,e.delete(a)),n(a))}function Sn(){const t=D(new WeakMap,U);return n=>t(n.schema)}function Nn({createZodSchema:e}){return{isValid(t,n,a){return typeof t=="boolean"?t:e(t,n).safeParse(a).success}}}function Mn(e){const t=C(e);return{validateFormValue(n,a){return t(e.zodSchema.safeParse(a),n)}}}function xn(e){const t=C(e);return{async validateFormValueAsync(n,a,r){const s=await e.zodSchema.safeParseAsync(r);return t(s,a)}}}function wn({createFieldZodSchema:e}){return{validateFieldValue(t,n){const r=e(t).safeParse(n);return J(t,r)}}}function Dn({createFieldZodSchema:e}){return{async validateFieldValueAsync(t,n,a){const s=await e(n).safeParseAsync(a);return J(n,s)}}}function In(e,{async:t,createZodSchema:n=jn(),createFieldZodSchema:a=Sn(),...r}={}){const s={...r,zodSchema:e,createZodSchema:n,createFieldZodSchema:a},i=Nn(s);return t?Object.assign(i,xn(s),Dn(s)):Object.assign(i,Mn(s),wn(s))}const En=Symbol("Let zodToJsonSchema decide on which parser to use"),M={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Fn=e=>typeof e=="string"?{...M,name:e}:{...M,...e},Rn=e=>{const t=Fn(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([a,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,a],jsonSchema:void 0}]))}};function B(e,t,n,a){a?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function c(e,t,n,a,r){e[t]=n,B(e,t,a,r)}const q=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function g(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?q(t,e.currentPath):t.join("/")}}function Ln(e,t){const n={type:"array"};return e.type?._def&&e.type?._def?.typeName!==l.ZodAny&&(n.items=p(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&c(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&c(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(c(n,"minItems",e.exactLength.value,e.exactLength.message,t),c(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Vn(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const a of e.checks)switch(a.kind){case"min":t.target==="jsonSchema7"?a.inclusive?c(n,"minimum",a.value,a.message,t):c(n,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(n.exclusiveMinimum=!0),c(n,"minimum",a.value,a.message,t));break;case"max":t.target==="jsonSchema7"?a.inclusive?c(n,"maximum",a.value,a.message,t):c(n,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(n.exclusiveMaximum=!0),c(n,"maximum",a.value,a.message,t));break;case"multipleOf":c(n,"multipleOf",a.value,a.message,t);break}return n}function Cn(){return{type:"boolean"}}function K(e,t){return p(e.type._def,t)}const Jn=(e,t)=>p(e.innerType._def,t);function W(e,t,n){const a=n??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((r,s)=>W(e,t,r))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Un(e,t)}}const Un=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const a of e.checks)switch(a.kind){case"min":c(n,"minimum",a.value,a.message,t);break;case"max":c(n,"maximum",a.value,a.message,t);break}return n};function Bn(e,t){return{...p(e.innerType._def,t),default:e.defaultValue()}}function qn(e,t){return t.effectStrategy==="input"?p(e.schema._def,t):g(t)}function Kn(e){return{type:"string",enum:Array.from(e.values)}}const Wn=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Hn(e,t){const n=[p(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),p(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s);let a=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const r=[];return n.forEach(s=>{if(Wn(s))r.push(...s.allOf),s.unevaluatedProperties===void 0&&(a=void 0);else{let i=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:o,...u}=s;i=u}else a=void 0;r.push(i)}}),r.length?{allOf:r,...a}:void 0}function Gn(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let T;const h={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(T===void 0&&(T=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),T),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function H(e,t){const n={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":c(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,a.value):a.value,a.message,t);break;case"max":c(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":b(n,"email",a.message,t);break;case"format:idn-email":b(n,"idn-email",a.message,t);break;case"pattern:zod":y(n,h.email,a.message,t);break}break;case"url":b(n,"uri",a.message,t);break;case"uuid":b(n,"uuid",a.message,t);break;case"regex":y(n,a.regex,a.message,t);break;case"cuid":y(n,h.cuid,a.message,t);break;case"cuid2":y(n,h.cuid2,a.message,t);break;case"startsWith":y(n,RegExp(`^${k(a.value,t)}`),a.message,t);break;case"endsWith":y(n,RegExp(`${k(a.value,t)}$`),a.message,t);break;case"datetime":b(n,"date-time",a.message,t);break;case"date":b(n,"date",a.message,t);break;case"time":b(n,"time",a.message,t);break;case"duration":b(n,"duration",a.message,t);break;case"length":c(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,a.value):a.value,a.message,t),c(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,a.value):a.value,a.message,t);break;case"includes":{y(n,RegExp(k(a.value,t)),a.message,t);break}case"ip":{a.version!=="v6"&&b(n,"ipv4",a.message,t),a.version!=="v4"&&b(n,"ipv6",a.message,t);break}case"base64url":y(n,h.base64url,a.message,t);break;case"jwt":y(n,h.jwt,a.message,t);break;case"cidr":{a.version!=="v6"&&y(n,h.ipv4Cidr,a.message,t),a.version!=="v4"&&y(n,h.ipv6Cidr,a.message,t);break}case"emoji":y(n,h.emoji(),a.message,t);break;case"ulid":{y(n,h.ulid,a.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{b(n,"binary",a.message,t);break}case"contentEncoding:base64":{c(n,"contentEncoding","base64",a.message,t);break}case"pattern:zod":{y(n,h.base64,a.message,t);break}}break}case"nanoid":y(n,h.nanoid,a.message,t)}return n}function k(e,t){return t.patternStrategy==="escape"?Qn(e):e}const Yn=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Qn(e){let t="";for(let n=0;n<e.length;n++)Yn.has(e[n])||(t+="\\"),t+=e[n];return t}function b(e,t,n,a){e.format||e.anyOf?.some(r=>r.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&a.errorMessages&&{errorMessage:{format:n}}})):c(e,"format",t,n,a)}function y(e,t,n,a){e.pattern||e.allOf?.some(r=>r.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:x(t,a),...n&&a.errorMessages&&{errorMessage:{pattern:n}}})):c(e,"pattern",x(t,a),n,a)}function x(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=n.i?e.source.toLowerCase():e.source;let r="",s=!1,i=!1,o=!1;for(let u=0;u<a.length;u++){if(s){r+=a[u],s=!1;continue}if(n.i){if(i){if(a[u].match(/[a-z]/)){o?(r+=a[u],r+=`${a[u-2]}-${a[u]}`.toUpperCase(),o=!1):a[u+1]==="-"&&a[u+2]?.match(/[a-z]/)?(r+=a[u],o=!0):r+=`${a[u]}${a[u].toUpperCase()}`;continue}}else if(a[u].match(/[a-z]/)){r+=`[${a[u]}${a[u].toUpperCase()}]`;continue}}if(n.m){if(a[u]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(a[u]==="$"){r+=`($|(?=[\r
]))`;continue}}if(n.s&&a[u]==="."){r+=i?`${a[u]}\r
`:`[${a[u]}\r
]`;continue}r+=a[u],a[u]==="\\"?s=!0:i&&a[u]==="]"?i=!1:!i&&a[u]==="["&&(i=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return r}function G(e,t){if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&e.keyType?._def.typeName===l.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((a,r)=>({...a,[r]:p(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??g(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:p(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(e.keyType?._def.typeName===l.ZodString&&e.keyType._def.checks?.length){const{type:a,...r}=H(e.keyType._def,t);return{...n,propertyNames:r}}else{if(e.keyType?._def.typeName===l.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===l.ZodBranded&&e.keyType._def.type._def.typeName===l.ZodString&&e.keyType._def.type._def.checks?.length){const{type:a,...r}=K(e.keyType._def,t);return{...n,propertyNames:r}}}return n}function Xn(e,t){if(t.mapStrategy==="record")return G(e,t);const n=p(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||g(t),a=p(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||g(t);return{type:"array",maxItems:125,items:{type:"array",items:[n,a],minItems:2,maxItems:2}}}function ea(e){const t=e.values,a=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),r=Array.from(new Set(a.map(s=>typeof s)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:a}}function ta(e){return e.target==="openAi"?void 0:{not:g({...e,currentPath:[...e.currentPath,"not"]})}}function na(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const $={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function aa(e,t){if(t.target==="openApi3")return w(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(a=>a._def.typeName in $&&(!a._def.checks||!a._def.checks.length))){const a=n.reduce((r,s)=>{const i=$[s._def.typeName];return i&&!r.includes(i)?[...r,i]:r},[]);return{type:a.length>1?a:a[0]}}else if(n.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=n.reduce((r,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...r,i];case"bigint":return[...r,"integer"];case"object":if(s._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(a.length===n.length){const r=a.filter((s,i,o)=>o.indexOf(s)===i);return{type:r.length>1?r:r[0],enum:n.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(n.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((a,r)=>[...a,...r._def.values.filter(s=>!a.includes(s))],[])};return w(e,t)}const w=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((a,r)=>p(a._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(a=>!!a&&(!t.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return n.length?{anyOf:n}:void 0};function ra(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:$[e.innerType._def.typeName],nullable:!0}:{type:[$[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const a=p(e.innerType._def,{...t,currentPath:[...t.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}const n=p(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function ia(e,t){const n={type:"number"};if(!e.checks)return n;for(const a of e.checks)switch(a.kind){case"int":n.type="integer",B(n,"type",a.message,t);break;case"min":t.target==="jsonSchema7"?a.inclusive?c(n,"minimum",a.value,a.message,t):c(n,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(n.exclusiveMinimum=!0),c(n,"minimum",a.value,a.message,t));break;case"max":t.target==="jsonSchema7"?a.inclusive?c(n,"maximum",a.value,a.message,t):c(n,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(n.exclusiveMaximum=!0),c(n,"maximum",a.value,a.message,t));break;case"multipleOf":c(n,"multipleOf",a.value,a.message,t);break}return n}function sa(e,t){const n=t.target==="openAi",a={type:"object",properties:{}},r=[],s=e.shape();for(const o in s){let u=s[o];if(u===void 0||u._def===void 0)continue;let v=ua(u);v&&n&&(u._def.typeName==="ZodOptional"&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),v=!1);const O=p(u._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});O!==void 0&&(a.properties[o]=O,v||r.push(o))}r.length&&(a.required=r);const i=oa(e,t);return i!==void 0&&(a.additionalProperties=i),a}function oa(e,t){if(e.catchall._def.typeName!=="ZodNever")return p(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function ua(e){try{return e.isOptional()}catch{return!0}}const la=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return p(e.innerType._def,t);const n=p(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:g(t)},n]}:g(t)},pa=(e,t)=>{if(t.pipeStrategy==="input")return p(e.in._def,t);if(t.pipeStrategy==="output")return p(e.out._def,t);const n=p(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=p(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,a].filter(r=>r!==void 0)}};function ca(e,t){return p(e.type._def,t)}function da(e,t){const a={type:"array",uniqueItems:!0,items:p(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&c(a,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&c(a,"maxItems",e.maxSize.value,e.maxSize.message,t),a}function fa(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,a)=>p(n._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((n,a)=>a===void 0?n:[...n,a],[]),additionalItems:p(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,a)=>p(n._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((n,a)=>a===void 0?n:[...n,a],[])}}function ma(e){return{not:g(e)}}function ya(e){return g(e)}const ga=(e,t)=>p(e.innerType._def,t),ha=(e,t,n)=>{switch(t){case l.ZodString:return H(e,n);case l.ZodNumber:return ia(e,n);case l.ZodObject:return sa(e,n);case l.ZodBigInt:return Vn(e,n);case l.ZodBoolean:return Cn();case l.ZodDate:return W(e,n);case l.ZodUndefined:return ma(n);case l.ZodNull:return na(n);case l.ZodArray:return Ln(e,n);case l.ZodUnion:case l.ZodDiscriminatedUnion:return aa(e,n);case l.ZodIntersection:return Hn(e,n);case l.ZodTuple:return fa(e,n);case l.ZodRecord:return G(e,n);case l.ZodLiteral:return Gn(e,n);case l.ZodEnum:return Kn(e);case l.ZodNativeEnum:return ea(e);case l.ZodNullable:return ra(e,n);case l.ZodOptional:return la(e,n);case l.ZodMap:return Xn(e,n);case l.ZodSet:return da(e,n);case l.ZodLazy:return()=>e.getter()._def;case l.ZodPromise:return ca(e,n);case l.ZodNaN:case l.ZodNever:return ta(n);case l.ZodEffects:return qn(e,n);case l.ZodAny:return g(n);case l.ZodUnknown:return ya(n);case l.ZodDefault:return Bn(e,n);case l.ZodBranded:return K(e,n);case l.ZodReadonly:return ga(e,n);case l.ZodCatch:return Jn(e,n);case l.ZodPipeline:return pa(e,n);case l.ZodFunction:case l.ZodVoid:case l.ZodSymbol:return;default:return(a=>{})()}};function p(e,t,n=!1){const a=t.seen.get(e);if(t.override){const o=t.override?.(e,t,a,n);if(o!==En)return o}if(a&&!n){const o=ba(a,t);if(o!==void 0)return o}const r={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,r);const s=ha(e,e.typeName,t),i=typeof s=="function"?p(s(),t):s;if(i&&va(e,t,i),t.postProcess){const o=t.postProcess(i,e,t);return r.jsonSchema=i,o}return r.jsonSchema=i,i}const ba=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:q(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,a)=>t.currentPath[a]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),g(t)):t.$refStrategy==="seen"?g(t):void 0}},va=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Oa=(e,t)=>{const n=Rn(t);let a=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[v,O])=>({...u,[v]:p(O._def,{...n,currentPath:[...n.basePath,n.definitionPath,v]},!0)??g(n)}),{}):void 0;const r=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,s=p(e._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??g(n),i=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;i!==void 0&&(s.title=i),n.flags.hasReferencedOpenAiAnyType&&(a||(a={}),a[n.openAiAnyTypeName]||(a[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const o=r===void 0?a?{...s,[n.definitionPath]:a}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...a,[r]:s}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var Pa=Q("<!> <pre> </pre>",1);function Va(e,t){Y(t,!0);const n=F({id:z().regex(new RegExp("^\\d+$"),"Must be a number").min(8).optional(),active:I().optional(),skills:_(z().min(5)).min(4).optional(),multipleChoicesList:_(E(["foo","bar","fuzz"])).max(2).optional()}),a=In(n,{uiSchema:N}),r=fe({...nn,schema:Oa(n,{errorMessages:!0}),uiSchema:N,validator:a,fieldsValidationMode:pe|ce|de,initialValue:an});var s=Pa(),i=X(s);me(i,{get form(){return r},novalidate:!0});var o=ae(i,2),u=ie(o,!0);se(o),ee(v=>re(u,v),[()=>JSON.stringify(r.value,null,2)]),te(e,s),ne()}export{Va as default};
