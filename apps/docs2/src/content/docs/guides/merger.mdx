---
title: Merger setup
sidebar:
  order: 4
---

import { Code, Card, LinkCard, Tabs, TabItem } from '@astrojs/starlight/components';

Starting with the third version, you must provide `createMerger` option to the form
for `FormMerger` instantiation.

<LinkCard title="Form merger API" href="../../form/merger/" />

The following configuration will be sufficient for most projects:

```ts
import { createFormMerger } from "@sjsf/form/mergers/modern";

const form = createForm({
  createMerger: createFromMerger,
  ...
});
```

But in some cases you can/must tweak `createFromMerger` options to aspire
desired/correct behavior.

## $ref properties override

In some cases you may want to override some properties of referenced schema,
for example:

```json
{
  "title": "bar",
  "$ref": "#/definitions/foo"
}
```

You can achieve this by overriding `mergeSchemas` method of `modern` merger:

```ts
import { createFormMerger } from "@sjsf/form/mergers/modern";
import { mergeSchemas } from "@sjsf/from/mergers/legacy";


const createMerger = (options: MergerFactoryOptions) => {
  return {
    ...createFromMerger(options),
    mergeSchemas,
  }
}
```

Or by providing custom merger for `title` property:

:::caution

When using this approach, `title` will always receive the last non-`undefined` value.

:::

```ts
import { createMerger } from "@sjsf/lib/json-schema"
import { createFormMerger } from "@sjsf/form/mergers/modern";

const createMerger = (options: MergerFactoryOptions) => createFormMerger({
  ...options,
  jsonSchemaMerger = createMerger({
    mergers: {
      title: (_, r) => r,
    }
  })
})
```

## allOf keyword

