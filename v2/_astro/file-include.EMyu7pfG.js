import{Z as I,R as V,_ as H,$ as K,p as L,l as S,K as U,m as O,L as W,t as p,N as C,P as N,X,Y}from"./definitions.BkKh-JoQ.js";import"./_commonjsHelpers.CIgd6hLE.js";import{p as A,l as b,a as w,b as T,c as B,g as d,u as f}from"./render.CHN_MqNO.js";async function R(r,e,n,t){const{name:s,blob:i}=await r.dataUrlToBlob(e,t);n.items.add(new File([i],s,{type:i.type}))}function Q(r,e,n,t){const s=[];for(const i of t)s.push(R(r,e,n,i));return Promise.all(s)}function Z(r,e){return r.anyOf?[r.anyOf,e.anyOf]:[r.oneOf,e.oneOf]}function j(r,e,n,t){const s=t.enum,i=new Set(n("disabledEnumValues"));if(s){const a=n("enumNames");return s.map((o,u)=>{const g=a?.[u]??I(o);return{id:V(e.id,u,r),label:g,value:o,disabled:i.has(o)}})}const[m,h]=Z(t,e.uiSchema);return m&&m.map((a,o)=>{if(typeof a=="boolean")throw new Error(`Invalid enum definition in anyOf ${o}`);const u=H(a),g=K(r,h?.[o])["ui:options"]?.title??a.title??I(u);return{id:V(e.id,o,r),schema:a,label:g,value:u,disabled:i.has(u)}})}function q(r,e){A(e,!0);let n=L(e,"value",15);const t=S(),s=f(()=>p(t,"fieldTemplate",e.config)),i="selectWidget",m=f(()=>p(t,i,e.config)),h=U(t,()=>W(t,e.config,n())),a=f(()=>j(t,e.config,e.uiOption,e.config.schema)??[]),o=f(()=>C(t,e.config.id));var u=b(),g=w(u);O(g,()=>d(s),(c,l)=>{l(c,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return n()},get config(){return e.config},get errors(){return d(o)},children:(v,k)=>{var y=b(),F=w(y);O(F,()=>d(m),(P,_)=>{_(P,{type:"widget",get handlers(){return h},get config(){return e.config},get errors(){return d(o)},get uiOption(){return e.uiOption},get options(){return d(a)},get value(){return n()},set value(E){n(E)}})}),T(v,y)},$$slots:{default:!0}})}),T(r,u),B()}N.enumField=q;function z(r,e){A(e,!0);let n=L(e,"value",15);const t=S(),s=f(()=>p(t,"fieldTemplate",e.config)),i="fileWidget",m=f(()=>p(t,i,e.config)),h=U(t,()=>W(t,e.config,n())),a=X({initialOutput:void 0,getInput:()=>n(),setInput:c=>n(c),async toOutput(c,l){const v=new DataTransfer;return l!==void 0&&await R(t,c,v,l),v.files},async toInput(c,l){return l===void 0||l.length===0?void 0:Y(c,l[0])}}),o=f(()=>C(t,e.config.id));var u=b(),g=w(u);O(g,()=>d(s),(c,l)=>{l(c,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:i,get value(){return n()},get config(){return e.config},get errors(){return d(o)},children:(v,k)=>{var y=b(),F=w(y);O(F,()=>d(m),(P,_)=>{_(P,{type:"widget",get processing(){return a.inputProcessing},get loading(){return a.outputProcessing},get uiOption(){return e.uiOption},get handlers(){return h},get errors(){return d(o)},get config(){return e.config},multiple:!1,get value(){return a.current},set value(E){a.current=E}})}),T(v,y)},$$slots:{default:!0}})}),T(r,u),B()}N.fileField=z;export{Q as a,j as c};
